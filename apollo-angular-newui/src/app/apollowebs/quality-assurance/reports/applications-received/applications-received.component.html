<div class="main-content">

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <div class="card-header card-header-warning card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">create</i>
                        </div>
                        <p class="card-category">Total Applications</p>
                        <ng-template #totals class="loaderHolder">
                            <h3 class="card-title"></h3>
                        </ng-template>
                        <div *ngIf="dMarksRetrievedData && sMarksRetrievedData && fMarksRetrievedData; else totals">
                            <h3 class="card-title">{{dMarksRetrieved + sMarksRetrieved + fMarksRetrieved}}</h3>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons">create</i> All Applications Received
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <div class="card-header card-header-rose card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">payments</i>
                        </div>
                        <p class="card-category">Total Amount Paid</p>
                        <ng-template #amounts class="loaderHolder">
                            <h3 class="card-title"></h3>
                        </ng-template>
                        <div *ngIf="dMarksRetrievedData && sMarksRetrievedData && fMarksRetrievedData; else amounts">
                            <h3 class="card-title">
                                Ksh {{(sumSMarkAmountPermit + sumDMarkAmountPermit + sumFMarkAmountPermit)| number: '1.2-2'}}</h3>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons">payments</i> All Payments Made
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <div class="card-header card-header-success card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">done</i>
                        </div>
                        <p class="card-category">Total Approved</p>
                        <ng-template #approved class="loaderHolder">
                            <h3 class="card-title"></h3>
                        </ng-template>
                        <div *ngIf="dMarksRetrievedData && sMarksRetrievedData && fMarksRetrievedData; else approved">
                            <h3 class="card-title">
                                {{sMarkPermitsAwarded + fMarkPermitsAwarded + dMarkPermitsAwarded}}</h3>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons">done</i> Approved Applications
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="card card-stats">
                    <div class="card-header card-header-danger card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons">close</i>
                        </div>
                        <p class="card-category">Total Rejected</p>
                        <ng-template #rejected class="loaderHolder">
                            <h3 class="card-title"></h3>
                        </ng-template>
                        <div *ngIf="dMarksRetrievedData && sMarksRetrievedData && fMarksRetrievedData; else rejected">
                            <h3 class="card-title">
                                {{sMarkPermitsRejected + dMarkPermitsRejected + fMarkPermitsRejected}}</h3>
                        </div>
                    </div>
                    <div class="card-footer">
                        <div class="stats">
                            <i class="material-icons">close</i> Rejected Applications
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="card ">
                <div class="card-header ">
                    <h4 class="card-title">Reports -
                        <small class="description">Applications Received</small>
                    </h4>
                </div>
                <div class="card-body ">
                    <ul class="nav nav-pills nav-pills-rose nav-pills-icons justify-content-center" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" data-toggle="tab" href="#link1" role="tablist">
                                <i class="material-icons">diamond</i>Diamond Mark
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#link2" role="tablist">
                                <i class="material-icons">done_outline</i>Standardization Mark
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#link3" role="tablist">
                                <i class="material-icons">rowing</i>Fortification Mark
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content tab-space">
                        <div class="tab-pane active" id="link1">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header card-header-primary card-header-icon">
                                            <div class="card-icon">
                                                <i class="material-icons">diamond</i>
                                            </div>
                                            <h4 class="card-title">Diamond Mark: All Applications Received</h4>
                                        </div>
                                        <div class="card-body">
                                            <div id="accordion" role="tablist">
                                                <div class="card-collapse">
                                                    <div class="card-header" role="tab" id="headingThree">
                                                        <h5 class="mb-0">
                                                            <a class="collapsed" data-toggle="collapse"
                                                               href="#collapseThree" aria-expanded="false"
                                                               aria-controls="collapseThree">
                                                                Diamond Mark: Apply Filter
                                                                <i class="material-icons">keyboard_arrow_down</i>
                                                            </a>
                                                        </h5>
                                                    </div>
                                                    <div id="collapseThree" class="collapse" role="tabpanel"
                                                         aria-labelledby="headingThree" data-parent="#accordion">
                                                        <div class="card-body">
                                                            <div class="row">
                                                                <div class="container text-center">
                                                                    <form #formDirective="ngForm"
                                                                          (ngSubmit)="applyFilter(formDirective)"
                                                                          [formGroup]="filterFormGroup" class="form">

                                                                        <div class="row">
                                                                            <!--Custom Filters -->
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Region:</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="regionId"
                                                                                                formControlName="regionId"
                                                                                                placeholder="By Region">
                                                                                        <mat-option
                                                                                                *ngFor="let region of regions"
                                                                                                value="{{region.id}}">{{region.region}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Section</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="sectionId"
                                                                                                formControlName="sectionId"
                                                                                                placeholder="By Section">
                                                                                        <mat-option
                                                                                                *ngFor="let section of sections"
                                                                                                value="{{section.id}}">{{section.section}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Statuses</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="statusId"
                                                                                                formControlName="statusId"
                                                                                                placeholder="By Statuses">
                                                                                        <mat-option
                                                                                                *ngFor="let status of statuses"
                                                                                                value="{{status.id}}">{{status.processStatusName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Allocated
                                                                                        Officer</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="officerId"
                                                                                                formControlName="officerId"
                                                                                                placeholder="By Allocated Officer">
                                                                                        <mat-option
                                                                                                *ngFor="let officer of users"
                                                                                                value="{{officer.id}}">{{officer.firstName}} {{officer.lastName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label class="form-label"><b>By
                                                                                        Category:</b></label>

                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="category"
                                                                                                formControlName="category"
                                                                                                placeholder="By category">
                                                                                        <mat-option value="Large">Large
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Medium">
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Small">Small
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>

                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Application Range
                                                                                        Date:</b></label>
                                                                                    <mat-form-field appearance="fill">
                                                                                        <mat-label>Enter a date range
                                                                                        </mat-label>
                                                                                        <mat-date-range-input

                                                                                                [max]="today"
                                                                                                [rangePicker]="picker">
                                                                                            <input matStartDate
                                                                                                   #dateRangeStart
                                                                                                   placeholder="Start date"

                                                                                            >
                                                                                            <input matEndDate
                                                                                                   #dateRangeEnd
                                                                                                   placeholder="End date"
                                                                                                   (dateChange)="dateRangeChange(dateRangeStart, dateRangeEnd)"

                                                                                            >
                                                                                        </mat-date-range-input>
                                                                                        <mat-hint>MM/DD/YYYY â€“
                                                                                            MM/DD/YYYY
                                                                                        </mat-hint>
                                                                                        <mat-datepicker-toggle matSuffix
                                                                                                               [for]="picker"></mat-datepicker-toggle>
                                                                                        <mat-date-range-picker
                                                                                            #picker></mat-date-range-picker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <div class="form-group">
                                                                                    <label><strong> By Product
                                                                                        Description:</strong></label>
                                                                                    <mat-form-field
                                                                                            class="example-full-width">

                                                                                        <input type="text"
                                                                                               matInput
                                                                                               id="productDescription"
                                                                                               formControlName="productDescription"
                                                                                               placeholder="Enter Product Description">
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <input type="hidden"

                                                                                   id="permitType"
                                                                                   formControlName="permitType"
                                                                                   ngModel="{{dMarkID}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="start"
                                                                                   formControlName="commenceDate"
                                                                                   ngModel="{{startDate}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="end"
                                                                                   formControlName="lastDate"
                                                                                   ngModel="{{endDate}}"
                                                                            >
                                                                        </div>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                style="width: inherit" type="submit">
                                                                            Filter
                                                                            results
                                                                        </button>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                type="button"
                                                                                (click)="resetForm()"
                                                                                style="float:right;
                                                                                width: inherit">
                                                                            Reset Filter

                                                                        </button>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                        <div class="card-body">
                                            <div *ngIf="filterApplied">
                                                <h3>
                                                    <span class="nowrap"><strong>Filter Applied: </strong> </span>
                                                    <span class="nowrap" *ngFor="let menu of arr">{{ menu }}, </span>
                                                    <span class="nowrap">  <button mat-raised-button
                                                                                   class="btn btn-danger"
                                                                                   type="button"
                                                                                   (click)="clearFilter()"
                                                                                   style="float:right;
                                                     width: inherit">
                                                    Clear Filter

                                                </button></span>
                                                    <br><br>
                                                </h3>

                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">create</i>
                                                            </div>
                                                            <p class="card-category">Total Diamond Mark
                                                                Applications</p>
                                                            <ng-template #dMarkTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="dMarksRetrievedData; else dMarkTotals">
                                                                <h3 class="card-title">{{dMarksRetrieved}}</h3>
                                                            </div>


                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">create</i> All Diamond
                                                                Mark
                                                                Applications Received
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">payments</i>
                                                            </div>
                                                            <p class="card-category">Total Amount Paid For Diamond
                                                                Marks</p>
                                                            <ng-template #dMarkAmountTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="dMarksRetrievedData; else dMarkAmountTotals">
                                                                <h3 class="card-title">
                                                                    Ksh {{sumDMarkAmountPermit| number: '1.2-2'}}</h3>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">payments</i> All Diamond
                                                                Mark
                                                                Payments Made
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="material-datatables">
                                                <div class="table-responsive">
                                                    <ng-template #loading class="loaderHolder">
                                                        <ngx-spinner type="ball-clip-rotate-multiple" size="medium">
                                                            <p class="loading">Loading...</p>
                                                        </ngx-spinner>
                                                    </ng-template>
                                                    <div *ngIf="displayUsers; else loading">
                                                        <table class="table table-striped table-bordered table-hover"
                                                               datatable
                                                               [dtOptions]="dtOptions" [dtTrigger]="dtTrigger1">
                                                            <thead>
                                                            <tr>
                                                                <th><strong>Application Date</strong></th>
                                                                <th><strong>Firm Name</strong></th>
                                                                <th><strong>Physical Location</strong></th>
                                                                <th><strong>Telephone no.</strong></th>
                                                                <th><strong>Email</strong></th>
                                                                <th><strong>Region</strong></th>
                                                                <th><strong>Section</strong></th>
                                                                <th><strong>Product</strong></th>
                                                                <th><strong>Brand</strong></th>
                                                                <th><strong>Standard</strong></th>
                                                                <th><strong>Amount Paid</strong></th>

                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr *ngFor="let allPermitDat of allDMarkPermitData let i= index; ">
                                                                <td>{{formatFormDate(allPermitDat.createdOn)}}</td>
                                                                <td>{{allPermitDat.firmName}}</td>
                                                                <td>{{allPermitDat.physicalAddress}}</td>
                                                                <td>{{allPermitDat.telephoneNo}}</td>
                                                                <td>{{allPermitDat.email}}</td>
                                                                <td>{{allPermitDat.region}}</td>
                                                                <td>{{allPermitDat.sectionValue}}</td>
                                                                <td>{{allPermitDat.productName}}</td>
                                                                <td>{{allPermitDat.tradeMark}}</td>
                                                                <td>{{allPermitDat.standardTitle}}</td>
                                                                <td>{{allPermitDat.invoiceAmount}}</td>


                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- end content-->
                                    </div>
                                    <!--  end card  -->
                                </div>
                                <!-- end col-md-12 -->
                            </div>

                        </div>
                        <div class="tab-pane" id="link2">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header card-header-primary card-header-icon">
                                            <div class="card-icon">
                                                <i class="material-icons">done_outline</i>
                                            </div>
                                            <h4 class="card-title">Standardization Mark: All Applications
                                                Received</h4>
                                        </div>
                                        <div class="card-body">
                                            <div id="accordionB" role="tablist">
                                                <div class="card-collapse">
                                                    <div class="card-header" role="tab" id="headingThreeB">
                                                        <h5 class="mb-0">
                                                            <a class="collapsed" data-toggle="collapse"
                                                               href="#collapseThreeB" aria-expanded="false"
                                                               aria-controls="collapseThreeB">
                                                                Standardization Mark: Apply Filter
                                                                <i class="material-icons">keyboard_arrow_down</i>
                                                            </a>
                                                        </h5>
                                                    </div>
                                                    <div id="collapseThreeB" class="collapse" role="tabpanel"
                                                         aria-labelledby="headingThreeB" data-parent="#accordionB">
                                                        <div class="card-body">
                                                            <div class="row">
                                                                <div class="container text-center">
                                                                    <form #formDirective="ngForm"
                                                                          (ngSubmit)="applyFilterSmark(formDirective)"
                                                                          [formGroup]="filterFormGroupSMark"
                                                                          class="form">

                                                                        <div class="row">
                                                                            <!--Custom Filters -->
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Region:</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="regionId"
                                                                                                formControlName="regionId"
                                                                                                placeholder="By Region">
                                                                                        <mat-option
                                                                                                *ngFor="let region of regions"
                                                                                                value="{{region.id}}">{{region.region}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Section</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="sectionId"
                                                                                                formControlName="sectionId"
                                                                                                placeholder="By Section">
                                                                                        <mat-option
                                                                                                *ngFor="let section of sections"
                                                                                                value="{{section.id}}">{{section.section}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Statuses</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="statusId"
                                                                                                formControlName="statusId"
                                                                                                placeholder="By Statuses">
                                                                                        <mat-option
                                                                                                *ngFor="let status of statuses"
                                                                                                value="{{status.id}}">{{status.processStatusName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Allocated
                                                                                        Officer</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="officerId"
                                                                                                formControlName="officerId"
                                                                                                placeholder="By Allocated Officer">
                                                                                        <mat-option
                                                                                                *ngFor="let officer of users"
                                                                                                value="{{officer.id}}">{{officer.firstName}} {{officer.lastName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label class="form-label"><b>By
                                                                                        Category:</b></label>

                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="category"
                                                                                                formControlName="category"
                                                                                                placeholder="By category">
                                                                                        <mat-option value="Large">Large
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Medium">
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Small">Small
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>

                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Application Range
                                                                                        Date:</b></label>
                                                                                    <mat-form-field appearance="fill">
                                                                                        <mat-label>Enter a date range
                                                                                        </mat-label>
                                                                                        <mat-date-range-input

                                                                                                [max]="today"
                                                                                                [rangePicker]="picker1">
                                                                                            <input matStartDate
                                                                                                   #dateRangeStartSMark
                                                                                                   placeholder="Start date"

                                                                                            >
                                                                                            <input matEndDate
                                                                                                   #dateRangeEndSMark
                                                                                                   placeholder="End date"
                                                                                                   (dateChange)="dateRangeChangeSMark(dateRangeStartSMark, dateRangeEndSMark)"

                                                                                            >
                                                                                        </mat-date-range-input>
                                                                                        <mat-hint>MM/DD/YYYY â€“
                                                                                            MM/DD/YYYY
                                                                                        </mat-hint>
                                                                                        <mat-datepicker-toggle matSuffix
                                                                                                               [for]="picker1"></mat-datepicker-toggle>
                                                                                        <mat-date-range-picker
                                                                                            #picker1></mat-date-range-picker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <div class="form-group">
                                                                                    <label><strong> By Product
                                                                                        Description:</strong></label>
                                                                                    <mat-form-field
                                                                                            class="example-full-width">

                                                                                        <input type="text"
                                                                                               matInput
                                                                                               id="productDescriptionB"
                                                                                               formControlName="productDescription"
                                                                                               placeholder="Enter Product Description">
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <input type="hidden"

                                                                                   id="permitTypeB"
                                                                                   formControlName="permitType"
                                                                                   ngModel="{{sMarkID}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="startB"
                                                                                   formControlName="commenceDate"
                                                                                   ngModel="{{startDateSMark}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="endB"
                                                                                   formControlName="lastDate"
                                                                                   ngModel="{{endDateSMark}}"
                                                                            >
                                                                        </div>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                style="width: inherit" type="submit">
                                                                            Filter
                                                                            results
                                                                        </button>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                type="button"
                                                                                (click)="resetFormSMark()"
                                                                                style="float:right;
                                                                                width: inherit">
                                                                            Reset Filter

                                                                        </button>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body">
                                            <div *ngIf="filterAppliedSMark">
                                                <h3>
                                                    <span class="nowrap"><strong>Filter Applied: </strong> </span>
                                                    <span class="nowrap" *ngFor="let menu of arrSMark">{{ menu }}
                                                        , </span>
                                                    <span class="nowrap">  <button mat-raised-button
                                                                                   class="btn btn-danger"
                                                                                   type="button"
                                                                                   (click)="clearFilterSMark()"
                                                                                   style="float:right;
                                                     width: inherit">
                                                    Clear Filter

                                                </button></span>
                                                    <br><br>
                                                </h3>

                                            </div>

                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">create</i>
                                                            </div>
                                                            <p class="card-category">Total Standardization Mark
                                                                Applications</p>
                                                            <ng-template #sMarkTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="sMarksRetrievedData; else sMarkTotals">
                                                                <h3 class="card-title">{{sMarksRetrieved}}</h3>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">create</i> All
                                                                Standardization
                                                                Mark Applications Received
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">payments</i>
                                                            </div>
                                                            <p class="card-category">Total Amount Paid For
                                                                Standardization Marks</p>
                                                            <ng-template #sMarkAmountTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="sMarksRetrievedData; else sMarkAmountTotals">
                                                                <h3 class="card-title">
                                                                    Ksh {{sumSMarkAmountPermit| number: '1.2-2'}}</h3>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">payments</i> All
                                                                Standardization Mark Payments Made
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="material-datatables">
                                                <div class="table-responsive">
                                                    <ng-template #loading class="loaderHolder">
                                                        <ngx-spinner type="ball-clip-rotate-multiple" size="medium">
                                                            <p class="loading">Loading...</p>
                                                        </ngx-spinner>
                                                    </ng-template>
                                                    <div *ngIf="displayUsers; else loading">
                                                        <table class="table table-striped table-bordered table-hover"
                                                               datatable
                                                               [dtOptions]="dtOptions" [dtTrigger]="dtTrigger2">
                                                            <thead>
                                                            <tr>
                                                                <th><strong>Application Date</strong></th>
                                                                <th><strong>Firm Name</strong></th>
                                                                <th><strong>Physical Location</strong></th>
                                                                <th><strong>Telephone no.</strong></th>
                                                                <th><strong>Email</strong></th>
                                                                <th><strong>Region</strong></th>
                                                                <th><strong>Section</strong></th>
                                                                <th><strong>Product</strong></th>
                                                                <th><strong>Brand</strong></th>
                                                                <th><strong>Standard</strong></th>
                                                                <th><strong>Amount Paid</strong></th>

                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr *ngFor="let allPermitDat of allSMarkPermitData let i= index; ">
                                                                <td>{{formatFormDate(allPermitDat.createdOn)}}</td>
                                                                <td>{{allPermitDat.firmName}}</td>
                                                                <td>{{allPermitDat.physicalAddress}}</td>
                                                                <td>{{allPermitDat.telephoneNo}}</td>
                                                                <td>{{allPermitDat.email}}</td>
                                                                <td>{{allPermitDat.region}}</td>
                                                                <td>{{allPermitDat.sectionValue}}</td>
                                                                <td>{{allPermitDat.productName}}</td>
                                                                <td>{{allPermitDat.tradeMark}}</td>
                                                                <td>{{allPermitDat.standardTitle}}</td>
                                                                <td>{{allPermitDat.invoiceAmount}}</td>


                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- end content-->
                                    </div>
                                    <!--  end card  -->
                                </div>
                                <!-- end col-md-12 -->
                            </div>

                        </div>
                        <div class="tab-pane" id="link3">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header card-header-primary card-header-icon">
                                            <div class="card-icon">
                                                <i class="material-icons">rowing</i>
                                            </div>
                                            <h4 class="card-title">Fortification Mark: All Applications
                                                Received</h4>
                                        </div>
                                        <div class="card-body">
                                            <div id="accordionC" role="tablist">
                                                <div class="card-collapse">
                                                    <div class="card-header" role="tab" id="headingThreeC">
                                                        <h5 class="mb-0">
                                                            <a class="collapsed" data-toggle="collapse"
                                                               href="#collapseThreeC" aria-expanded="false"
                                                               aria-controls="collapseThreeC">
                                                                Fortification Mark: Apply Filter
                                                                <i class="material-icons">keyboard_arrow_down</i>
                                                            </a>
                                                        </h5>
                                                    </div>
                                                    <div id="collapseThreeC" class="collapse" role="tabpanel"
                                                         aria-labelledby="headingThreeC" data-parent="#accordionC">
                                                        <div class="card-body">
                                                            <div class="row">
                                                                <div class="container text-center">
                                                                    <form #formDirective="ngForm"
                                                                          (ngSubmit)="applyFilterFmark(formDirective)"
                                                                          [formGroup]="filterFormGroupFMark"
                                                                          class="form">

                                                                        <div class="row">
                                                                            <!--Custom Filters -->
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Region:</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="regionId"
                                                                                                formControlName="regionId"
                                                                                                placeholder="By Region">
                                                                                        <mat-option
                                                                                                *ngFor="let region of regions"
                                                                                                value="{{region.id}}">{{region.region}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Section</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="sectionId"
                                                                                                formControlName="sectionId"
                                                                                                placeholder="By Section">
                                                                                        <mat-option
                                                                                                *ngFor="let section of sections"
                                                                                                value="{{section.id}}">{{section.section}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Statuses</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="statusId"
                                                                                                formControlName="statusId"
                                                                                                placeholder="By Statuses">
                                                                                        <mat-option
                                                                                                *ngFor="let status of statuses"
                                                                                                value="{{status.id}}">{{status.processStatusName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Allocated
                                                                                        Officer</b></label>
                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="officerId"
                                                                                                formControlName="officerId"
                                                                                                placeholder="By Allocated Officer">
                                                                                        <mat-option
                                                                                                *ngFor="let officer of users"
                                                                                                value="{{officer.id}}">{{officer.firstName}} {{officer.lastName}}</mat-option>
                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label class="form-label"><b>By
                                                                                        Category:</b></label>

                                                                                    <mat-select aria-label="Small"
                                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                                class="form-control"
                                                                                                name="category"
                                                                                                formControlName="category"
                                                                                                placeholder="By category">
                                                                                        <mat-option value="Large">Large
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Medium">
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>
                                                                                        <mat-option value="Small">Small
                                                                                            Medium
                                                                                            Enterprise
                                                                                        </mat-option>

                                                                                    </mat-select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-3">
                                                                                <div class="form-group">
                                                                                    <label><b>By Application Range
                                                                                        Date:</b></label>
                                                                                    <mat-form-field appearance="fill">
                                                                                        <mat-label>Enter a date range
                                                                                        </mat-label>
                                                                                        <mat-date-range-input

                                                                                                [max]="today"
                                                                                                [rangePicker]="picker2">
                                                                                            <input matStartDate
                                                                                                   #dateRangeStartFMark
                                                                                                   placeholder="Start date"

                                                                                            >
                                                                                            <input matEndDate
                                                                                                   #dateRangeEndFMark
                                                                                                   placeholder="End date"
                                                                                                   (dateChange)="dateRangeChangeFMark(dateRangeStartFMark, dateRangeEndFMark)"

                                                                                            >
                                                                                        </mat-date-range-input>
                                                                                        <mat-hint>MM/DD/YYYY â€“
                                                                                            MM/DD/YYYY
                                                                                        </mat-hint>
                                                                                        <mat-datepicker-toggle matSuffix
                                                                                                               [for]="picker2"></mat-datepicker-toggle>
                                                                                        <mat-date-range-picker
                                                                                            #picker2></mat-date-range-picker>
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <div class="form-group">
                                                                                    <label><strong> By Product
                                                                                        Description:</strong></label>
                                                                                    <mat-form-field
                                                                                            class="example-full-width">

                                                                                        <input type="text"
                                                                                               matInput
                                                                                               id="productDescriptionC"
                                                                                               formControlName="productDescription"
                                                                                               placeholder="Enter Product Description">
                                                                                    </mat-form-field>
                                                                                </div>
                                                                            </div>
                                                                            <input type="hidden"

                                                                                   id="permitTypeC"
                                                                                   formControlName="permitType"
                                                                                   ngModel="{{fMarkID}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="startC"
                                                                                   formControlName="commenceDate"
                                                                                   ngModel="{{startDateFMark}}"
                                                                            >
                                                                            <input type="hidden"
                                                                                   id="endC"
                                                                                   formControlName="lastDate"
                                                                                   ngModel="{{endDateFMark}}"
                                                                            >
                                                                        </div>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                style="width: inherit" type="submit">
                                                                            Filter
                                                                            results
                                                                        </button>
                                                                        <button mat-raised-button
                                                                                class="btn btn-secondary btn-lg"
                                                                                type="button"
                                                                                (click)="resetFormFMark()"
                                                                                style="float:right;
                                                                                width: inherit">
                                                                            Reset Filter

                                                                        </button>
                                                                    </form>
                                                                </div>
                                                            </div>

                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="card-body">
                                            <div *ngIf="filterAppliedFMark">
                                                <h3>
                                                    <span class="nowrap"><strong>Filter Applied: </strong> </span>
                                                    <span class="nowrap" *ngFor="let menu of arrFMark">{{ menu }}
                                                        , </span>
                                                    <span class="nowrap">  <button mat-raised-button
                                                                                   class="btn btn-danger"
                                                                                   type="button"
                                                                                   (click)="clearFilterFMark()"
                                                                                   style="float:right;
                                                     width: inherit">
                                                    Clear Filter

                                                </button></span>
                                                    <br><br>
                                                </h3>

                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">create</i>
                                                            </div>
                                                            <p class="card-category">Total Fortification Mark
                                                                Applications</p>

                                                            <ng-template #fMarkTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="fMarksRetrievedData; else fMarkTotals">
                                                                <h3 class="card-title">{{fMarksRetrieved}}</h3>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">create</i> All
                                                                Fortification
                                                                Mark Applications Received
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6 col-md-6 col-sm-6">
                                                    <div class="card card-stats">
                                                        <div class="card-header card-header-info card-header-icon">
                                                            <div class="card-icon">
                                                                <i class="material-icons">payments</i>
                                                            </div>
                                                            <p class="card-category">Total Amount Paid For
                                                                Fortification
                                                                Marks</p>
                                                            <ng-template #fMarkAmountTotals>
                                                                <h3 class="card-title"></h3>
                                                            </ng-template>
                                                            <div *ngIf="fMarksRetrievedData; else fMarkAmountTotals">
                                                                <h3 class="card-title">
                                                                    Ksh {{sumFMarkAmountPermit| number: '1.2-2'}}</h3>
                                                            </div>
                                                        </div>
                                                        <div class="card-footer">
                                                            <div class="stats">
                                                                <i class="material-icons">payments</i> All
                                                                Fortification
                                                                Mark Payments Made
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>


                                            <div class="material-datatables">
                                                <div class="table-responsive">
                                                    <ng-template #loading class="loaderHolder">
                                                        <ngx-spinner type="ball-clip-rotate-multiple" size="medium">
                                                            <p class="loading">Loading...</p>
                                                        </ngx-spinner>
                                                    </ng-template>
                                                    <div *ngIf="displayUsers; else loading">
                                                        <table class="table table-striped table-bordered table-hover"
                                                               datatable
                                                               [dtOptions]="dtOptions" [dtTrigger]="dtTrigger3">
                                                            <thead>
                                                            <tr>
                                                                <th><strong>Application Date</strong></th>
                                                                <th><strong>Firm Name</strong></th>
                                                                <th><strong>Physical Location</strong></th>
                                                                <th><strong>Telephone no.</strong></th>
                                                                <th><strong>Email</strong></th>
                                                                <th><strong>Region</strong></th>
                                                                <th><strong>Section</strong></th>
                                                                <th><strong>Product</strong></th>
                                                                <th><strong>Brand</strong></th>
                                                                <th><strong>Standard</strong></th>
                                                                <th><strong>Amount Paid</strong></th>

                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr *ngFor="let allPermitDat of allFMarkPermitData let i= index; ">
                                                                <td>{{formatFormDate(allPermitDat.createdOn)}}</td>
                                                                <td>{{allPermitDat.firmName}}</td>
                                                                <td>{{allPermitDat.physicalAddress}}</td>
                                                                <td>{{allPermitDat.telephoneNo}}</td>
                                                                <td>{{allPermitDat.email}}</td>
                                                                <td>{{allPermitDat.region}}</td>
                                                                <td>{{allPermitDat.sectionValue}}</td>
                                                                <td>{{allPermitDat.productName}}</td>
                                                                <td>{{allPermitDat.tradeMark}}</td>
                                                                <td>{{allPermitDat.standardTitle}}</td>
                                                                <td>{{allPermitDat.invoiceAmount}}</td>


                                                            </tr>
                                                            </tbody>
                                                        </table>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- end content-->
                                    </div>
                                    <!--  end card  -->
                                </div>
                                <!-- end col-md-12 -->
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- end row -->
    </div>
</div>
