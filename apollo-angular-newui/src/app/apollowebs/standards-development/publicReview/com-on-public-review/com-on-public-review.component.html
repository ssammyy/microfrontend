<div class="container-fluid" style="margin-top: 5%" id="main-container">
    <div class="loading-spinner " *ngIf="loading">
        <ngx-spinner
                bdColor="rgba(51,51,51,0.8)"
                color="#fff"
                size="medium"
                type="ball-scale-multiple">
            <p style="font-size: 20px; color: white">{{loadingText}}</p>
        </ngx-spinner>
    </div>
    <div class="main-content">
        <div class="container-fluid">

            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header card-header-primary card-header-icon">
                            <div class="card-icon">
                                <i class="material-icons">assignment</i>
                            </div>
                            <h4 class="card-title">Review Public Review Draft
                            </h4>

                        </div>
                        <div class="card-body">
                            <div class="toolbar">

                            </div>

                            <h4 class="card-title">All Public Review Drafts
                            </h4>
                            <div class="material-datatables">
                                <table class="table table-striped table-bordered table-hover"
                                       datatable
                                       [dtOptions]="dtOptions" [dtTrigger]="dtTrigger1">
                                    <thead>
                                    <tr>
                                        <th class="id">Public Review Draft ID</th>
                                        <th class="task">Public Review Draft Name</th>
                                        <th class="action">View</th>
                                        <th class="action">Action</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr *ngFor="let publicReviewDraft of publicReviewDrafts let i= index; ">
                                        <td>{{i + 1}}</td>
                                        <td>{{publicReviewDraft.prd_name}}</td>
                                        <td>
                                            <a (click)="onOpenModal(publicReviewDraft,'viewCd')"
                                               class="btn btn-info tooltips"
                                               data-placement="top"
                                               data-original-title="viewCd">View
                                                Prd</a>
                                        </td>

                                        <td>
                                            <a (click)="onOpenModal(publicReviewDraft,'makeComment')"
                                               class="btn btn-info tooltips"
                                               data-placement="top"
                                               data-original-title="Make Comment">Add
                                                Comment</a>
                                            <br>

                                        </td>


                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="modal fade" id="makeComment" tabindex="-1"
                                 role="dialog" aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-xl" role="document"
                                     style="width: 100%;">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">
                                                Comment On Preliminary Draft
                                            </h5>
                                            <button type="button" class="close"
                                                    data-dismiss="modal" aria-label="Close"
                                                    #closeModal>
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row col-12">
                                                <div class="form-group col-12">
                                                    <form class="form"
                                                          (ngSubmit)="onClickSaveCommentsMade(publicReviewDraftsB.id)"
                                                          [formGroup]="commentsMadeFormGroup"
                                                          enctype="multipart/form-data">
                                                        <div class="form-body">
                                                            <div class="row col-12">
                                                                <label><b>Title</b></label>
                                                                <input aria-describedby="inputGroup-sizing-sm"
                                                                       aria-label="Small"
                                                                       class="form-control one-column-input"
                                                                       readonly
                                                                       value="{{publicReviewDraftsB?.proposal_TITLE}}"/>
                                                            </div>
                                                            <div class="row col-12">
                                                                <label><b>Document Type</b></label>
                                                                <input aria-describedby="inputGroup-sizing-sm"
                                                                       aria-label="Small"
                                                                       class="form-control one-column-input"
                                                                       readonly
                                                                       value="{{documentType}}"/>
                                                            </div>

                                                            <div class="row col-12">
                                                                <label><b>Circulation
                                                                    Date</b></label>
                                                                <input aria-describedby="inputGroup-sizing-sm"
                                                                       aria-label="Small"
                                                                       class="form-control one-column-input"
                                                                       readonly
                                                                       value="{{publicReviewDraftsB?.circulation_DATE}}"
                                                                />
                                                            </div>
                                                            <div class="row col-12">
                                                                <label><b>Closing
                                                                    Date</b></label>
                                                                <input aria-describedby="inputGroup-sizing-sm"
                                                                       aria-label="Small"
                                                                       class="form-control one-column-input"
                                                                       readonly
                                                                       value="{{publicReviewDraftsB?.closing_DATE}}"/>
                                                            </div>

                                                            <div class="row col-12">
                                                                <label><b>Organization </b></label>
                                                                <input aria-describedby="inputGroup-sizing-sm"
                                                                       aria-label="Small"
                                                                       class="form-control one-column-input"
                                                                />
                                                            </div>

                                                            <br/>
                                                            <br/>
                                                            <br/>
                                                            <br/>

                                                            <h4><b>COMMENTS</b></h4>
                                                            <div class="row">
                                                                <div class="col-12">
                                                                    <label><b>Clause</b></label>
                                                                    <mat-form-field
                                                                            class="example-full-width">
                                                                        <input name="clause"
                                                                               formControlName="clause"
                                                                               matInput
                                                                               placeholder="Clause"
                                                                               type="text"/>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-12">
                                                                    <label><b>Paragraph/
                                                                        Figure/Table</b></label>
                                                                    <mat-form-field
                                                                            class="example-full-width">
                                                                        <input name="paragraph"
                                                                               formControlName="paragraph"
                                                                               matInput
                                                                               placeholder="Paragraph/ Figure/Table"
                                                                               type="text"/>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-12">
                                                                    <label><b>Type of
                                                                        comment </b></label>
                                                                    <mat-form-field>
                                                                        <mat-select
                                                                                aria-label="Small"
                                                                                aria-describedby="inputGroup-sizing-lg"
                                                                                class="form-control"
                                                                                required
                                                                                formControlName="typeOfComment"
                                                                                name="typeOfComment"
                                                                                placeholder="Select Type Of Comment">
                                                                            <mat-option
                                                                                    *ngFor="let lvs of levelOfStandards"
                                                                                    value="{{lvs}}">{{lvs}}</mat-option>
                                                                        </mat-select>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="col-12">
                                                                    <label><b>Comment </b></label>
                                                                    <mat-form-field
                                                                            class="example-full-width">
                                                                                                        <textarea
                                                                                                                rows="5"
                                                                                                                cols="50"
                                                                                                                name="comment"
                                                                                                                formControlName="comment"
                                                                                                                matInput
                                                                                                                placeholder="Comment"
                                                                                                                type="text"></textarea>
                                                                    </mat-form-field>
                                                                </div>

                                                                <div class="col-12">
                                                                    <label><b>Proposed
                                                                        Change</b></label>
                                                                    <mat-form-field
                                                                            class="example-full-width">
                                                                                                        <textarea
                                                                                                                rows="5"
                                                                                                                cols="50"
                                                                                                                name="proposedChange"
                                                                                                                formControlName="proposedChange"
                                                                                                                matInput
                                                                                                                placeholder="Proposed Change"
                                                                                                                type="text"
                                                                                                        ></textarea>
                                                                    </mat-form-field>
                                                                </div>
                                                                <div class="row col-12">
                                                                    <label><b>Name</b></label>
                                                                    <input type="hidden" name="commentId" formControlName="commentId" value="{{publicReviewDraftsB?.commentId}}" >
                                                                    <input aria-describedby="inputGroup-sizing-sm"
                                                                           aria-label="Small"
                                                                           class="form-control one-column-input"
                                                                           name="nameOfRespondent"
                                                                           formControlName="nameOfRespondent"

                                                                           />
                                                                </div>
                                                                <div class="row col-12">
                                                                    <label><b>Email</b></label>
                                                                    <input aria-describedby="inputGroup-sizing-sm"
                                                                           aria-label="Small"
                                                                           class="form-control one-column-input"
                                                                           name="emailOfRespondent"
                                                                           formControlName="emailOfRespondent"

                                                                           />
                                                                </div>
                                                                <div class="row col-12">
                                                                    <label><b>Telephone</b></label>
                                                                    <input aria-describedby="inputGroup-sizing-sm"
                                                                           aria-label="Small"
                                                                           class="form-control one-column-input"
                                                                           name="phoneOfRespondent"
                                                                           formControlName="phoneOfRespondent"

                                                                           />
                                                                </div>

                                                                <div class="col-12">
                                                                    <!--                                                                    <button class="btn btn-success float-right"-->
                                                                    <!--                                                                            (click)="onClickAddComment()"-->
                                                                    <!--                                                                            type="button"-->
                                                                    <!--                                                                            style="position:absolute;bottom:25px;right:5px;margin:15px;">-->
                                                                    <!--                                                                        ADD-->
                                                                    <!--                                                                    </button>-->
                                                                </div>
                                                            </div>
                                                            <!--                                                            <div class="material-datatables">-->
                                                            <!--                                                                <div class="table-responsive">-->
                                                            <!--                                                                    <table class="table table-striped table-bordered table-hover">-->
                                                            <!--                                                                        <thead>-->
                                                            <!--                                                                        <tr>-->
                                                            <!--                                                                            <th>Clause-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                            <th>-->
                                                            <!--                                                                                Paragraph/-->
                                                            <!--                                                                                Figure/Table-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                            <th>Type of-->
                                                            <!--                                                                                comment-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                            <th>-->
                                                            <!--                                                                                Comment-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                            <th>Proposed-->
                                                            <!--                                                                                Change-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                            <th>Action-->
                                                            <!--                                                                            </th>-->
                                                            <!--                                                                        </tr>-->
                                                            <!--                                                                        </thead>-->
                                                            <!--                                                                        <tbody>-->
                                                            <!--                                                                        <tr *ngFor="let r of commentsDtos; let i=index">-->
                                                            <!--                                                                            <td>{{r.clause}}</td>-->
                                                            <!--                                                                            <td>{{r.paragraph}}</td>-->
                                                            <!--                                                                            <td>{{r.typeOfComment}}</td>-->
                                                            <!--                                                                            <td>{{r.comment}}</td>-->
                                                            <!--                                                                            <td>{{r.proposedChange}}</td>-->

                                                            <!--                                                                            <td>-->
                                                            <!--                                                                                <button (click)="removeProductLabelling(i)"-->
                                                            <!--                                                                                        type="button"-->
                                                            <!--                                                                                        class="btn btn-warning btn-sm">-->
                                                            <!--                                                                                                                    <span class=""-->
                                                            <!--                                                                                                                          aria-hidden="true">Remove</span>-->
                                                            <!--                                                                                </button>-->
                                                            <!--                                                                            </td>-->
                                                            <!--                                                                        </tr>-->
                                                            <!--                                                                        </tbody>-->
                                                            <!--                                                                    </table>-->
                                                            <!--                                                                </div>-->
                                                            <!--                                                            </div>-->
                                                            <div
                                                                    class="form-group clearfix">
                                                                <button class="btn btn-sm btn-primary float-right"
                                                                        type="submit">
                                                                    Save
                                                                </button>


                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                    #closeModal (click)="hideModel()"
                                                    data-dismiss="modal">Close
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal fade" id="viewCd" tabindex="-1"
                                 role="dialog" aria-hidden="true">
                                <div class="modal-dialog modal-lg modal-xl" role="document"
                                     style="width: 100%;">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title">
                                                Public Review Draft Details
                                            </h5>
                                            <button type="button" class="close"
                                                    data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row col-12">
                                                <div class="form-group col-12">


                                                    <ul class="list-group">
                                                        <li class="list-group-item active">
                                                            Public Review Draft Details
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">{{"Public Review Draft Name: " + publicReviewDraftsB?.prd_name}}</li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">{{"Prepared By: " + publicReviewDraftsB?.prd_by}}</li>

                                                    </ul>

                                                    <div class="material-datatables">
                                                        <ng-template #loadingDocsTable
                                                                     class="loaderHolder">
                                                            <ngx-spinner name="loader2"
                                                                         type="ball-clip-rotate-multiple"
                                                                         size="medium">
                                                                <p class="loading">
                                                                    Loading...</p>
                                                            </ngx-spinner>
                                                        </ng-template>
                                                        <div *ngIf="displayUsers; else loadingDocsTable">
                                                            <table class="table table-striped table-bordered table-hover">
                                                                <thead>
                                                                <tr>
                                                                    <th class="task">
                                                                        Document Name
                                                                    </th>
                                                                    <th class="task">
                                                                        Description
                                                                    </th>

                                                                    <th class="task">
                                                                        Action
                                                                    </th>

                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr *ngFor="let doc of standardDocuments let i= index; ">

                                                                    <td>{{doc.name}}</td>
                                                                    <td>{{doc.description}}</td>

                                                                    <td>
                                                                        <button class="btn btn-info tooltips"
                                                                                style="width: inherit"
                                                                                (click)="viewPdfFile( doc.id,doc?.name, doc.documentType)"
                                                                                data-placement="top"
                                                                        ><i
                                                                                class="fa fa-eye"></i>
                                                                            View
                                                                        </button>
                                                                    </td>

                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                    #closeModal (click)="hideModel()"
                                                    data-dismiss="modal">Close
                                            </button>

                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>




        </div>

    </div>
</div>

