<div class="container-fluid" style="margin-top: 5%" id="main-container">
    <div *ngIf="loading">
        <div class="loading-spinner ">
            <ngx-spinner
                    bdColor="rgba(51,51,51,0.8)"
                    size="medium"
                    color="#fff"
                    type="ball-scale-multiple"
            >
                <p style="font-size: 20px; color: white">{{loadingText}}</p>
            </ngx-spinner>
        </div>
    </div>

    <div class="main-content">
        <div class="container-fluid">
            <div class="example-stretched-tabs mat-elevation-z4">

                <ul class=" tabs-container nav nav-pills nav-pills-rose nav-pills-icons justify-content-center "
                    style=" border-bottom: 1px solid #ccc;"
                    role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" data-toggle="tab" id="new-proposals"
                           (click)="tabChange('New Proposals')" role="tablist">
                            <i class="material-icons"></i> New Proposals
                            <span class="badge badge-primary"
                                  style="position: absolute; top: 0; right: 0;">{{tasks.length}}</span>
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" id="approved-proposals"
                           (click)="tabChange('Approved Proposals')" role="tablist">
                            <i class="material-icons"></i>Approved Proposals
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" id="rejected-proposals"
                           (click)="tabChange('Rejected Proposals')" role="tablist">
                            <i class="material-icons"></i>Declined Proposals By Hof
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" data-toggle="tab" id="rejected-proposals-spc"
                           (click)="tabChange('Rejected Proposals SPC')" role="tablist">
                            <i class="material-icons"></i>Declined Proposals By SPC
                        </a>
                    </li>


                </ul>

                <div *ngIf="id == 'New Proposals'" class="w-100">
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header card-header-primary card-header-icon">
                                    <div class="card-icon">
                                        <i class="material-icons">assignment</i>
                                    </div>
                                    <h4 class="card-title">Request For Formation Of Technical Committee
                                    </h4>
                                    <div *ngIf="roles?.includes('TC_SEC_SD_READ') || roles?.includes( 'TC_SEC_SD_READ')">

                                        <div (click)="openModal()">
                                            <div style="float: right; margin: inherit" class="card-icon">
                                                <i class="material-icons">add</i>
                                            </div>
                                            <div>
                                                <h4 style="float: right; margin-right: 12px" class="card-title">New
                                                    Proposal</h4>
                                            </div>

                                        </div>
                                    </div>

                                </div>
                                <div class="card-body">
                                    <div class="material-datatables">
                                        <table class="table table-striped table-bordered table-hover" datatable
                                               [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
                                            <thead>
                                            <tr>
                                                <th>Reference Number</th>
                                                <th>Purpose</th>
                                                <th>TC Name</th>
                                                <th>Status</th>
                                                <th>Action</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr *ngFor="let secTask of tasks let i= index; ">
                                                <td>{{secTask.referenceNumber}}</td>
                                                <td>{{secTask.purpose}}</td>
                                                <td>{{secTask.nameOfTC}}</td>
                                                <td>
                                                    <div *ngIf="secTask.status=='1'; then thenBlock else elseBlock"></div>
                                                    <ng-template #thenBlock>
                                                        <span style=" font-size: 10px;"
                                                              class="badge badge-info">Awaiting Decision By HOF</span>
                                                    </ng-template>
                                                    <ng-template #elseBlock>
                                                      <span style="font-size: 10px;"
                                                            class="badge badge-info">Decision Made</span>
                                                    </ng-template>
                                                </td>
                                                <td>
                                                    <a (click)="openModalToView(secTask)"
                                                       class="btn btn-info tooltips"
                                                       data-placement="top"
                                                       data-original-title="Review"> View More</a>
                                                </td>

                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div *ngIf="id == 'Approved Proposals'" class="w-100">
                    <app-approved-proposals></app-approved-proposals>
                </div>
                <div *ngIf="id == 'Rejected Proposals'" class="w-100">
                    <app-rejected-proposals></app-rejected-proposals>
                </div>
                <div *ngIf="id == 'Rejected Proposals SPC'" class="w-100">
                    <app-rejected-by-spc></app-rejected-by-spc>
                </div>

                <div class="modal fade" id="requestModal" tabindex="-1" role="dialog"
                     aria-labelledby="updateExampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="updateExampleModalLabel">Proposal for formation of TC</h5>
                                <button type="button" class="close" #closeModal data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <form #formDirective="ngForm" (ngSubmit)="uploadProposalForTC(formDirective)"
                                      [formGroup]="formationRequestFormGroup">
                                    <div class="form-body">
                                        <div class="row">
                                            <div class="form-group col-12">

                                                <label><b>Proposed Name of TC</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(formationRequestFormGroup, 'nameOfTC')">
                                                    <input type="text"
                                                           matInput
                                                           id="nameOfTC"
                                                           placeholder="Name Of Technical Committee *"
                                                           (ngModelChange)="textValidationType($event)"
                                                           formControlName="nameOfTC">
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(formationRequestFormGroup, 'nameOfTC')"
                                                            errorMsg="Please Enter Name Of Technical Committee">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">


                                            <div class="form-group col-12">

                                                <label><b>Scope</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(formationRequestFormGroup, 'scope')">
                                                    <input type="text"
                                                           matInput
                                                           id="scope"
                                                           placeholder="Scope *"
                                                           (ngModelChange)="textValidationType($event)"
                                                           formControlName="scope">
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(formationRequestFormGroup, 'scope')"
                                                            errorMsg="Please Enter Scope">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Purpose and Justification</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(formationRequestFormGroup, 'purpose')">
                                    <textarea
                                            matInput
                                            aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                            class="form-control one-column-input" formControlName="purpose"
                                            placeholder="Purpose and Justification *" type="text"></textarea>
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(formationRequestFormGroup, 'purpose')"
                                                            errorMsg="Please Enter Purpose">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Department</b></label>
                                                <mat-form-field>

                                                    <mat-select aria-label="Small"
                                                                aria-describedby="inputGroup-sizing-lg"
                                                                class="form-control" required
                                                                formControlName="departmentId"
                                                                name="departmentId"
                                                                placeholder="Select Department"
                                                                [class.is-invalid]="formFormationRequest.departmentId.invalid && formFormationRequest.departmentId.touched">
                                                        <mat-option *ngFor="let department of departments"
                                                                    value="{{department.id}}">{{department.name}}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Proposed TC Representation</b></label>
                                                <mat-form-field>
                                                    <mat-label>Select at least three Tc Representations</mat-label>
                                                    <mat-select id="options" aria-label="Small"
                                                                aria-describedby="inputGroup-sizing-lg"
                                                                class="form-control" required

                                                                [class.is-invalid]="formFormationRequest.proposedRepresentationArray.invalid && formFormationRequest.proposedRepresentationArray.touched"
                                                                formControlName="proposedRepresentationArray" multiple>
                                                        <mat-option *ngFor="let option of options"
                                                                    [value]="option.value">{{ option.label }}</mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                                <div *ngIf="formationRequestFormGroup.get('proposedRepresentationArray').invalid && (formationRequestFormGroup.get('proposedRepresentationArray').dirty || formationRequestFormGroup.get('proposedRepresentationArray').touched)">
                                                    <div *ngIf="formationRequestFormGroup.get('proposedRepresentationArray').errors.required">
                                                        Please select at least one option.
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">

                                                <div id="form-fields">
                                                    <ng-container *ngFor="let field of formFields">
                                                        <label for="{{field.id}}"><b>{{field.label}}</b><small> (Add
                                                            multiple by
                                                            separating with comma.)</small></label>
                                                        <mat-form-field class="example-full-width has-label">
                                        <textarea
                                                matInput
                                                id="{{field.id}}"
                                                aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                                class="form-control one-column-input" required
                                                name="{{field.id}}" [formControl]="field.control"
                                                type="text"></textarea>
                                                        </mat-form-field>
                                                    </ng-container>
                                                </div>
                                            </div>
                                        </div>


                                        <!--                            <div class="row">-->
                                        <!--                                <div class="form-group col-12">-->
                                        <!--                                    <label><b>Organizations</b><small> (Add multiple by separating with-->
                                        <!--                                        comma. Minimum 6)</small></label>-->
                                        <!--                                    <mat-form-field class="example-full-width has-label"-->
                                        <!--                                                    [ngClass]="displayFieldCss(formationRequestFormGroup, 'organization')">-->
                                        <!--                                        <textarea-->
                                        <!--                                                matInput-->
                                        <!--                                                aria-describedby="inputGroup-sizing-sm" aria-label="Small"-->
                                        <!--                                                class="form-control one-column-input"-->
                                        <!--                                                formControlName="organization"-->
                                        <!--                                                placeholder="Organizations" type="text"></textarea>-->
                                        <!--                                        <mat-error-->
                                        <!--                                                *ngIf="formationRequestFormGroup.get('organization').hasError('required')">-->
                                        <!--                                            At least 6 items are required-->
                                        <!--                                        </mat-error>-->
                                        <!--                                        <mat-error-->
                                        <!--                                                *ngIf="formationRequestFormGroup.get('organization').hasError('pattern')">-->
                                        <!--                                            Please enter at least 6 items separated by commas-->
                                        <!--                                        </mat-error>-->

                                        <!--                                    </mat-form-field>-->
                                        <!--                                </div>-->
                                        <!--                            </div>-->
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>ISO/IEE/IEC mirror committee</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(formationRequestFormGroup, 'isoCommittee')">
                                        <textarea
                                                matInput
                                                aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                                class="form-control one-column-input"
                                                formControlName="isoCommittee"
                                                placeholder="ISO/IEE/IEC Mirror Committee" type="text"></textarea>

                                                </mat-form-field>
                                            </div>

                                            <input type="hidden" formControlName="proposedRepresentation">


                                        </div>
                                        <button class="btn btn-info" type="submit">
                                            Submit
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="editModal" tabindex="-1" role="dialog"
                     aria-labelledby="updateExampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="editExampleModalLabel">Proposal for formation of TC</h5>
                                <button type="button" class="close" #closeModalB data-dismiss="modal"
                                        aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <form #formDirectiveB="ngForm" (ngSubmit)="editProposalForTC(formDirectiveB)"
                                      [formGroup]="editFormationRequestFormGroup">
                                    <div class="form-body">
                                        <div class="row">

                                            <div class="form-group col-12">

                                                <label><b>Date of Application</b></label>
                                                <input
                                                        aria-describedby="inputGroup-sizing-sm"
                                                        aria-label="Small"
                                                        class="form-control one-column-input" readonly
                                                        formControlName="dateOfPresentation"
                                                        ngModel="{{this.proposalRetrieved?.dateOfPresentation}}"
                                                        type="text">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Proposer</b></label>
                                                <input
                                                        aria-describedby="inputGroup-sizing-sm"
                                                        aria-label="Small"
                                                        class="form-control one-column-input" readonly
                                                        formControlName="userDetails"
                                                        ngModel="{{userDetails?.firstName + ' ' + userDetails?.lastName}}"
                                                        type="text">
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Reference number</b></label>
                                                <input aria-describedby="inputGroup-sizing-sm"
                                                       aria-label="Small"
                                                       class="form-control one-column-input" readonly
                                                       formControlName="referenceNumber"
                                                       ngModel="{{this.proposalRetrieved?.referenceNumber}}">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">

                                                <label><b>Name of TC</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(editFormationRequestFormGroup, 'nameOfTC')">
                                                    <input type="text"
                                                           matInput
                                                           placeholder="Name Of Technical Committee *"
                                                           (ngModelChange)="textValidationType($event)"
                                                           ngModel="{{this.proposalRetrieved?.nameOfTC}}"

                                                           formControlName="nameOfTC">
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(editFormationRequestFormGroup, 'nameOfTC')"
                                                            errorMsg="Please Enter Name Of Technical Committee">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Scope</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(editFormationRequestFormGroup, 'scope')">
                                                    <input type="text"
                                                           matInput
                                                           placeholder="Scope *"
                                                           (ngModelChange)="textValidationType($event)"
                                                           ngModel="{{this.proposalRetrieved?.scope}}"

                                                           formControlName="scope">
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(editFormationRequestFormGroup, 'scope')"
                                                            errorMsg="Please Enter Scope">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Purpose and Justification</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(editFormationRequestFormGroup, 'purpose')">
                                    <textarea
                                            matInput
                                            aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                            class="form-control one-column-input" formControlName="purpose"
                                            ngModel="{{this.proposalRetrieved?.purpose}}"

                                            placeholder="Purpose and Justification *" type="text"></textarea>
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(editFormationRequestFormGroup, 'purpose')"
                                                            errorMsg="Please Enter Purpose">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Proposed TC Representation</b></label>

                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(editFormationRequestFormGroup, 'proposedRepresentation')">
                                        <textarea
                                                matInput
                                                ngModel="{{this.proposalRetrieved?.proposedRepresentation}}"
                                                aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                                class="form-control one-column-input"
                                                formControlName="proposedRepresentation"
                                                readonly type="text">
                                        </textarea>
                                                    <app-field-error-display
                                                            [displayError]="isFieldValid(editFormationRequestFormGroup, 'proposedRepresentation')"
                                                            errorMsg="Please Enter Proposed TC Representation">
                                                    </app-field-error-display>
                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>Department</b></label>
                                                <mat-form-field>
                                                    <mat-select aria-label="Small"
                                                                aria-describedby="inputGroup-sizing-lg"
                                                                class="form-control" required
                                                                formControlName="departmentId"
                                                                name="departmentId"
                                                                placeholder="{{selectedDepartment}}"
                                                                [class.is-invalid]="formEditFormationRequest.departmentId.invalid && formEditFormationRequest.departmentId.touched">
                                                        <mat-option *ngFor="let department of departments"
                                                                    [value]="department">
                                                            {{department.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="form-group col-12">
                                                <label><b>SO/IEE/IEC Mirror Committee</b></label>
                                                <mat-form-field class="example-full-width has-label"
                                                                [ngClass]="displayFieldCss(editFormationRequestFormGroup, 'isoCommittee')">
                                                    <input
                                                            matInput
                                                            ngModel="{{this.proposalRetrieved?.isoCommittee}}"
                                                            aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                                                            class="form-control one-column-input"
                                                            formControlName="isoCommittee"
                                                            placeholder="SO/IEE/IEC Mirror Committee" type="text">

                                                </mat-form-field>
                                            </div>

                                        </div>
                                        <input hidden formControlName="id" [ngModel]="this.proposalRetrieved?.id"
                                               name="id">

                                        <input hidden formControlName="departmentIdOriginal"
                                               [ngModel]="this.proposalRetrieved?.departmentId"
                                               name="departmentIdOriginal">


                                        <ng-container [ngSwitch]="this.proposalRetrieved?.status">
                                            <ng-container *ngSwitchCase="'3'">
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li style="background-color: red"
                                                                class="list-group-item active">HOD
                                                                REJECTION
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION
                                                                BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION REASON:
                                                                {{this.proposalRetrieved?.comments}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION
                                                                DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                        </ul>
                                                    </div>
                                                </div>
                                            </ng-container>
                                            <ng-container *ngSwitchCase="'5'">
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li class="list-group-item active">HOF APPROVAL
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL
                                                                BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL REASON:
                                                                {{this.proposalRetrieved?.comments}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL
                                                                DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li style="background-color: red"
                                                                class="list-group-item active">SPC
                                                                REJECTION
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION BY:
                                                                {{spcDetails?.firstName + ' ' + spcDetails?.lastName}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION REASON:
                                                                {{this.proposalRetrieved?.commentsSpc}}
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION DATE:
                                                                {{formatFormDate(this.proposalRetrieved?.spcReviewDate)}}
                                                            </li>

                                                        </ul>
                                                    </div>
                                                </div>

                                            </ng-container>
                                            <ng-container *ngSwitchCase="'7'">
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li class="list-group-item active">HOF APPROVAL
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL
                                                                BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL REASON:
                                                                {{this.proposalRetrieved?.comments}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL
                                                                DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li class="list-group-item active">SPC APPROVAL
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL BY:
                                                                {{spcDetails?.firstName + ' ' + spcDetails?.lastName}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL REASON:
                                                                {{this.proposalRetrieved?.commentsSpc}}
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">APPROVAL DATE:
                                                                {{formatFormDate(this.proposalRetrieved?.spcReviewDate)}}
                                                            </li>

                                                        </ul>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class=" col-12">
                                                        <ul class="list-group">
                                                            <li style="background-color: red"
                                                                class="list-group-item active">SAC
                                                                REJECTION
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION BY:
                                                                {{sacDetails?.firstName + ' ' + sacDetails?.lastName}}
                                                            </li>
                                                            <li style="background: lightgray"
                                                                class="list-group-item">RECOMMENDATION:
                                                                {{this.proposalRetrieved?.commentsSac}}
                                                            </li>

                                                            <li style="background: lightgray"
                                                                class="list-group-item">REJECTION DATE:
                                                                {{formatFormDate(this.proposalRetrieved?.sacReviewDate)}}
                                                            </li>

                                                        </ul>
                                                    </div>
                                                </div>

                                            </ng-container>


                                            <ng-container *ngSwitchDefault></ng-container>
                                        </ng-container>

                                        <ng-container [ngSwitch]="this.proposalRetrieved?.status">
                                            <ng-container *ngSwitchCase="'1'">

                                                <div *ngIf="roles?.includes('TC_SEC_SD_READ') || roles?.includes( 'TC_SEC_SD_READ')">
<!--                                                    <button class="btn btn-info" type="submit">-->
<!--                                                        Edit-->
<!--                                                    </button>-->
                                                </div>
                                            </ng-container>

                                            <ng-container *ngSwitchDefault>
                                                <button class="btn btn-info" type="submit">
                                                    Resubmit
                                                </button>
                                            </ng-container>
                                        </ng-container>


                                        <button data-dismiss="modal" style="float: right" class="btn btn-danger">
                                            Close
                                        </button>


                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal fade" id="viewModal" tabindex="-1" role="dialog"
                     aria-labelledby="updateExampleModalLabel"
                     aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="viewExampleModalLabel">Proposal for formation of TC</h5>
                                <button type="button" class="close" #closeModalC data-dismiss="modal"
                                        aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">

                                <!--                    <form #formDirectiveB="ngForm" (ngSubmit)="uploadProposalForTC(formDirectiveB)"-->
                                <!--                          [formGroup]="editFormationRequestFormGroup">-->
                                <div class="form-body">
                                    <div class="row">

                                        <div class="form-group col-6">
                                            <label><b>Date of Presentation</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.dateOfPresentation}}">

                                        </div>

                                        <div class="form-group col-6">
                                            <label><b>Name of TC</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.nameOfTC}}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label><b>Proposer</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.proposer}}">
                                        </div>

                                        <div class="form-group col-6">

                                            <label><b>Reference number given by Secretariat</b></label>

                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.referenceNumber}}">

                                        </div>
                                    </div>
                                    <div class="row">

                                        <div class="form-group col-6">
                                            <label><b>Subject</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.subject}}">
                                        </div>

                                        <div class="form-group col-6">
                                            <label><b>Scope</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.referenceNumber}}">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label><b>Purpose and Justification</b></label>
                                            <textarea aria-describedby="inputGroup-sizing-sm"
                                                      aria-label="Small"
                                                      class="form-control one-column-input" readonly
                                                      ngModel="{{this.proposalRetrieved?.purpose}}"></textarea>
                                        </div>
                                        <div class="form-group col-6">
                                            <label><b>Proposed TC Representation</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.proposedRepresentation}}">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label><b>Target Date</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.targetDate}}">
                                        </div>
                                        <div class="form-group col-6">
                                            <label><b>Program of work</b></label>

                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.programmeOfWork}}">
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label><b>Liaison Organization</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.liaisonOrganization}}">
                                        </div>

                                        <div class="form-group col-6">
                                            <label><b>Organization</b></label>

                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{this.proposalRetrieved?.organization}}">
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="form-group col-6">
                                            <label><b>Department</b></label>
                                            <input aria-describedby="inputGroup-sizing-sm"
                                                   aria-label="Small"
                                                   class="form-control one-column-input" readonly
                                                   ngModel="{{selectedDepartment}}">
                                        </div>


                                    </div>
                                    <div class="form-group">
                                        <div class="material-datatables table-responsive">
                                            <table class="table table-striped table-bordered table-hover"
                                                   datatable
                                                   [dtOptions]="dtOptions" [dtTrigger]="dtTrigger">
                                                <thead>
                                                <tr>
                                                    <th class="task">Document Name</th>
                                                    <th class="task">Action</th>

                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr *ngFor="let doc of docs let i= index; ">

                                                    <td>{{doc.name}}</td>
                                                    <td>
                                                        <button class="btn btn-info tooltips"
                                                                style="width: inherit"
                                                                (click)="viewPdfFile( doc.id,doc?.name, 'application/pdf')"
                                                                data-placement="top"
                                                        ><i
                                                                class="fa fa-eye"></i> View
                                                        </button>
                                                    </td>

                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>

                                    </div>

                                    <ng-container [ngSwitch]="this.proposalRetrieved?.status">
                                        <ng-container *ngSwitchCase="'2'">
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">HOD APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                    </ul>
                                                </div>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'4'">
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">HOD APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.comments}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">SPC APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL BY:
                                                            {{spcDetails?.firstName + ' ' + spcDetails?.lastName}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.commentsSpc}}
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL DATE:
                                                            {{formatFormDate(this.proposalRetrieved?.spcReviewDate)}}
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>

                                        </ng-container>
                                        <ng-container *ngSwitchCase="'6'">
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">HOD APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.comments}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">SPC APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL BY:
                                                            {{spcDetails?.firstName + ' ' + spcDetails?.lastName}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.commentsSpc}}
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL DATE:
                                                            {{formatFormDate(this.proposalRetrieved?.spcReviewDate)}}
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">SAC APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL BY:
                                                            {{sacDetails?.firstName + ' ' + sacDetails?.lastName}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.commentsSac}}
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL DATE:
                                                            {{formatFormDate(this.proposalRetrieved?.sacReviewDate)}}
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>

                                        </ng-container>
                                        <ng-container *ngSwitchCase="'7'">
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">HOD APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            BY:{{userDetails?.firstName + ' ' + userDetails?.lastName}}</li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.comments}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL
                                                            DATE:{{formatFormDate(this.proposalRetrieved?.hofReviewDate)}}</li>

                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li class="list-group-item active">SPC APPROVAL
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL BY:
                                                            {{spcDetails?.firstName + ' ' + spcDetails?.lastName}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL REASON:
                                                            {{this.proposalRetrieved?.commentsSpc}}
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">APPROVAL DATE:
                                                            {{formatFormDate(this.proposalRetrieved?.spcReviewDate)}}
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class=" col-12">
                                                    <ul class="list-group">
                                                        <li style="background-color: red"
                                                            class="list-group-item active">SAC
                                                            REJECTION
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">REJECTION BY:
                                                            {{sacDetails?.firstName + ' ' + sacDetails?.lastName}}
                                                        </li>
                                                        <li style="background: lightgray"
                                                            class="list-group-item">RECOMMENDATION:
                                                            {{this.proposalRetrieved?.commentsSac}}
                                                        </li>

                                                        <li style="background: lightgray"
                                                            class="list-group-item">REJECTION DATE:
                                                            {{formatFormDate(this.proposalRetrieved?.sacReviewDate)}}
                                                        </li>

                                                    </ul>
                                                </div>
                                            </div>

                                        </ng-container>


                                        <ng-container *ngSwitchDefault></ng-container>
                                    </ng-container>


                                    <button style="float: right" data-dismiss="modal" class="btn btn-danger">
                                        Close
                                    </button>


                                </div>
                                <!--                    </form>-->
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>


</div>
