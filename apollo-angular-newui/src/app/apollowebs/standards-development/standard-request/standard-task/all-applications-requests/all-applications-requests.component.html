<div class="loading-spinner ">
    <ngx-spinner
            bdColor="rgba(51,51,51,0.8)"
            size="medium"
            color="#fff"
            type="ball-scale-multiple"
    >
        <p style="font-size: 20px; color: white">Loading Please Wait...</p>
    </ngx-spinner>
</div>
<div class="row">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header card-header-primary card-header-icon">
                <div class="card-icon">
                    <i class="material-icons">assignment</i>
                </div>
                <h4 class="card-title">Approved: <small
                        class="resolved-pill">{{approvedTasks.length}}
                    Requests</small>
                </h4>

            </div>

            <div class="card-body">
                <div class="toolbar">

                </div>
                <div class="material-datatables table-responsive">
                    <ng-template #loading class="loaderHolder">
                        <ngx-spinner type="ball-clip-rotate-multiple"
                                     size="medium">
                        </ngx-spinner>
                    </ng-template>
                    <div *ngIf="displayUsers; else loading">

                    <table class="table table-striped table-bordered table-hover"
                           datatable
                           [dtOptions]="dtOptions" [dtTrigger]="dtTrigger1">
                        <thead>
                        <tr>
                            <th class="task">Request No.</th>
                            <th class="task">Section</th>
                            <th class="task">Subject</th>
                            <th class="task">Requester</th>
                            <th class="task">Request Date</th>
                            <th class="task">Tc Sec</th>

                            <th class="task">Status</th>

                            <th class="task">Action</th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let task of approvedTasks let i= index; ">

                            <td>{{task.requestNumber}}</td>
                            <td>{{task.departmentName}}</td>
                            <td>{{task.subject}}</td>
                            <td>{{task.name}}</td>
                            <td>{{formatFormDate(task.standardCreationDate)}}</td>
                            <td>{{task.tcSecAssigned}}</td>
                            <td>{{task.ongoingStatus}}</td>
                            <td>
                                <button (click)="onOpenModal(task,'divisions')"
                                        class="btn btn-info tooltips"
                                        data-placement="top"
                                        data-original-title="Review"> Reassign TC Sec
                                </button>
                            </td>

                        </tr>
                        </tbody>
                    </table>
                    </div>
                </div>


            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="divisionChange" tabindex="-1" role="dialog"
     aria-labelledby="divisionChange"
     aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"
                    id="updateExampleModalLabel">Change TcSec</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">

                <form #formDirective="ngForm" (ngSubmit)="updateTcSec()"
                      [formGroup]="stdDepartmentChange">
                    <div class="form-group">
                        <label><b>Tc Secretary</b></label>
                        <mat-form-field>
                            <mat-select #matRef
                                        formControlName="tcSecAssigned"
                                        aria-label="Small"
                                        aria-describedby="inputGroup-sizing-lg"
                                        class="form-control" required
                                        name="tcSecAssigned"
                                        [class.is-invalid]="formStdRequest.tcSecAssigned.invalid && formStdRequest.tcSecAssigned.touched">
                                <mat-option *ngFor="let tcSec of tcSecs" value="{{tcSec.id}}">{{tcSec.firstName}}  {{tcSec.lastName}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <input hidden formControlName="id" [ngModel]="selectedStandard" name="id">


                    <button class="btn btn-info" type="submit">
                        Reassign
                    </button>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary"
                        (click)="hideModelB()"
                        #closeModalB
                        data-dismiss="modal">Close
                </button>

            </div>
        </div>
    </div>
</div>



