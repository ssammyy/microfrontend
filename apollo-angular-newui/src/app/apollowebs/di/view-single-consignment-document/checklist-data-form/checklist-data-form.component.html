<div class="main-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header card-header-primary card-header-icon">
                        <div class="card-icon">
                            <i class="material-icons" *ngIf="consignment">CHECKLIST</i>
                        </div>
                        <h4 class="card-title" *ngIf="consignment">INSPECTION CHECKLIST FORM
                            <button class="btn btn-sm btn-default float-right mr-7"
                                    (click)="goBack()"><i class="fa fa-arrow-left"></i> Back

                            </button>
                        </h4>

                    </div>
                    <div class="card-body" *ngIf="consignment">
                        <p>
                            <mat-error *ngFor="let e of errors">{{e.type}} - {{e.description}}</mat-error>
                        </p>
                        <mat-horizontal-stepper [linear]="false">
                            <mat-step label="General Checklist">
                                <div class="row no_margin" [formGroup]="generalCheckList">
                                    <div class="col-md-4 mb-3">
                                        <label for="inspection" class="waiver-form-label">Inspection</label>
                                        <select id="inspection" name="inspection" class="waiver-form-input-master"
                                                formControlName="inspection">
                                            <option value="not selected">Select one.....</option>
                                            <option value="PARTIAL">Partial Inspection</option>
                                            <option value="FULL">Full Inspection</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="clearingAgent" class="waiver-form-label">Clearing agent</label>
                                        <input type="text" class="waiver-form-input-master" name="clearingAgent"
                                               id="clearingAgent" formControlName="clearingAgent">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="customsEntryNumber" class="waiver-form-label">Customs entry
                                            no</label>
                                        <input type="text" class="waiver-form-input-master" name="customsEntryNumber"
                                               data-name="clearing Agent" id="customsEntryNumber"
                                               formControlName="customsEntryNumber">
                                    </div>
                                    <div class="col-sm-12 col-md-8">
                                        <label for="overallRemarks" class="waiver-form-label">Overall Remarks</label>
                                        <textarea id="overallRemarks" class="waiver-form-input-master" placeholder=""
                                                  formControlName="overallRemarks"></textarea>
                                        <mat-error *ngIf="message">{{message}}</mat-error>
                                    </div>
                                </div>
                                <div class="float-right pr-4">
                                    <button [disabled]="generalCheckList.invalid" class="btn btn-primary" mat-button
                                            matStepperNext>NEXT
                                    </button>
                                </div>

                            </mat-step>
                            <mat-step label="Agrochem Checklist" *ngIf="consignment.ui.cocRequest">
                                <app-agrochem-inspection-checklist
                                        (agrochemDetails)="setAgrochemChecklist($event)"
                                        [categories]="categories"
                                        [itemList]="itemList"
                                        (valid)="validationUpdate($event,'agrochem')"
                                ></app-agrochem-inspection-checklist>

                                <button class="btn btn-warning" mat-button matStepperPrevious>Back</button>
                                <div class="float-right pr-4">
                                    <button [disabled]="!agroChemValid" class="btn btn-primary"
                                            mat-button
                                            matStepperNext>NEXT
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step label="Engineering checklist" *ngIf="consignment.ui.cocRequest">
                                <app-engineering-inspection-checklist
                                        (engineeringDetails)="setEngineringChecklist($event)"
                                        [categories]="categories"
                                        [itemList]="itemList"
                                        (valid)="validationUpdate($event,'engineering')"
                                ></app-engineering-inspection-checklist>
                                <button class="btn btn-warning" mat-button matStepperPrevious>Back</button>
                                <div class="float-right pr-4">
                                    <button [disabled]="!engineringValid" class="btn btn-primary"
                                            mat-button
                                            matStepperNext>NEXT
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step label="Vehicle Checklist" *ngIf="consignment.ui.corRequest">
                                <app-vehicle-inspection-checklist (vehicleDetails)="setVehicleChecklist($event)"
                                                                  [stations]="stations"
                                                                  [categories]="categories"
                                                                  [itemList]="itemList"
                                                                  (valid)="validationUpdate($event,'vehicle')"
                                ></app-vehicle-inspection-checklist>
                                <button class="btn btn-warning" mat-button matStepperPrevious>Back</button>
                                <div class="float-right pr-4">
                                    <button [disabled]="!vehicleValid" class="btn btn-primary"
                                            mat-button
                                            matStepperNext>NEXT
                                    </button>
                                </div>
                            </mat-step>
                            <mat-step label="Other Checklists" *ngIf="consignment.ui.cocRequest">
                                <app-other-inspection-checklist
                                        (otherDetails)="setOtherChecklist($event)"
                                        [itemList]="itemList"
                                        (valid)="validationUpdate($event,'other')"
                                        [categories]="categories"
                                ></app-other-inspection-checklist>
                                <button class="btn btn-warning" mat-button matStepperPrevious>Back</button>
                            </mat-step>
                        </mat-horizontal-stepper>
                        <div class="row no_margin master-list-new-btn">
                            <button (click)="goBack()" class="btn btn-warning" mat-button mat-dialog-close>Cancel
                            </button>
                            <button [disabled]="generalCheckList.invalid || invalidSelection || loading"
                                    class="next-btn btn-gen new-btn"
                                    (click)="saveRecord()">SAVE
                                <mat-spinner [diameter]="20" color="warn" *ngIf="loading"></mat-spinner>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>