<div class="card border" style="width: 98%">
    <div class="card-header" [className]="queryDetails.queryOrigin==='KEBS'?'bg-primary':'bg-success'">
        <h4 class="pull-left">
            {{queryDetails.serialNumber}} - {{queryDetails.queryOrigin}}
            <span class="font-small pull-right float-right">Created by {{queryDetails.createdBy}}
                on {{queryDetails.createdOn | date: 'dd-MM-yyyy'}} at {{queryDetails.createdOn | date: 'HH:mm'}}</span>
        </h4>
    </div>
    <div class="card-body message-body">
        <div class="row">
            <div class="col-md-4 col-sm-12 font-weight-bold">
                <p>QUERY</p>
            </div>
            <div class="col-md-8 col-sm-12">
                <p>{{queryDetails.kebsQuery}}</p>
            </div>
            <div class="col-md-4 col-sm-12 font-weight-bold" *ngIf="queryDetails.queryAnalysis">
                <p>ANALYSIS</p>
            </div>
            <div class="col-md-8 col-sm-12" *ngIf="queryDetails.queryAnalysis">
                <p>{{queryDetails.queryAnalysis}}</p>
            </div>
            <div class="col-md-4 col-sm-12 font-weight-bold" *ngIf="queryDetails.conclusion">
                <p>CONCLUSION</p>
            </div>
            <div class="col-md-8 col-sm-12" *ngIf="queryDetails.conclusion">
                <p>{{queryDetails.conclusion}}</p>
            </div>
            <div class="col-md-3 col-sm-12 font-weight-bold" *ngIf="queryDetails.conclusionDate">
                <p>CONCLUSION DATE</p>
            </div>
            <div class="col-md-3 col-sm-12" *ngIf="queryDetails.conclusionDate">
                <p>{{queryDetails.conclusionDate | date: 'dd-MM-yyyy'}}
                    at {{queryDetails.conclusionDate | date: 'HH:mm'}}</p>
            </div>
            <div class="col-md-4 col-sm-12 font-weight-bold" *ngIf="queryDetails.version">
                <p>DOCUMENT VERSION</p>
            </div>
            <div class="col-md-8 col-sm-12" *ngIf="queryDetails.version">
                <p>{{queryDetails.version}}</p>
            </div>
        </div>
    </div>
    <div *ngFor="let resp of queryDetails.responses"
         [ngClass]="resp.responseFrom=='KEBS'? 'message my-message': 'message'">
        <div class="message-body">
            <div class="message-info">
                <h4>{{resp.responseFrom}} </h4>
                <h5><i class="fa fa-clock-o"></i>{{resp.createdOn | date: 'dd-MM-yyyy'}}
                    at {{resp.createdOn | date: 'HH:mm'}}</h5>
            </div>
            <hr>
            <div class="message-text">
                <div class="row">
                    <div class="col-md-12">
                        <p>{{resp.queryResponse}}
                        <p>
                    </div>
                    <div class="col-md-4 col-sm-12">
                        <a target="_blank" *ngFor="let l of resp.linkToUploads" href="{{l}}">{{formatDocument(l)}}</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card-footer" *ngIf="!queryDetails.clossed">
        <div class="send-message-button btn-info">
            <button class="btn btn-primary" (click)="viewQuery(queryDetails)"
                    aria-expanded="false">Reply
            </button>
        </div>
    </div>
</div>