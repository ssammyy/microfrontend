<div class="container-fluid" id="main-container" style="margin-top: 5%">
    <div class="loading-spinner " *ngIf="loading">
        <ngx-spinner
                bdColor="rgba(51,51,51,0.8)"
                color="#fff"
                size="medium"
                type="ball-scale-multiple">
            <p style="font-size: 20px; color: white">{{loadingText}}</p>
        </ngx-spinner>
    </div>
    <div class="main-content">
        <div class="container-fluid">

            <div class="row">
                <div class="col-lg-9">
                    <div class="card ">
                        <div class="card-header ">
                            <h4 class="card-title">FACTORY INSPECTION REPORT
                            </h4>
                        </div>
                        <div class="card-body ">
                            <div class="row">
                                <div class="col-lg-3 col-md-5">

                                    <ul class="nav nav-pills nav-pills-rose nav-pills-icons flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-toggle="tab" href="#link1" role="tablist">
                                                <i class="material-icons">description</i> General Details
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link2" role="tablist">
                                                <i class="material-icons">assignment_turned_in</i> Technical: Quality
                                                Procedures,Standards And Management Systems
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link3" role="tablist">
                                                <i class="material-icons">assignment_turned_in</i> Inspection And
                                                Testing
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link12" role="tablist">
                                                <i class="material-icons">assignment_turned_in</i>Product Labelling
                                                And Identification
                                            </a>
                                        </li>

                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link4" role="tablist">
                                                <i class="material-icons">assignment_turned_in</i>Standardization Mark
                                                Scheme
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link5" role="tablist">
                                                <i class="material-icons">assignment_turned_in</i>Annex I:Operation
                                                Process And Controls
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link6" role="tablist">
                                                <i class="material-icons">message</i> Annex II:Haccp Implementation
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link7" role="tablist">
                                                <i class="material-icons">preview</i> Recommendations
                                            </a>
                                        </li>
                                        <!--                                        <li class="nav-item">-->
                                        <!--                                            <a class="nav-link" data-toggle="tab" href="#link8" role="tablist">-->
                                        <!--                                                <i class="material-icons">summarize</i> Documents Attached-->
                                        <!--                                            </a>-->
                                        <!--                                        </li>-->
                                        <!--                                        <li class="nav-item">-->
                                        <!--                                            <a class="nav-link" data-toggle="tab" href="#link9" role="tablist">-->
                                        <!--                                                <i class="material-icons">table_view</i> Version Details-->
                                        <!--                                            </a>-->
                                        <!--                                        </li>-->
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link10" role="tablist">
                                                <i class="material-icons">person</i> Inspector Details
                                            </a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#link11" role="tablist">
                                                <i class="material-icons">person</i> Supervisor Details
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                                <div class="col-md-9" style="background-color: #eeeeee8a;">
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="link1">
                                            <h3>General Details</h3>
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <br>
                                                    <table class="table">
                                                        <tbody>

                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">toc</i>
                                                            </td>
                                                            <td><strong>Name of firm
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.firmName}}
                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">mail</i>
                                                            </td>
                                                            <td><strong>Postal address
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.postalAddress}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">contacts</i>
                                                            </td>
                                                            <td><strong>Telephone number
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.telephoneNo}}

                                                            </td>
                                                        </tr>

                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">description</i>
                                                            </td>
                                                            <td><strong>Products Covered
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.commodityDescription}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">verified</i>
                                                            </td>
                                                            <td><strong>Brand
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.brandName}}
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <i class="material-icons">subtitles</i>
                                                            </td>
                                                            <td><strong>Applicable Standards
                                                            </strong></td>
                                                            <td>
                                                                {{permitEntityDto?.standardNumber}}
                                                            </td>
                                                        </tr>
                                                        </tbody>
                                                    </table>
                                                </div>

                                            </div>
                                        </div>
                                        <div class="tab-pane" id="link2">
                                            <h3>Technical: Quality Procedures,Standards And Management Systems</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">

                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <table class=" table table-bordered table-hover table-striped">
                                                            <thead style="text-align: left;">
                                                            <tr>

                                                                <th style="width: 40%"><strong>Aspects Checked</strong>
                                                                </th>
                                                                <th><strong>Details of Findings</strong></th>
                                                                <th><strong>Remarks</strong></th>
                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr>
                                                                <td><strong>State whether the firm is implementing any
                                                                    management system and Specify the management system
                                                                    being implemented e.g. QMS,FSMS,HACCP</strong>
                                                                </td>
                                                                <td>{{technicalDetails?.firmImplementedAnyManagementSystem}}</td>
                                                                <td>{{technicalDetails?.firmImplementedAnyManagementSystemRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Indicate the relevant product
                                                                    standards and codes of practice in the
                                                                    firmâ€™s
                                                                    possession</strong>
                                                                </td>
                                                                <td>{{technicalDetails?.indicateRelevantProductStandardCodes}}</td>
                                                                <td>{{technicalDetails?.indicateRelevantProductStandardCodesRemarks}}</td>
                                                            </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="link3">
                                            <h3>Inspection And Testing</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">


                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <table class=" table table-bordered table-hover table-striped">
                                                            <thead style="text-align: left;">
                                                            <tr>

                                                                <th style="width: 40%"><strong>Describe the status of
                                                                    the following</strong>
                                                                </th>
                                                                <th><strong>Details of Findings</strong></th>
                                                                <th><strong>Status of compliance</strong></th>
                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr>
                                                                <td><strong>Compliance to applicable statutory
                                                                    requirements</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDto?.complianceApplicableStatutory}}</td>
                                                                <td>{{inspectionDetailsDto?.complianceApplicableStatutoryRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Plant housekeeping</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDto?.plantHouseKeeping}}</td>
                                                                <td>{{inspectionDetailsDto?.plantHouseKeepingRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Handling of complaints</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDto?.handlingComplaints}}</td>
                                                                <td>{{inspectionDetailsDto?.handlingComplaintsRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Quality control personnel competence records
                                                                    (Academic/professional/experience)
                                                                </strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDto?.qualityControlPersonnel}}</td>
                                                                <td>{{inspectionDetailsDto?.qualityControlPersonnelRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Testing Facility (In-house or external
                                                                    laboratory used)</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDto?.testingFacility}}</td>
                                                                <td>{{inspectionDetailsDto?.testingFacilityRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Equipment calibration/verification</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDtoB?.equipmentCalibration}}</td>
                                                                <td>{{inspectionDetailsDtoB?.equipmentCalibrationRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Quality records (Raw materials, in-process
                                                                    and final product)</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDtoB?.qualityRecords}}</td>
                                                                <td>{{inspectionDetailsDtoB?.qualityRecordsRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Records of nonconforming products at raw
                                                                    materials step, in-process step and final product
                                                                    step</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDtoB?.recordsNonconforming}}</td>
                                                                <td>{{inspectionDetailsDtoB?.recordsNonconformingRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Product Recall records</strong>
                                                                </td>
                                                                <td>{{inspectionDetailsDtoB?.productRecallRecords}}</td>
                                                                <td>{{inspectionDetailsDtoB?.productRecallRecordsRemarks}}</td>
                                                            </tr>

                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>


                                            </div>


                                        </div>

                                        <div class="tab-pane" id="link12">
                                            <h3>Product Labelling
                                                And Identification</h3>

                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">


                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped table-bordered table-hover">
                                                                <thead>
                                                                <tr>
                                                                    <th style="width: 40%"><strong>Standard Marking/labelling
                                                                        requirements</strong>
                                                                    </th>
                                                                    <th><strong>Details of Findings</strong></th>
                                                                    <th><strong>Status of compliance</strong></th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr *ngFor="let r of productLabellingDtos; let i=index">
                                                                    <td>{{r.standardMarking}}</td>
                                                                    <td>{{r.findings}}</td>
                                                                    <td>{{r.statusOfCompliance}}</td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>

                                        <div class="tab-pane" id="link4">
                                            <h3>Standardization Mark
                                                Scheme</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">


                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <table class=" table table-bordered table-hover table-striped">
                                                            <thead style="text-align: left;">
                                                            <tr>

                                                                <th style="width: 40%"><strong>Describe the status of
                                                                    the following</strong>
                                                                </th>
                                                                <th><strong>Details of Findings</strong></th>
                                                                <th><strong>Status of compliance</strong></th>
                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr>
                                                                <td><strong>Validity of S-Mark permit(s)</strong>
                                                                </td>
                                                                <td>{{standardizationMarkSchemeDto?.validitySmarkPermit}}</td>
                                                                <td>{{standardizationMarkSchemeDto?.validitySmarkPermitRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Indicate how Standardization Mark(s) and
                                                                    permit number(s) is used in line with the policy for
                                                                    use of certification marks</strong>
                                                                </td>
                                                                <td>{{standardizationMarkSchemeDto?.useTheSmark}}</td>
                                                                <td>{{standardizationMarkSchemeDto?.useTheSmarkRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Are there changes affecting product
                                                                    certification? If yes, give details</strong>
                                                                </td>
                                                                <td>{{standardizationMarkSchemeDto?.changesAffectingProductCertification}}</td>
                                                                <td>{{standardizationMarkSchemeDto?.changesAffectingProductCertificationRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Have the changes been communicated to KEBS?
                                                                </strong>
                                                                </td>
                                                                <td>{{standardizationMarkSchemeDto?.changesBeenCommunicatedKebs}}</td>
                                                                <td>{{standardizationMarkSchemeDto?.changesBeenCommunicatedKebsRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Samples drawn</strong>
                                                                </td>
                                                                <td>{{standardizationMarkSchemeDto?.samplesDrawn}}</td>
                                                                <td>{{standardizationMarkSchemeDto?.samplesDrawnRemarks}}</td>
                                                            </tr>


                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>


                                            </div>
                                        </div>
                                        <div class="tab-pane" id="link5">
                                            <h3>Annex I:Operation
                                                Process And Controls</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">


                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <div class="table-responsive">
                                                            <table class="table table-striped table-bordered table-hover">
                                                                <thead>
                                                                <tr>
                                                                    <th style="width: 40%"><strong>Process Flow/Operations</strong>
                                                                    </th>
                                                                    <th><strong>Quality Checks</strong></th>
                                                                    <th><strong>Frequency</strong></th>
                                                                    <th><strong>Quality Checks Records</strong></th>
                                                                    <th><strong>Details Of Findings</strong></th>

                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr *ngFor="let r of operationProcessAndControlsDetailsDtos; let i=index">
                                                                    <td>{{r.processFlow}}</td>
                                                                    <td>{{r.qualityChecks}}</td>
                                                                    <td>{{r.frequency}}</td>
                                                                    <td>{{r.qualityChecks}}</td>
                                                                    <td>{{r.findings}}</td>

                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>

                                        </div>
                                        <div class="tab-pane" id="link6">
                                            <h3>Annex II:Haccp Implementation</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">


                                                    <div class="material-datatables" style="width: 100%; word-break: break-word">
                                                        <table class=" table table-bordered table-hover table-striped">
                                                            <thead style="text-align: left;">
                                                            <tr>

                                                                <th style="width: 40%"><strong>Aspects</strong>
                                                                </th>
                                                                <th><strong>Details of Findings</strong></th>
                                                                <th><strong>Status of compliance</strong></th>
                                                            </tr>
                                                            </thead>

                                                            <tbody>
                                                            <tr>
                                                                <td><strong>Design & facilities-construction and layout
                                                                    of buildings and work space.</strong>
                                                                </td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.designFacilitiesConstructionLayout}}</td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.designFacilitiesConstructionLayoutRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Maintenance and sanitation- cleaning
                                                                    programs, pest control systems and waste
                                                                    management.</strong>
                                                                </td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.maintenanceSanitationCleaningPrograms}}</td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.maintenanceSanitationCleaningProgramsRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Personnel hygiene</strong>
                                                                </td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.personnelHygiene}}</td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.personnelHygieneRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Transportation - conveyance & bulk container
                                                                </strong>
                                                                </td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.transportationConveyance}}</td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.transportationConveyanceRemarks}}</td>
                                                            </tr>
                                                            <tr>
                                                                <td><strong>Determination of Critical parameters to
                                                                    assure food safety and evidence of monitoring of the
                                                                    critical parameters</strong>
                                                                </td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.determinationCriticalParameters}}</td>
                                                                <td>{{haccpImplementationDetailsApplyDto?.determinationCriticalParametersRemarks}}</td>
                                                            </tr>


                                                            </tbody>
                                                        </table>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="link7">
                                            <h3>Recommendations</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <h4><b>FOLLOW UP ON PREVIOUS
                                                                RECOMMENDATIONS/NONCONFORMITIES</b></h4>
                                                            <div>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.followPreviousRecommendationsNonConformities}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                                <h4><b>RECOMMENDATIONS</b></h4>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.recommendations}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                        <!--                                        <div class="tab-pane" id="link8">-->
                                        <!--                                            <h3>Documents Attached</h3>-->
                                        <!--                                            <div class="row">-->


                                        <!--                                            </div>-->
                                        <!--                                        </div>-->
                                        <!--                                        <div class="tab-pane" id="link9">-->
                                        <!--                                            <h3>Version Details</h3>-->
                                        <!--                                            <div class="row">-->


                                        <!--                                            </div>-->
                                        <!--                                        </div>-->
                                        <div class="tab-pane" id="link10">
                                            <h3>Inspector Details</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <h4><b>Inspector Name</b></h4>
                                                            <div>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.inspectorName}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                                <h4><b>Date</b></h4>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.inspectorDate}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>

                                                                <h4><b>Comments</b></h4>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.inspectorComments}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                        <div class="tab-pane" id="link11">
                                            <h3>Supervisor Details</h3>
                                            <div class="row">
                                                <div class="card-body" style="margin-top: 20px;">
                                                    <div class="form-body">
                                                        <div class="form-group">
                                                            <h4><b>Supervisor Name</b></h4>
                                                            <div>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.supervisorName}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                                <h4><b>Date</b></h4>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.supervisorDate}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>

                                                                <h4><b>Comments</b></h4>
                                                                <mat-form-field
                                                                        class="example-full-width">
                                            <textarea rows="5" cols="50" readonly
                                                      matInput
                                                      value="{{allInspectionReportDetails?.supervisorComments}}"
                                                      type="text"></textarea>
                                                                </mat-form-field>
                                                            </div>
                                                        </div>


                                                    </div>
                                                </div>
                                            </div>

                                        </div>


                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3">
                    <div class="card ">
                        <div class="card-header ">
                            <h4 class="card-title">Actions</h4>
                        </div>
                        <div class="card-body ">
                            <a class="btn btn-kebs mat-raised-button mat-button-base"
                               (click)="gotoPermitDetails(allInspectionReportDetails.permitDetails.id.toString())"
                               style=" width: -moz-available; white-space:normal; width: -webkit-fill-available;">GO
                                BACK TO PERMIT</a>
                            <a class="btn btn-kebs mat-raised-button mat-button-base"
                               (click)="gotoInspectionReport(allInspectionReportDetails.permitDetails.id.toString())"

                               style=" width: -moz-available; white-space:normal; width: -webkit-fill-available;">EDIT
                                INSPECTION REPORT</a>
                            <a class="btn btn-kebs mat-raised-button mat-button-base"
                               (click)="submitInspectionReport(allInspectionReportDetails.id)"
                               style=" width: -moz-available; white-space:normal; width: -webkit-fill-available;">SUBMIT
                                INSPECTION REPORT</a>
                        </div>
                    </div>


                </div>

            </div>

        </div>
    </div>

</div>
