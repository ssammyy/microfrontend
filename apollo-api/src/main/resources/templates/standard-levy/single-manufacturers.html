<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e7111dc08e6f973c676b3e3" data-wf-site="5e70fb3a565ebd99c1db37ce"
      lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title th:text="'KIMS - ' + ${title}"></title>
    <th:block th:include="fragments/general-form.html :: headerfiles"/>
    <link rel="stylesheet" th:href="@{/css/accordion.css}"/>
    <link rel="stylesheet" th:href="@{/assets/bootstrap3/css/bootstrap.css}"/>
</head>
<body>
<div class="top-bar" th:replace="fragments/general-form.html :: top-bar"></div>

<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d" th:replace="fragments/general-form.html :: side-navigation-bar"></div>
        <div id="w-node-27962c2db181-c676b3e3" class="main-content-div">
            <div class="content-nav" th:replace="fragments/general-form.html :: content-navigation-bar"></div>
            <div class="content-wrap">
                <div class="content-container">
                    <div class="content-block">
                        <div class="content-block-parent">
                            <div class="content-block-child---top">
                                <div class="applicant-details" style="width: 550px">
                                    <div th:replace="fragments/general-form.html :: alerts-bar"></div>
                                    <div class="container">
                                        <div class="row">
                                            <div class="col-md-9">
                                                <div class="wrapper wrapper-content animated fadeInUp">
                                                    <div class="ibox">
                                                        <div class="row">
                                                            <div class="col-lg-5">
                                                                <dl class="dl-horizontal">
                                                                    <dt>Created by:</dt>
                                                                    <dd th:text="${manufacturer?.createdBy}"></dd>
                                                                    <dt>KRA PIN:</dt>
                                                                    <dd th:text="${manufacturer?.kraPin}"></dd>
                                                                    <dt>Manufacturer Name:</dt>
                                                                    <dd><a class="text-navy" href="#" th:text="${manufacturer?.name}"> </a></dd>
                                                                    <dt>Business Registration No:</dt>
                                                                    <dd th:text="${manufacturer?.registrationNumber}"></dd>
                                                                    <br><br>
                                                                </dl>
                                                            </div>
                                                            <div class="col-lg-7" id="cluster_info">
                                                                <dl class="dl-horizontal">

                                                                    <dt>Created On:</dt>
                                                                    <dd th:text="${#dates.format(manufacturer?.createdOn, 'dd/MM/yyyy')}"></dd>
                                                                    <dt>Status:</dt>
                                                                    <dd th:if="${manufacturer.status == 1}" th:text="'Active'">
                                                                    <dd th:if="${manufacturer.status == 0}" th:text="'Inactive'"></dd>
                                                                    <dt>Yearly turnover:</dt>
                                                                    <dd th:text="'KSH.' + ' ' + ${turnover}"></dd>
                                                                </dl>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <br>
                                    <button class="accordion" style="flex: 0 50%">Manufacturer Contacts Details</button>
                                    <div class="panel">
                                        <ul class="w-list-unstyled" style="width: 500px">
                                            <li class="list-item" th:if="${contacts?.contactPerson}">
                                                <div class="list-title" style="color: #0166B1;">ContactPerson</div>
                                                <div class="list-text" th:text="${contacts?.contactPerson}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${contacts?.telephone}">
                                                <div class="list-title" style="color: #0166B1;">Phone Number</div>
                                                <div class="list-text" th:text="${contacts?.telephone}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.companyEmail}">
                                                <div class="list-title" style="color: #0166B1;">Email Address</div>
                                                <div class="list-text" th:text="${manufacturer?.companyEmail}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.ownership}">
                                                <div class="list-title" style="color: #0166B1;">Company Ownership</div>
                                                <div class="list-text" th:text="${manufacturer?.ownership}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.postalAddress}">
                                                <div class="list-title" style="color: #0166B1;">Postal Address</div>
                                                <div class="list-text" th:text="${manufacturer?.postalAddress}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.closureOfOperations}">
                                                <div class="list-title" style="color: #0166B1;">Closure Of Operations</div>
                                                <div class="list-text" th:text="${manufacturer?.closureOfOperations}"></div>
                                            </li>
                                            <li class="list-item" th:if="${manufacturer?.directorIdNumber}">
                                                <div class="list-title" style="color: #0166B1;">Director Id Number</div>
                                                <div class="list-text" th:text="${manufacturer?.directorIdNumber}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.description}">
                                                <div class="list-title" style="color: #0166B1;">Description</div>
                                                <div class="list-text" th:text="${manufacturer?.description}"></div>
                                            </li>
                                            <br>
                                            <li class="list-item" th:if="${manufacturer?.registrationNumber}">
                                                <div class="list-title" style="color: #0166B1;">Registration Number</div>
                                                <div class="list-text" th:text="${manufacturer?.registrationNumber}"></div>
                                            </li>
                                            <!--
                                             <li class="list-item" th:if="${contacts?.emailAddress}">
                                                <div class="list-title" style="color: #0166B1;">Business Nature</div>
                                                <div class="list-text" th:text="${nature?.name}"></div>
                                            </li>
                                            -->

                                            <br>
                                        </ul>
                                    </div>

                                    <button class="accordion" style="flex: 0 50%">Payment History</button>
                                    <div class="panel">
                                        <div class="row-table ">
                                            <table class="table table-striped">
                                                <thead>
                                                <tr>
                                                    <th>Month</th>
                                                    <th>Levy Paid</th>
                                                    <th>Levy Payable</th>
                                                    <th>Payment Date</th>
                                                    <th>Penalty Payment Date</th>
                                                    <!--                                                    <th>View</th>-->
                                                    <!--                                        <th>View</th>-->
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <!--                <a th:each="coc, iStat: ${cocs}" th:href="@{/api/inspection/supervisor/coc-details/{id}(id=${coc.id})}" class="table-row w-inline-block">-->
                                                <tr class="list" style="cursor: pointer" th:each="payment, iStat: ${paymentHistory}">
                                                    <td th:text="${payment?.paymentDate}"></td>
                                                    <td th:if="${payment?.levyPaid} != null" th:text="'Ksh.' + ${payment?.levyPaid}"></td>
                                                    <td th:if="${payment?.levyPaid} == null" th:text="'Not paid'"></td>
                                                    <td th:text="'Ksh.' + ${payment?.levyPayable}"></td>
                                                    <td th:if="${payment?.paymentDate != null}" th:text="${#dates.format(payment?.paymentDate, 'dd/MM/yyyy')}"></td>
                                                    <td th:if="${payment?.paymentDate == null}" th:text="'N/A'"></td>
                                                    <td th:if="${payment?.levyPenaltyPaymentDate != null}" th:text="${#dates.format(payment?.levyPenaltyPaymentDate, 'dd/MM/yyyy')}"></td>
                                                    <td th:if="${payment?.levyPenaltyPaymentDate == null}" th:text="'N/A'"></td>
                                                    <!--                                                    <td><a class="btn btn-info" th:href="@{/sl/manufacturer(manufacturerId = ${manufacturer.id}, appId=${map.id})}">view</a></td>-->
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <!--                                     Load lab report on Lab user's page -->
                                    <div th:if="${visitReport != null}">
                                        <button class="accordion" style="flex: 0 50%">Factory Visit Report</button>
                                        <div class="panel">
                                            <ul class="w-list-unstyled" style="width: 500px">
                                                <li class="list-item" th:if="${visitReport?.status}">
                                                    <div class="list-title" style="color: #0166B1;">Factory Visit Status</div>
                                                    <div class="list-text" th:text="${visitReport?.status} == 0 ?'Scheduled': 'Completed'"></div>
                                                </li>
                                                <br>
                                                <li class="list-item" th:if="${visitReport?.scheduledVisitDate}">
                                                    <div class="list-title" style="color: #0166B1;">Scheduled Visit Date</div>
                                                    <div class="list-text" th:text="${visitReport?.scheduledVisitDate}"></div>
                                                </li>
                                                <li class="list-item" th:if="${visitReport?.visitDate}">
                                                    <div class="list-title" style="color: #0166B1;"> Factory Visit Date</div>
                                                    <div class="list-text" th:text="${visitReport?.visitDate}"></div>
                                                </li>
                                                <li class="list-item" th:if="${visitReport?.purpose}">
                                                    <div class="list-title" style="color: #0166B1;">Purpose of visit</div>
                                                    <div class="list-text" th:text="${visitReport?.purpose}"></div>
                                                </li>
                                                <br>
                                                <li class="list-item" th:if="${visitReport?.personMet}">
                                                    <div class="list-title" style="color: #0166B1;">Person met during visit</div>
                                                    <div class="list-text" th:text="${visitReport?.personMet}"></div>
                                                </li>
                                                <br>
                                                <li class="list-item" th:if="${visitReport?.actionTaken}">
                                                    <div class="list-title" style="color: #0166B1;">Action taken</div>
                                                    <div class="list-text" th:text="${visitReport?.actionTaken}"></div>
                                                </li>
                                                <br>
                                                <li class="list-item" th:if="${visitReport?.remarks}">
                                                    <div class="list-title" style="color: #0166B1;">Remarks from the visit</div>
                                                    <div class="list-text" th:text="${visitReport?.remarks}"></div>
                                                </li>
                                                <br>
                                                <li class="list-item" th:if="${visitReport?.officersFeedback}">
                                                    <div class="list-title" style="color: #0166B1;">Officers Feedback</div>
                                                    <div class="list-text" th:text="${visitReport?.officersFeedback}"></div>
                                                </li>
                                                <li>
                                                    <div th:if="${uploadedFiles!= null && uploadedFiles?.size > 0}">
                                                        <div class="row-table ">
                                                            <table class="table table-striped table-bordered" id="viewAttachments"
                                                                   style="width:100%">
                                                                <thead>
                                                                <tr>
                                                                    <th>Visit Uploads</th>
                                                                    <th>View</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr class="list" style="cursor: pointer"
                                                                    th:each="uploadedFile: ${uploadedFiles}">
                                                                    <td th:text="${uploadedFile?.name}"></td>
                                                                    <td><a class="btn btn-primary itemViewBtn" target='_blank'
                                                                           th:href="@{/api/sl/view/uploaded(fileID=${uploadedFile?.id})}">VIEW</a>
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </li>
                                                <br>
                                                <li class="list-item">
                                                    <div class="list-title" style="color: #0166B1;">Assistant Manager Approval</div>
                                                    <div class="list-text" th:text="${visitReport.assistantManagerApproval} == 1 ? 'Approved':'Pending Approval'"></div>
                                                </li>
                                                <br>
                                                <li class="list-item">
                                                    <div class="list-title" style="color: #0166B1;">Assistant Manager Approval Remarks</div>
                                                    <div class="list-text" th:text="${visitReport.assistantManagerRemarks}"></div>
                                                </li>
                                                <br>
                                                <li class="list-item">
                                                    <div class="list-title" style="color: #0166B1;">Manager Approval</div>
                                                    <div th:text="${visitReport.managersApproval} == 1 ? 'Approved' : 'Pending Approval' " class="list-text"></div>
                                                </li>

                                                <li class="list-item">
                                                    <div class="list-title" style="color: #0166B1;">Manager Approval Remarks</div>
                                                    <div class="list-text" th:text="${visitReport.cheifManagerRemarks}"></div>
                                                </li>
                                                <br>
                                                <div class="my-3 p-3 bg-white rounded shadow-sm">
                                                    <h6 class="border-bottom border-gray pb-2 mb-0"></h6>
                                                    <div class="media text-muted pt-3">
                                                        <svg aria-label="Placeholder: 32x32" class="bd-placeholder-img mr-2 rounded" focusable="false" height="32" preserveAspectRatio="xMidYMid slice" role="img" width="32" xmlns="http://www.w3.org/2000/svg"><title>Placeholder</title>
                                                            <rect fill="#007bff" height="100%" width="100%"/>
                                                            <text dy=".3em" fill="#007bff" x="50%" y="50%">32x32</text>
                                                        </svg>
                                                        <p class="media-body pb-3 mb-0 small lh-125 border-bottom border-gray">
                                                            <strong class="d-block text-gray-dark" th:text="'Submitted by' + ' ' + ${visitReport?.createdBy}"></strong>
                                                            <span th:text="'on.' + ${visitReport?.createdOn}"></span>
                                                        </p>
                                                    </div>
                                                    <!--                                                    <small class="d-block text-right mt-3">-->
                                                    <!--                                                        &lt;!&ndash;  Ass manager approval   &ndash;&gt;-->
                                                    <!--                                                        <a sec:authorize="hasAuthority('SL_APPROVE_VISIT_REPORT')" th:href="@{/sl/general-actions(whereTo='assistant_manager_approval', manufacturerId=${manufacturer?.id}, kraId=${visitReport?.id}, approvalStatus = 1)}"-->
                                                    <!--                                                           th:if="${visitReport.assistantManagerApproval != 1}">Approve</a>-->
                                                    <!--                                                        &lt;!&ndash;  Manager's approval   &ndash;&gt;-->
                                                    <!--                                                        <a sec:authorize="hasAuthority('SL_SECOND_APPROVE_VISIT_REPORT')" th:href="@{/sl/general-actions(whereTo='manager_approval', manufacturerId=${manufacturer?.id}, kraId=${visitReport?.id}, approvalStatus = 1)}"-->
                                                    <!--                                                           th:if="${visitReport.assistantManagerApproval == 1} and ${visitReport.managersApproval != 1}">Approve</a>-->
                                                    <!--                                                    </small>-->
                                                </div>

                                            </ul>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div>
                            </div>

                        </div>
                        <div class="filter-block">
                            <div class="filter-block-title">
                                <div class="filter-title">Actions</div>
                            </div>
                            <div>

                                <button class="btn btn-info" data-target="#scheduleVisit" data-toggle="modal" sec:authorize="hasAuthority('SL_MANUFACTURERS_VIEW') and hasAuthority('SL_SCHEDULE_FACTORY_VISIT_MANUFACTURER')" style="width: 270px;" th:if="${visitReport?.scheduledVisitDate == null}"
                                        type="button">Schedule visit
                                </button>

                                <button class="btn btn-primary" data-target="#industryVisitReport" data-toggle="modal" sec:authorize="hasAuthority('SL_MANUFACTURERS_VIEW')" style="width: 270px;" th:if="${visitReport?.scheduledVisitDate != null && visitReport?.assistantManagerApproval == 0}"
                                        type="button">Prepare/Modify report
                                </button>
                                <button class="btn btn-primary" data-target="#industryVisitReportLevelOneApproval" data-toggle="modal" sec:authorize="hasAuthority('SL_APPROVE_VISIT_REPORT')" style="width: 270px;" th:if="${visitReport?.purpose != null && visitReport.assistantManagerApproval != 1 }"
                                        type="button">Approve
                                </button>
                                <button class="btn btn-primary" data-target="#industryVisitReportLevelTwoApproval" data-toggle="modal" sec:authorize="hasAuthority('SL_SECOND_APPROVE_VISIT_REPORT')" style="width: 270px;"
                                        th:if="${visitReport.assistantManagerApproval == 1 && visitReport.managersApproval != 1 }" type="button">Approve
                                </button>
                                <button class="btn btn-primary" data-target="#draftFeedback" data-toggle="modal" sec:authorize="hasAuthority('SL_SEND_FEEDBACK')" style="width: 270px;"
                                        th:if="${visitReport?.scheduledVisitDate != null} and ${visitReport} and ${visitReport?.managersApproval == 1} and ${visitReport?.officersFeedback == null} and ${visitReport?.assistantManagerApproval == 1}" type="button">Submit Feedback
                                </button>
                                <br/>
                                <button type="button" class="btn btn-primary" style="width: 270px" data-toggle="modal" data-target="#updateManufacturerDetailsModal">
                                    Modify account details
                                </button>


                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div aria-hidden="true" aria-labelledby="industryVisitReport" class="modal fade" id="industryVisitReport" role="dialog" tabindex="-1" th:if="${visitReport != null}">
                <form enctype="multipart/form-data" method="post" th:action="@{/api/sl/save-visit-report-data(manufacturerId=${manufacturer.id})}" th:object="${visitReport}">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="industryVisitReportLabel">Prepare report</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="form-group">
                                <input th:field="${visitReport.id}" type="hidden">
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="visitDate">Visit Date</label>
                                    <input class="form-control" id="visitDate" name="visitDate" th:field="${visitReport.visitDate}" type="date">
                                </div>
                                <div class="form-group">
                                    <label for="purpose">Purpose of Visit</label>
                                    <textarea class="form-control" id="purpose" name="purpose" rows="3" th:field="${visitReport.purpose}"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="personMet">Person met</label>
                                    <textarea class="form-control" id="personMet" name="personMet" rows="3" th:field="${visitReport.personMet}"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="actionTaken">Action taken</label>
                                    <textarea class="form-control" id="actionTaken" name="actionTaken" rows="3" th:field="${visitReport.actionTaken}"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="remarks">Remarks</label>
                                    <textarea class="form-control" id="remarks" name="remarks" rows="3" th:field="${visitReport.remarks}"></textarea>
                                </div>
                                <div class="form-group">
                                    <div th:if="${uploadedFiles!= null && uploadedFiles?.size > 0}">
                                        <div class="row-table ">
                                            <table class="table table-striped table-bordered" id="oldVersions"
                                                   style="width:100%">
                                                <thead>
                                                <tr>
                                                    <th>Visit Uploads</th>
                                                    <th>View</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr class="list" style="cursor: pointer"
                                                    th:each="uploadedFile: ${uploadedFiles}">
                                                    <td th:text="${uploadedFile?.name}"></td>
                                                    <td><a class="btn btn-primary itemViewBtn" target='_blank'
                                                           th:href="@{/api/sl/view/uploaded(fileID=${uploadedFile?.id})}">VIEW</a>
                                                    </td>
                                                </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div id="uploadAttachments">
                                        <label class="col-form-label" for="docFileName">Description Of Attachment(s):</label>
                                        <input class="input-field w-input" id="docFileName" max="20" name="docFileName">
                                        <label for="docFile">Upload your Attachments</label>
                                        <input class="form-control" data-name="docFile" id="docFile" multiple name="docFile" type="file">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="slLevelOneApproval">Select Report Approver</label>
                                    <select class="select-field w-select" id="slLevelOneApproval" required="" th:name="slLevelOneApproval" th:required="required">
                                        <option value="">Select Report Approver...</option>
                                        <option th:each="i : ${slLevelOneApprovals}" th:text="|${i.firstName} ${i.lastName}|" th:value="${i.id}"></option>
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div aria-hidden="true" aria-labelledby="industryVisitReportLevelOneApproval" class="modal fade" id="industryVisitReportLevelOneApproval" role="dialog" tabindex="-1">
                <form method="post" th:action="@{/api/sl/approval/level/one(manufacturerId=${manufacturer.id},visitId=${visitReport.id})}">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="industryVisitRepo">Approval With Remarks</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="levelOneRemarks">Remarks</label>
                                    <textarea class="form-control" id="levelOneRemarks" name="levelOneRemarks" required="required" rows="3" th:name="levelOneRemarks"></textarea>
                                </div>
                                <div class="form-group">
                                    <label for="slLevelTwoApproval">Select Report Approver</label>
                                    <select class="select-field w-select" id="slLevelTwoApproval" required="" th:name="slLevelTwoApproval" th:required="required">
                                        <option value="">Select One...</option>
                                        <option th:each="i : ${slLevelTwoApprovals}" th:text="|${i.firstName} ${i.lastName}|" th:value="${i.id}"></option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="approval">Approve/Reject</label>
                                    <select class="form-control" id="approval" name="approval" required="required" th:name="approval">
                                        <option th:text="Approve" th:value="approve"></option>
                                        <option th:text="Reject" th:value="reject"></option>
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" data-dismiss="modal" type="button">Close</button>
                                <button class="btn btn-primary" type="submit">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div aria-hidden="true" aria-labelledby="industryVisitReportLevelTwoApproval" class="modal fade" id="industryVisitReportLevelTwoApproval" role="dialog" tabindex="-1">
                <form method="post" th:action="@{/api/sl/approval/level/two(manufacturerId=${manufacturer.id},visitId=${visitReport.id})}">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="industryVisitReport">Approval With Remarks</h5>
                                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="levelTwoRemarks">Remarks</label>
                                    <textarea class="form-control" id="levelTwoRemarks" name="levelTwoRemarks" required="required" rows="3" th:name="levelTwoRemarks"></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="approval">Approve/Reject</label>
                                    <select class="form-control" id="approval" name="approval" required="required" th:name="approval">
                                        <option th:text="Approve" th:value="approve"></option>
                                        <option th:text="Reject" th:value="reject"></option>
                                    </select>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Save</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal fade" id="scheduleVisit" tabindex="-1" role="dialog" aria-labelledby="scheduleVisit" aria-hidden="true">
                <form th:action="@{/sl/schedule/{manufacturer}(manufacturer = ${manufacturer.id})}" method="GET">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Schedule visit</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <label for="scheduleDate">Select Date</label><input class="form-control" id="scheduleDate" name="scheduleDate" type="date">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Schedule</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal fade" id="draftFeedback" tabindex="-1" role="dialog" aria-labelledby="draftFeedback" aria-hidden="true">
                <form method="post" th:action="@{/api/sl/submit/draft/feedback(visitId= ${visitReport.id})}">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Draft Feedback</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="feedback">Feedback</label>
                                    <textarea class="form-control" id="feedback" name="feedback" rows="3">Write your feedback here</textarea>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Submit Feedback</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <!-- Update Manufacturer Details Modal -->
            <div class="modal fade" id="updateManufacturerDetailsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <form method="post" th:action="@{/api/sl/update-manufacturer(manufacturerId = ${manufacturer?.id})}" th:object="${manufacturer}">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Update Manufacturer Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <label for="postalAddress">Postal Address</label>
                                    <input type="text" class="form-control" id="postalAddress" th:field="*{postalAddress}" placeholder="New Postal Address">
                                </div>
                                <div class="form-group">
                                    <label for="buildingName">Building Name</label>
                                    <input class="form-control" id="buildingName" placeholder="New Building name" th:field="*{buildingName}" type="text">
                                </div>
                                <div class="form-group">
                                    <label for="streetName">Street</label>
                                    <input class="form-control" id="streetName" placeholder="The street name" th:field="*{streetName}" type="text">
                                </div>
                                <div class="form-group">
                                    <label for="county">County</label>
                                    <select class="select-field w-select" id="county" required="" th:field="*{county}">
                                        <option value="">Select One...</option>
                                        <option th:each="i : ${counties}" th:text="${i.county}" th:value="${i.id}"></option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="town">Town</label>
                                    <select class="select-field w-select" id="town" required="" th:field="*{town}">
                                        <option value="">Select One...</option>
                                        <option th:each="i : ${towns}" th:text="${i.town}" th:value="${i.id}"></option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="ownership">Select Ownership type</label>
                                    <select class="form-control" name="ownership" id="ownership" th:field="*{ownership}">
                                        <option th:text="Single_Ownership" th:value="Single_Ownership"></option>
                                        <option th:text="Limited_Company" th:value="Limited_Company"></option>
                                    </select>
                                </div>
                                <small>Declare closure of operations</small>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" th:value="${manufacturer?.closureOfOperations}" th:checked="${manufacturer?.closureOfOperations == 0}" name="closureOfOperations" id="closureOfOperations" th:field="*{closureOfOperations}">
                                    <label class="form-check-label" for="closureOfOperations">
                                        Declare closure of operations
                                    </label>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-primary">Update</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

        </div>
    </div>
</div>
<script th:src="@{/js/webflow.js}" type="text/javascript"></script>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script th:src="@{/assets/bootstrap3/js/bootstrap.js}" type="text/javascript"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular-animate.js"></script>
<script src="//angular-ui.github.io/bootstrap/ui-bootstrap-tpls-1.0.3.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.28//angular-route.min.js"></script>
<!-- [if lte IE 9]>
<script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
<script type="text/javascript" th:src="@{/js/sdl_js/App.js}"></script>
<script type="text/javascript" th:src="@{/js/sdl_js/Sdl_Service.js}"></script>
<script type="text/javascript" th:src="@{/js/sdl_js/Sdl_Controller.js}"></script>
<script>
    $(document).ready(function () {
        $('#scheduleId').on('click', function (event) {
            $('.myForm #exampleModal').modal();
        });
        $('#generateSchemeOfSupervisionId').on('click', function (event) {
            $('.scheme #schemeModal').modal();
        });
        $('#fillFactoryInspection').on('click', function (event) {
            $('.factoryInspectionForm #factoryInspectionFormModal').modal();
        });

        $('#industryVisitReportApproval').on('click', function (event) {
            $('.factoryInspectionForm #industryVisitReportApproval').modal();
        });
    });

</script>
<script>
    // document.getElementById("firstDateId").onchange = function () {
    //     var input = document.getElementById("schedule");
    var input = document.getElementById("schedule");

    input.setAttribute("min", this.value);
    // }
</script>

<script>
    var acc = document.getElementsByClassName("accordion");
    // var btn = document.getElementsByClassName("button w-button eBtn");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            this.style.border = "none";
            // this.style.position = "sticky"
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                // panel.style.position = "-webkit-sticky"
                // panel.style.position = "sticky"
            }
        });
    }
</script>

<!-- [if lte IE 9]>
<script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
</body>
</html>




