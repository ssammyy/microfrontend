<!DOCTYPE html>
<div th:replace="fragments/general-form.html :: headerfiles" ></div>
<body>
<div th:replace="fragments/general-form.html :: dashboard-page" ></div>
<div class="dashboard-body">
    <div th:replace="fragments/general-form.html :: side-navigation-bar" ></div>
    <div class="main-area">
        <div th:replace="fragments/general-form.html :: content-navigation-bar"></div>
        <section class="dashboard-content">
            <div class="content-wrap">
                <div class="content-container">
                    <div th:replace="fragments/general-form.html :: alerts-bar"></div>
                    <h1>Payments Details</h1>
                    <div class="content-block">
                        <div class="content-block-parent">

                            <div class="row-table ">
                                <table class="table table-striped table-bordered" id="slPaymentsMaster">
                                    <thead>
                                    <tr>
                                        <th>Entry No.</th>
                                        <th>KRA PIN</th>
                                        <th>Levy Payable(KES)</th>
                                        <th>Penalties(KES)</th>
                                        <th>Levy Paid(KES)</th>
                                        <th>Total Outstanding(KES)</th>
                                        <th>Details</th>
                                        <!--                                        <th>View</th>-->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr class="list" th:each="payment, iStat: ${payments}">
                                        <td th:text="${payment?.manufacturerEntity}"></td>
                                        <td th:text="${payment?.kraPin}"></td>
                                        <td th:text="${#numbers.formatDecimal(payment?.levyPayable,3,'COMMA',2,'POINT')}"></td>
                                        <td th:text="${#numbers.formatDecimal(payment?.levyPenalties,3,'COMMA',2,'POINT')}"></td>
                                        <td th:text="${#numbers.formatDecimal(payment?.levyPaid,3,'COMMA',2,'POINT')}"></td>
                                        <td th:text="${#numbers.formatDecimal(payment?.netLevyAmount,3,'COMMA',2,'POINT')}"></td>
                                        <td>
                                            <div th:if="${payment?.levyPaid > 0 }">
                                                <a class="btn btn-primary itemViewBtn" th:href="@{/api/sl/view/payment/details(entryNo=${payment?.manufacturerEntity})}">Details</a>
                                            </div>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
</body>
<div th:replace="fragments/general-form.html :: scripts"></div>

<script>
    $(document).ready(function () {
        var table = $('#slPaymentsMaster').DataTable({
            lengthChange: false,
            buttons: ['copy', 'excel', 'pdf', 'colvis']
        });

        table.buttons().container()
            .appendTo('#slPaymentsMaster_wrapper .col-sm-6:eq(0)');
    });
</script>

