<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html:: headerfiles"/>
</head>
<body>
<div id="spinnerContainer">
    <div class="spinner"></div>
</div>
<div th:replace="fragments/general-form.html :: dashboard-page"></div>

<div class="dashboard-body">
    <div th:replace="fragments/general-form.html :: side-navigation-bar"></div>
    <div class="main-area">
        <div th:replace="fragments/general-form.html :: content-navigation-bar"></div>
        <section class="dashboard-content">
            <div class="content-wrap">
                <div class="content-row">
                    <div class="row">
                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px">STA 10: INITIAL/(ROUTINE) INSPECTION REPORTS FACTORY ASSESSMENT</h5>
                        <form id="sta3Form"
                              th:action="@{/api/qa/apply/new-sta10(permitID = ${permit.id}, permitViewType=${message})}"
                              method="post">
                            <div th:object="${QaSta10Entity}">
                                <div class="form-row">
                                    <div class="col-md-12 mb-3">
                                        <label for="firmName" style="color: #0082f3; font-size: 16px">A: FIRM
                                            DETAILS</label>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="col-md-6 mb-3">
                                        <label for="firmName" class="field-label">1. Name of the Firm:</label>
                                        <input id="firmName" name="firmName" th:value="${CommonPermitDto?.firmName}" type="hidden">
                                        <input required="required"  type="text" disabled class="form-control" maxlength="256" name="firmName" data-name="lbIdAny Aomarking" id="firmNameB"    th:value="${CommonPermitDto?.firmName}">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="statusCompanyBusinessRegistration" class="field-label">2. Status of
                                            Company or Business registration</label>
                                        <input id="statusCompanyBusinessRegistration2" name="firmName"
                                               th:value="${CommonPermitDto?.firmTypeName}" type="hidden">
                                        <input required="required" disabled type="text" class="form-control"
                                               maxlength="256" name="statusCompanyBusinessRegistration"
                                               data-name="lbIdAny Aomarking"
                                               id="statusCompanyBusinessRegistration"
                                               th:value="${CommonPermitDto?.firmTypeName}">
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="ownerNameProprietorDirector" class="field-label">3. Name of the
                                            Owner (s)/Proprietor(s)/Director (s)</label>
                                        <input id="ownerNameProprietorDirector" name="ownerNameProprietorDirector"
                                               th:value="${CommonPermitDto?.directorList}" type="hidden">
                                        <textarea type="text" disabled class="form-control" style="font-size: 16px"
                                                  rows="2" id="ownerNameProprietorDirector2"
                                                  th:text="${CommonPermitDto?.directorList}"
                                                  required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-4 mb-3">
                                        <label for="postalAddress" class="field-label">4. Postal Address:</label>
                                        <input id="postalAddress" name="postalAddress"
                                               th:value="${CommonPermitDto?.postalAddress}" type="hidden">
                                        <input required="required" type="text" disabled class="form-control"
                                               maxlength="256" name="postalAddress" data-name="lbIdAny Aomarking"
                                               id="postalAddress2" th:value="${CommonPermitDto?.postalAddress}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="contactPerson" class="field-label">6. Contact Person:</label>
                                        <input id="contactPerson" name="contactPerson"
                                               th:value="${CommonPermitDto?.contactPerson}" type="hidden">
                                        <input required="required" type="text" disabled class="form-control"
                                               maxlength="256" name="contactPerson" data-name="lbIdAny Aomarking"
                                               id="contactPerson2" th:value="${CommonPermitDto?.contactPerson}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="telephone" class="field-label">5. Telephone:</label>
                                        <input id="telephone" name="telephone"
                                               th:value="${CommonPermitDto?.telephoneNo}" type="hidden">
                                        <input required="required" type="text" disabled class="form-control"
                                               maxlength="256" name="telephone" data-name="lbIdAny Aomarking"
                                               id="telephone2" th:value="${CommonPermitDto?.telephoneNo}">
                                    </div>

                                </div>
                                <div class="form-row" >
                                    <div class="col-md-4 mb-3">
                                        <label for="emailAddress" class="field-label">7. Email address:</label>
                                        <input id="emailAddress" name="emailAddress"
                                               th:value="${CommonPermitDto?.email}" type="hidden">
                                        <input required="required" type="text" disabled class="form-control"
                                               maxlength="256" name="emailAddress" data-name="lbIdAny Aomarking"
                                               id="emailAddress2" th:value="${CommonPermitDto?.email}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="physicalLocationMap" class="field-label">8. Physical Address</label>
                                        <input id="physicalLocationMap" name="physicalLocationMap"
                                               th:value="${CommonPermitDto?.physicalAddress}" type="hidden">
                                        <input required="required" disabled type="text" class="form-control"
                                               maxlength="256" name="physicalLocationMap" data-name="lbIdAny Aomarking"
                                               id="physicalLocationMap2" th:value="${CommonPermitDto?.physicalAddress}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="county" class="field-label">9. County:</label>
                                        <input id="county" name="county" th:value="${CommonPermitDto?.countyID}"
                                               type="hidden">
                                        <input required="required" type="text" disabled class="form-control"
                                               maxlength="256" name="county" data-name="lbIdAny Aomarking" id="county2"
                                               th:value="${CommonPermitDto?.county}">
                                        <!--                                        <select id="county" name="county" class="form-control" th:field="*{county}">-->
                                        <!--                                            <option  value="0">Select One...</option>-->
                                        <!--                                            <option th:each="county : ${counties}" th:text="${county.county}" th:value="${county.id}"></option>-->
                                        <!--                                        </select>-->
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-4 mb-3">
                                        <label for="town" class="field-label">10. Town:</label>
                                        <input id="town" name="town" th:value="${CommonPermitDto?.townID}"
                                               type="hidden">
                                        <input required="required" disabled type="text" class="form-control"
                                               maxlength="256" name="town" data-name="lbIdAny Aomarking" id="town2"
                                               th:value="${CommonPermitDto?.town}">
                                        <!--                                        <select id="town" name="town" class="form-control" th:field="*{town}">-->
                                        <!--                                            <option value="0">Select One...</option>-->
                                        <!--                                        </select>-->
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="totalNumberFemale" class="field-label">11. Total Number of Female:</label>
                                        <input required="required" type="number" min="1" class="form-control" maxlength="256" name="totalNumberFemale" data-name="lbIdAny Aomarking" id="totalNumberFemale"   th:field="*{totalNumberFemale}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="totalNumberMale" class="field-label">12. Total Number of Male:</label>
                                        <input required="required"  type="number" min="1" class="form-control" maxlength="256" name="totalNumberMale" data-name="lbIdAny Aomarking" id="totalNumberMale"   th:field="*{totalNumberMale}">
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-4 mb-3">
                                        <label for="totalNumberPermanentEmployees" class="field-label">13. No. of Permanent Employees:</label>
                                        <input required="required"  type="number" min="1" class="form-control" maxlength="256" name="totalNumberPermanentEmployees" data-name="lbIdAny Aomarking" id="totalNumberPermanentEmployees"   th:field="*{totalNumberPermanentEmployees}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="totalNumberCasualEmployees" class="field-label">14. No of Casual Employee:</label>
                                        <input required="required"  type="number" min="1" class="form-control" maxlength="256" name="totalNumberCasualEmployees" data-name="lbIdAny Aomarking" id="totalNumberCasualEmployees"   th:field="*{totalNumberCasualEmployees}">
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="averageVolumeProductionMonth" class="field-label">15. What is the average Volume of production per Month:</label>
                                        <input required="required" type="text" class="form-control" maxlength="256" name="averageVolumeProductionMonth" data-name="lbIdAny Aomarking" id="averageVolumeProductionMonth"   th:field="*{averageVolumeProductionMonth}">
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="firmName" style="color: #0082f3; font-size: 16px">B: PRODUCTION</label>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessRawMaterials" class="field-label">1. How are nonconforming products handled at the following stages of the manufacturing process: </label>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessRawMaterials" class="field-label">i. Raw materials:</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="handledManufacturingProcessRawMaterials" th:field="*{handledManufacturingProcessRawMaterials}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessInprocessProducts" class="field-label">ii. In-process products:</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="handledManufacturingProcessInprocessProducts" th:field="*{handledManufacturingProcessInprocessProducts}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessFinalProduct" class="field-label">iii. Final product</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="handledManufacturingProcessFinalProduct" th:field="*{handledManufacturingProcessFinalProduct}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="strategyInplaceRecallingProducts" class="field-label">2. What strategy do you have in place for recalling your products from the market that are nonconforming
                                            and have an effect on Health, Safety and Environment?</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="strategyInplaceRecallingProducts" th:field="*{strategyInplaceRecallingProducts}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessRawMaterials" class="field-label">3. State, where and how you store your raw materials and end products (State facility conditions). :</label>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-6 mb-3">
                                        <label for="stateFacilityConditionsRawMaterials" class="field-label">i. Raw materials?</label>
                                        <textarea type="text" class="form-control" style="font-size: 16px" rows="2" id="stateFacilityConditionsRawMaterials" th:field="*{stateFacilityConditionsRawMaterials}"   required="required"></textarea>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="stateFacilityConditionsEndProduct" class="field-label">ii.End product?</label>
                                        <textarea type="text" class="form-control" style="font-size: 16px" rows="2" id="stateFacilityConditionsEndProduct" th:field="*{stateFacilityConditionsEndProduct}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handledManufacturingProcessRawMaterials" class="field-label">4. What testing facilities exist on the premises (if any)? :</label>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="testingFacilitiesExistSpecifyEquipment" class="field-label">i. Specify equipment:</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="testingFacilitiesExistSpecifyEquipment" th:field="*{testingFacilitiesExistSpecifyEquipment}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="testingFacilitiesExistStateParametersTested" class="field-label">ii.State parameters tested on site:</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="testingFacilitiesExistStateParametersTested" th:field="*{testingFacilitiesExistStateParametersTested}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="testingFacilitiesSpecifyParametersTested" class="field-label">iii. Specify any testing arrangement with other commercial laboratories (Specify parameters tested):</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="testingFacilitiesSpecifyParametersTested" th:field="*{testingFacilitiesSpecifyParametersTested}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="calibrationEquipmentLastCalibrated" class="field-label">iv. Calibration of Equipment: <br> How do you calibrate your measuring equipment stated in 4 (i) above?
                                            <br> (e.g. Weighing scales, Thermometers e.t.c)? Specify when last calibrated</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="calibrationEquipmentLastCalibrated" th:field="*{calibrationEquipmentLastCalibrated}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-12 mb-3">
                                        <label for="handlingConsumerComplaints" class="field-label">5. Handling of Complaints: <br> How do you plan to handle (New) or currently handle your consumerâ€™s complaints?</label>
                                        <textarea type="text" class="form-control"  style="font-size: 16px" rows="2" id="handlingConsumerComplaints" th:field="*{handlingConsumerComplaints}"   required="required"></textarea>
                                    </div>
                                </div>
                                <div class="form-row" >
                                    <div class="col-md-6 mb-3">
                                        <label for="companyRepresentative" class="field-label">Company Representative:</label>
                                        <input required="required" type="text" class="form-control" maxlength="256" name="companyRepresentative" data-name="lbIdAny Aomarking" id="companyRepresentative"   th:field="*{companyRepresentative}">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="applicationDate" class="field-label">Date:</label>
                                        <input required="required" class="form-control" disabled maxlength="256" name="applicationDate" data-name="lbIdAny Aomarking" id="applicationDate"   th:value="${applicationDate}">
                                    </div>
                                </div>
                                <!--                                <div>-->
                                <!--                                    <div class="form-group">-->
                                <!--                                        <div class="form-check">-->
                                <!--                                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required="required" >-->
                                <!--                                            <label class="form-check-label" for="invalidCheck">-->
                                <!--                                                Agree to terms and conditions-->
                                <!--                                            </label>-->
                                <!--                                            <div class="invalid-feedback">-->
                                <!--                                                You must agree before submitting.-->
                                <!--                                            </div>-->
                                <!--                                        </div>-->
                                <!--                                    </div>-->
                                <!--                                </div>-->
                                <div id="idSubmit">
                                    <div class="form-group">
                                        <!--                                        <div class="col-md-4 mb-3">-->
                                        <!--                                            <button class="btn btn-primary" id="check" type="button">Validate form</button>-->
                                        <!--                                        </div>-->
                                        <div class="col-md-4 mb-3">
                                            <button class="btn btn-primary" id="mySubmit" type="submit">Submit form
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<div th:replace="fragments/general-form.html :: scripts"></div>
<script>
    document.onreadystatechange = function(){
        showSpinnerOnLoad(document)
    }

    function loadSpinner(){
        showSpinner(document)
    }

    //
    // $(function() {
    //     $('form').submit(function(e) {
    //         e.preventDefault();
    //         showSpinnerOnLoad(document)
    //     });
    // });
</script>
<script>
    $(document).ready(function(){

        $("#mySubmit").click(function () {
            let allAreFilled = true;
            document.getElementById("sta3Form").querySelectorAll("[required]").forEach(function (i) {
                if (!allAreFilled) return;
                let inputID = `#${i.id}`
                if (!i.value) {
                    $(inputID).addClass('error');
                    allAreFilled = false;
                }
                if (i.value) {
                    $(inputID).removeClass('error');
                }
                if (i.type === "radio") {
                    let radioValueCheck = false;
                    document.getElementById("myForm").querySelectorAll(`[name=${i.name}]`).forEach(function (r) {
                        if (r.checked) radioValueCheck = true;
                    })
                    allAreFilled = radioValueCheck;
                }

            })

            if ($('#sectionId').val() == -1) {
                $('#sectionId').addClass('error');
                allAreFilled = false;
                return false;
            } else {
                $('#sectionId').removeClass('error');
                return true;
            }

            if ($('#permitForeignStatus').val() == -1) {
                $('#permitForeignStatus').addClass('error');
                allAreFilled = false;
                return false;
            } else {
                $('#permitForeignStatus').removeClass('error');
                return true;
            }

            if (!allAreFilled) {
                // alert('Fill all the fields');
            } else {
                return true;
            }
        });

        // $( "#check" ).click(function() {
        //     let allAreFilled = true;
        //     document.getElementById("sta3Form").querySelectorAll("[required]").forEach(function(i) {
        //         if (!allAreFilled) return;
        //         if (!i.value) allAreFilled = false;
        //         if (i.type === "radio") {
        //             let radioValueCheck = false;
        //             document.getElementById("sta3Form").querySelectorAll(`[name=${i.name}]`).forEach(function(r) {
        //                 if (r.checked) radioValueCheck = true;
        //             })
        //             allAreFilled = radioValueCheck;
        //         }
        //     })
        //     if (!allAreFilled) {
        //         alert('Fill all the fields');
        //     }else {
        //         $(this).attr("disabled", "disabled");
        //         $("#mySubmit").removeAttr("disabled");
        //     }
        // });


        $("#county").click(function () {
            // let methodId = $("#divisionId").children("option:selected").val()
            let countyId = $("#county").val()
            // console.log(categories.length)
            if (countyId !== 0) {
                $.ajax({
                    method: "GET",
                    url: `/api/auth/town-list/${countyId}`,
                    // data: regionId,
                    success(response){
                        console.log(response)
                        let s = '';
                        s +=  ' <option value="0">Select One...</option>';
                        for(let i = 0; i < response.length; i++) {
                            // response.push('Select one')
                            s += '<option value="' + response[i].id + '">' + response[i].town + '</option>';
                            // <option th:each="subRegion : ${subRegions}" th:text="${subRegion.subRegion}" th:value="${subRegion.id}"></option>-->
                            // s += ' <option th:each="department : ${departments}" th:text="${department.department}" th:value="${department.id}"></option>';
                        }
                        $("#town").html(s);
                    }
                })
            }
        });

    });

</script>
<script>
    function hello () {
        let checkStatus = $("#idStatus").val();
        console.log(checkStatus)
        if (checkStatus === 'VIEW_PAGE'){
            // $('textarea').attr('readonly', true);
            $("#sta3Form :input").prop("disabled", true);
            $("#idSubmit").remove()
        }

    }
    window.onload = function () {
        setTimeout(function () {
            hello();
        }, 1000);
    }
</script>
</body>
</html>


