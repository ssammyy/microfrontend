<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html:: headerfiles"/>
</head>
<body>
<div id="spinnerContainer">
    <div class="spinner"></div>
</div>
<div th:replace="fragments/general-form.html :: dashboard-page"></div>

<div class="dashboard-body">
    <div th:replace="fragments/general-form.html :: side-navigation-bar"></div>
    <div class="main-area">
        <div th:replace="fragments/general-form.html :: content-navigation-bar"></div>
        <section class="dashboard-content">
            <div class="content-wrap">
                <div class="content-container">
                    <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>FACTORY INSPECTION REPORT </u>
                    </h5>
                    <div th:if="${message}" th:with="myStatus=${message}">
                        <input type="hidden" id="messageValue" name="messageValue" th:value="${myStatus}">
                    </div>
                    <input type="hidden" id="permitIDValue" name="permitIDValue" th:value="${permit?.Id}">
                    <input type="hidden" id="inspectionReportIDValue" name="inspectionReportIDValue"
                           th:value="${QaInspectionReportRecommendationEntity?.id}">
                    <div class="content-block">
                        <div class="content-block-parent" style="flex: 0 75%">

                            <!--                            <div class="sticky" style="margin-bottom: 30px">-->
                            <button class="accordion">1.0: GENERAL DETAILS</button>
                            <div class="panel">
                                <ul class="w-list-unstyled">
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Name of the Firm:</div>
                                        <div class="list-text-accordion" th:text="${permit?.firmName}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Postal Address:</div>
                                        <div class="list-text-accordion" th:text="${permit?.postalAddress}"></div>
                                    </li>

                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Telephone number</div>
                                        <div class="list-text-accordion" th:text="${permit?.telephoneNo}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Product(s) covered</div>
                                        <div class="list-text-accordion"
                                             th:text="${permit?.commodityDescription}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Brand(s)</div>
                                        <div class="list-text-accordion" th:text="${permit?.brandName}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Applicable standard(s)</div>
                                        <div class="list-text-accordion" th:text="${permit?.standardNumber}"></div>
                                    </li>
                                </ul>
                            </div>


                            <button class="accordion">2.0: TECHNICAL :<br>MANAGEMENT SYSTEMS AND STANDARDS
                            </button>
                            <div class="panel">
                                <form id="myForm"
                                      th:action="@{/api/qa/kebs/add/new-qpsms-details/save(permitID=${permit?.Id})}"
                                      method="post" th:object="${QaInspectionTechnicalEntity}">
                                    <div class="row-table ">
                                        <input type="hidden" id="idTechnical" name="id"
                                               th:value="${QaInspectionTechnicalEntity?.id}">
                                        <table id="qpsms" class="table table-striped table-bordered" style="width:100%">
                                            <thead>
                                            <tr>
                                                <th>S/No.</th>
                                                <th>Aspects Checked</th>
                                                <th>Details of Findings</th>
                                                <th>Remarks</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="list" style="cursor: pointer">
                                                <td>1.</td>
                                                <td>State whether the firm is implementing any management system and Specify the management system being implemented e.g. QMS,FSMS,HACCP</td>
                                                <td><textarea name="firmImplementedAnyManagementSystem" required="required" id="firmImplementedAnyManagementSystem"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{firmImplementedAnyManagementSystem}"></textarea></td>
                                                <td><textarea name="firmImplementedAnyManagementSystemRemarks"
                                                              id="firmImplementedAnyManagementSystemRemarks" class="input-field w-input"
                                                              rows="5"
                                                              th:field="*{firmImplementedAnyManagementSystemRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>2.</td>
                                                <td>Indicate the relevant product standards and codes of practice in the firmâ€™s possession</td>
                                                <td><textarea name="indicateRelevantProductStandardCodes" required="required"
                                                              id="indicateRelevantProductStandardCodes"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{indicateRelevantProductStandardCodes}"></textarea>
                                                </td>
                                                <td><textarea name="indicateRelevantProductStandardCodesRemarks"
                                                              id="indicateRelevantProductStandardCodesRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{indicateRelevantProductStandardCodesRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="qpsmsBtn">
                                        <div class="form-group">
                                            <!--                                            <div class="col-md-4 mb-3">-->
                                            <!--                                                <button class="btn btn-primary" id="check"-->
                                            <!--                                                        onclick="validationFunction('validateQPAMSDetails');"-->
                                            <!--                                                        type="button">Validate form-->
                                            <!--                                                </button>-->
                                            <!--                                            </div>-->
                                            <div class="col-md-4 mb-3">
                                                <button class="btn btn-primary"


                                                        onclick="validationFunction('validateQPAMSDetails');"

                                                        type="submit">
                                                    Save
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <button class="accordion">INSPECTION AND TESTING</button>
                            <div class="panel">
                                <form id="myForm1"
                                      th:action="@{/api/qa/kebs/add/new-qpsms-details/save(permitID=${permit?.Id})}"
                                      method="post" th:object="${QaInspectionTechnicalEntity}">
                                    <div class="row-table ">
                                        <input type="hidden" id="idTechnical1" name="id"
                                               th:value="${QaInspectionTechnicalEntity?.id}">
                                        <table id="qpsms1" class="table table-striped table-bordered"
                                               style="width:100%">
                                            <thead>
                                            <tr>
                                                <th>S/No.</th>
                                                <th>Describe the status of the  following</th>
                                                <th>Details of Findings</th>
                                                <th>Status of compliance</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="list" style="cursor: pointer">
                                                <td>1.</td>
                                                <td>Compliance to applicable statutory requirements</td>
                                                <td><textarea required="required" name="complianceApplicableStatutory"
                                                              id="complianceApplicableStatutory"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{complianceApplicableStatutory}"></textarea></td>
                                                <td><textarea name="complianceApplicableStatutoryRemarks"
                                                              id="complianceApplicableStatutoryRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{complianceApplicableStatutoryRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>2.</td>
                                                <td>Plant housekeeping</td>
                                                <td><textarea required="required"
                                                              name="plantHouseKeeping"
                                                              id="plantHouseKeeping"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{plantHouseKeeping}"></textarea>
                                                </td>
                                                <td><textarea
                                                        name="plantHouseKeepingRemarks"
                                                        id="plantHouseKeepingRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{plantHouseKeepingRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>3.</td>
                                                <td>Handling of complaints</td>
                                                <td><textarea required="required" name="handlingComplaints"
                                                              id="handlingComplaints"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{handlingComplaints}"></textarea></td>
                                                <td><textarea name="handlingComplaintsRemarks"
                                                              id="handlingComplaintsRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{handlingComplaintsRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>4.</td>
                                                <td>Quality control personnel competence records (Academic/professional/experience)</td>
                                                <td><textarea required="required" name="qualityControlPersonnel"
                                                              id="qualityControlPersonnel"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{qualityControlPersonnel}"></textarea></td>
                                                <td><textarea name="qualityControlPersonnelRemarks"
                                                              id="qualityControlPersonnelRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{qualityControlPersonnelRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>5.</td>
                                                <td>Testing Facility (In-house or external laboratory used)</td>
                                                <td><textarea required="required" name="testingFacility"
                                                              id="testingFacility"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{testingFacility}"></textarea>
                                                </td>
                                                <td><textarea
                                                        name="testingFacilityRemarks"
                                                        id="testingFacilityRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{testingFacilityRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>6.</td>
                                                <td>Equipment calibration/verification</td>
                                                <td><textarea required="required" name="equipmentCalibration"
                                                              id="equipmentCalibration"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{equipmentCalibration}"></textarea>
                                                </td>
                                                <td><textarea
                                                        name="equipmentCalibrationRemarks"
                                                        id="equipmentCalibrationRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{equipmentCalibrationRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="qpsmsBtn1"
                                         th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1}">
                                        <div class="form-group">
                                            <!--                                            <div class="col-md-4 mb-3">-->
                                            <!--                                                <button class="btn btn-primary" id="check1"-->
                                            <!--                                                        onclick="validationFunction('validateISPTESTINGDetails');"-->
                                            <!--                                                        type="button">Validate form-->
                                            <!--                                                </button>-->
                                            <!--                                            </div>-->
                                            <div class="col-md-4 mb-3">
                                                <button class="btn btn-primary"
                                                        onclick="validationFunction('validateISPTESTINGDetails');"
                                                        id="mySubmit1" type="submit">
                                                    Save
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <button class="accordion">STANDARDIZATION MARK SCHEME</button>
                            <div class="panel">
                                <form id="myForm2"
                                      th:action="@{/api/qa/kebs/add/new-qpsms-details/save(permitID=${permit?.Id})}"
                                      method="post" th:object="${QaInspectionTechnicalEntity}">
                                    <div class="row-table ">
                                        <input type="hidden" id="idTechnical2" name="id"
                                               th:value="${QaInspectionTechnicalEntity?.id}">
                                        <table id="qpsms2" class="table table-striped table-bordered"
                                               style="width:100%">
                                            <thead>
                                            <tr>
                                                <th>S/No.</th>
                                                <th>Aspects Checked</th>
                                                <th>Details of Findings</th>
                                                <th>Remarks</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="list" style="cursor: pointer">
                                                <td>1.</td>
                                                <td>Validity of S-Mark permit(s)</td>
                                                <td><textarea required="required" name="validitySmarkPermit"
                                                              id="validitySmarkPermit"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{validitySmarkPermit}"></textarea></td>
                                                <td><textarea name="validitySmarkPermitRemarks"
                                                              id="validitySmarkPermitRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{validitySmarkPermitRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>2.</td>
                                                <td>Use of the S-Mark</td>
                                                <td><textarea required="required" name="useTheSmark" id="useTheSmark"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{useTheSmark}"></textarea></td>
                                                <td><textarea name="useTheSmarkRemarks"
                                                              id="useTheSmarkRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{useTheSmarkRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>3.</td>
                                                <td>Are there changes affecting product certification? If yes, give
                                                    details
                                                </td>
                                                <td><textarea required="required"
                                                              name="changesAffectingProductCertification"
                                                              id="changesAffectingProductCertification"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{changesAffectingProductCertification}"></textarea>
                                                </td>
                                                <td><textarea
                                                        name="changesAffectingProductCertificationRemarks"
                                                        id="changesAffectingProductCertificationRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{changesAffectingProductCertificationRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>4.</td>
                                                <td>Have the changes been communicated to KEBS?</td>
                                                <td><textarea required="required" name="changesBeenCommunicatedKebs"
                                                              id="changesBeenCommunicatedKebs"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{changesBeenCommunicatedKebs}"></textarea></td>
                                                <td><textarea
                                                        name="changesBeenCommunicatedKebsRemarks"
                                                        id="changesBeenCommunicatedKebsRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{changesBeenCommunicatedKebsRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>5.</td>
                                                <td>Samples drawn</td>
                                                <td><textarea required="required" name="samplesDrawn" id="samplesDrawn"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{samplesDrawn}"></textarea></td>
                                                <td><textarea name="samplesDrawnRemarks"
                                                              id="samplesDrawnRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{samplesDrawnRemarks}"></textarea></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="qpsmsBtn2"
                                         th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1}">
                                        <div class="form-group">
                                            <!--                                            <div class="col-md-4 mb-3">-->
                                            <!--                                                <button class="btn btn-primary" id="check2"-->
                                            <!--                                                        onclick="validationFunction('validateSMSDetails');"-->
                                            <!--                                                        type="button">Validate form-->
                                            <!--                                                </button>-->
                                            <!--                                            </div>-->
                                            <div class="col-md-4 mb-3">
                                                <button class="btn btn-primary"
                                                        onclick="validationFunction('validateSMSDetails');"
                                                        id="mySubmit2" type="submit">
                                                    Save
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <button class="accordion">ANNEX I: OPERATION PROCESS AND CONTROLS</button>
                            <div class="panel">
                                &nbsp;
                                <div id="qpsmsBtn3"
                                     th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1}">
                                    <div class="form-row">
                                        <div class="col-md-6 mb-3">
                                            <button id="addRawMaterials" class="btn btn-primary"
                                                    onclick="popUpFunctionAddRawMaterials('addOPCDetails');"
                                                    type="button">ADD DETAILS
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                &nbsp;
                                <div class="row-table ">
                                    <table id="qpsms3" class="table table-striped table-bordered" style="width:100%">
                                        <thead>
                                        <tr>
                                            <!--                                            <th>S/NO.</th>-->
                                            <th>PROCESS FLOW</th>
                                            <th>OPERATIONS</th>
                                            <th>QUALITY CHECKS</th>
                                            <th>FREQUENCY</th>
                                            <th>RECORDS</th>
                                            <th>FINDINGS</th>
                                            <th>ACTIONS</th>

                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="list" th:each="OPCDetails: ${OPCDetailsList}"
                                            style="cursor: pointer">

                                            <td th:text="${OPCDetails.processFlow}"></td>
                                            <td th:text="${OPCDetails.operations}"></td>
                                            <td th:text="${OPCDetails.qualityChecks}"></td>
                                            <td th:text="${OPCDetails.frequency}"></td>
                                            <td th:text="${OPCDetails.records}"></td>
                                            <td th:text="${OPCDetails.findings}"></td>
                                            <td style="display: none" th:text="${OPCDetails.id}"></td>

                                            <td>
                                                <button class="btn-delete btn btn-primary"
                                                        name="editRawMaterials"
                                                        th:data-findings="${OPCDetails.findings}"
                                                        th:data-frequency="${OPCDetails.frequency}"
                                                        th:data-id="${OPCDetails.id}"
                                                        th:data-operations="${OPCDetails.operations}"
                                                        th:data-processFlow="${OPCDetails.processFlow}"
                                                        th:data-qualityChecks="${OPCDetails.qualityChecks}"
                                                        th:data-records="${OPCDetails.records}"
                                                        type="button">EDIT DETAILS
                                                </button>

                                                <!--                                                <button class="btn-delete" data-id="${OPCDetails.id}" data-processFlow="${OPCDetails.processFlow}" data-lastname="${row.lastname}">DEL</button>-->
                                            </td>

                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </div>

                            <button class="accordion">Annex II: HACCP IMPLEMENTATION</button>
                            <div class="panel">
                                <form id="myForm3"
                                      th:action="@{/api/qa/kebs/add/new-haccp-implementation/save(permitID=${permit?.Id},inspectionReportID=${QaInspectionReportRecommendationEntity.id})}"
                                      method="post">
                                    <div class="row-table" th:object="${QaInspectionHaccpImplementationEntity}">
                                        <input type="hidden" id="idTechnical3" name="id"
                                               th:value="${QaInspectionHaccpImplementationEntity?.id}">
                                        <table id="qpsms4" class="table table-striped table-bordered"
                                               style="width:100%">
                                            <thead>
                                            <tr>
                                                <th>S/No.</th>
                                                <th>Aspects Checked</th>
                                                <th>Details of Findings</th>
                                                <th>Status of compliance</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            <tr class="list" style="cursor: pointer">
                                                <td>1.</td>
                                                <td>Design & facilities-construction and layout of buildings and work
                                                    space.
                                                </td>
                                                <td><textarea required="required"
                                                              name="designFacilitiesConstructionLayout"
                                                              id="designFacilitiesConstructionLayout"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{designFacilitiesConstructionLayout}"></textarea>
                                                </td>
                                                <td><textarea
                                                        name="designFacilitiesConstructionLayoutRemarks"
                                                        id="designFacilitiesConstructionLayoutRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{designFacilitiesConstructionLayoutRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>2.</td>
                                                <td>Maintenance and sanitation- cleaning programs, pest control systems
                                                    and waste management.
                                                </td>
                                                <td><textarea required="required"
                                                              name="maintenanceSanitationCleaningPrograms"
                                                              id="maintenanceSanitationCleaningPrograms"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{maintenanceSanitationCleaningPrograms}"></textarea>
                                                </td>
                                                <td><textarea name="maintenanceSanitationCleaningProgramsRemarks"
                                                              id="maintenanceSanitationCleaningProgramsRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{maintenanceSanitationCleaningProgramsRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>3.</td>
                                                <td>Personnel hygiene</td>
                                                <td><textarea required="required" name="personnelHygiene"
                                                              id="personnelHygiene"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{personnelHygiene}"></textarea></td>
                                                <td><textarea name="personnelHygieneRemarks"
                                                              id="personnelHygieneRemarks" class="input-field w-input"
                                                              rows="5"
                                                              th:field="*{personnelHygieneRemarks}"></textarea></td>
                                            </tr>
                                            <tr class="list" style="cursor: pointer">
                                                <td>4.</td>
                                                <td>Transportation - conveyance & bulk container</td>
                                                <td><textarea required="required" name="transportationConveyance"
                                                              id="transportationConveyance" class="input-field w-input"
                                                              rows="5"
                                                              th:field="*{transportationConveyance}"></textarea></td>
                                                <td><textarea name="transportationConveyanceRemarks"
                                                              id="transportationConveyanceRemarks"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{transportationConveyanceRemarks}"></textarea>
                                                </td>
                                            </tr>

                                            <tr class="list" style="cursor: pointer">
                                                <td>5.</td>
                                                <td>Determination of Critical parameters to assure food safety and evidence of monitoring of the critical parameters.</td>
                                                <td><textarea required="required" name="determinationCriticalParameters"
                                                              id="determinationCriticalParameters"
                                                              class="input-field w-input" rows="5"
                                                              th:field="*{determinationCriticalParameters}"></textarea></td>
                                                <td><textarea name="determinationCriticalParametersRemarks"
                                                              id="determinationCriticalParametersRemarks" class="input-field w-input"
                                                              rows="5"
                                                              th:field="*{determinationCriticalParametersRemarks}"></textarea></td>
                                            </tr>

                                            <tr class="list" style="cursor: pointer">
                                                <td>6.</td>
                                                <td>Evidence of Corrective Actions for non-compliance</td>
                                                <td><textarea required="required" name="evidenceCorrectiveActions"
                                                              id="evidenceCorrectiveActions" class="input-field w-input"
                                                              rows="5"
                                                              th:field="*{evidenceCorrectiveActions}"></textarea></td>
                                                <td><textarea
                                                        name="evidenceCorrectiveActionsRemarks"
                                                        id="evidenceCorrectiveActionsRemarks"
                                                        class="input-field w-input" rows="5"
                                                        th:field="*{evidenceCorrectiveActionsRemarks}"></textarea>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div id="qpsmsBtn4"
                                         th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1}">
                                        <div class="form-group">
                                            <div class="col-md-4 mb-3">
                                                <!--                                                <button class="btn btn-primary" id="check3"-->
                                                <!--                                                        onclick="validationFunction('validateHACCPDetails');"-->
                                                <!--                                                        type="button">Validate form-->
                                                <!--                                                </button>-->
                                            </div>
                                            <div class="col-md-4 mb-3">
                                                <button class="btn btn-primary"
                                                        onclick="validationFunction('validateHACCPDetails');"
                                                        id="mySubmit3" type="submit">
                                                   Save
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <button class="accordion">3.0: FOLLOW UP ON PREVIOUS RECOMMENDATIONS/NONCONFORMITIES</button>
                            <div class="panel">
                                <ul class="w-list-unstyled">
                                    <li class="list-item-accordion">
                                        <p><span
                                                th:text="${QaInspectionReportRecommendationEntity?.followPreviousRecommendationsNonConformities}"></span>
                                        </p>
                                    </li>
                                </ul>
                            </div>

                            <button class="accordion">4.0: RECOMMENDATIONS</button>
                            <div class="panel">
                                <ul class="w-list-unstyled">
                                    <li class="list-item-accordion">
                                        <p><span
                                                th:text="${QaInspectionReportRecommendationEntity?.recommendations}"></span>
                                        </p>
                                    </li>
                                </ul>
                            </div>

                            <button class="accordion">Documents Attached Details</button>
                            <div class="panel">
                                <div class="row-table ">
                                    <table class="table table-striped">
                                        <thead>
                                        <tr>
                                            <th>File Name</th>
                                            <th>File Type</th>
                                            <th>Document Description</th>
                                            <th>Version Number</th>
                                            <th>View</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr class="list" th:each="fileParam: ${fileParameters}"
                                            style="cursor: pointer">

                                            <td th:text="${fileParam.name}"></td>
                                            <td th:text="${fileParam.fileType}"></td>
                                            <td th:text="${fileParam.documentType}"></td>
                                            <td th:text="${fileParam.versionNumber}"></td>
                                            <td><a th:href="@{/api/qa/kebs/view/attached(fileID=${fileParam.id})}"
                                                   target='_blank' class="btn btn-primary itemViewBtn">view</a></td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <button class="accordion">Inspector Details</button>
                            <div class="panel">
                                <ul class="w-list-unstyled">
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Inspector comments</div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <p><span
                                                th:text="${QaInspectionReportRecommendationEntity?.inspectorComments}"></span>
                                        </p>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Inspector:</div>
                                        <div class="list-text-accordion"
                                             th:text="${QaInspectionReportRecommendationEntity?.inspectorName}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Date:</div>
                                        <div class="list-text-accordion"
                                             th:text="${QaInspectionReportRecommendationEntity?.inspectorDate}"></div>
                                    </li>
                                </ul>
                            </div>

                            <button class="accordion">Supervisor Details</button>
                            <div class="panel">
                                <ul class="w-list-unstyled">
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Supervisor comments</div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <p><span
                                                th:text="${QaInspectionReportRecommendationEntity?.supervisorComments}"></span>
                                        </p>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Supervisor:</div>
                                        <div class="list-text-accordion"
                                             th:text="${QaInspectionReportRecommendationEntity?.supervisorName}"></div>
                                    </li>
                                    <li class="list-item-accordion">
                                        <div class="list-title-accordion">Date:</div>
                                        <div class="list-text-accordion"
                                             th:text="${QaInspectionReportRecommendationEntity?.supervisorDate}"></div>
                                    </li>
                                </ul>
                            </div>



                        </div>

                        <div class="filter-block">
                            <div class="filter-block-title">
                                <div class="filter-title">Document Details:</div>
                            </div>
                            <div>
                                <!--                            <a th:if="${permitType?.st3Status == 1 and QaSta10Entity?.sta3FilledStatus == 1}" target='_blank' th:href="@{/api/qa/view-sta3(permitID=${QaSta10Entity?.id})}" class="filter-link" style="color: white">STA 3</a>-->
                            </div>
                            <div class="filter-block-title">
                                <div class="filter-title">Action:</div>
                            </div>
                            <div>
                                <a style="color: white"
                                   th:href="@{/api/qa/permit-details(permitID=${permit?.encryptedPermitId})}"
                                   class="filter-link">GO TO PERMIT DETAILS</a>

                                <div sec:authorize="hasAuthority('QA_OFFICER_MODIFY')">
                                    <a th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1 and QaInspectionReportRecommendationEntity?.submittedInspectionReportStatus == null}"
                                       style="color: white"
                                       onclick="popUpFunctionAddRawMaterials('addRecommendationDetails');"
                                       class="filter-link">ADD RECOMMENDATION</a>

                                    <a th:if="${QaInspectionReportRecommendationEntity?.filledQpsmsStatus == 1 and QaInspectionReportRecommendationEntity?.submittedInspectionReportStatus == null}"
                                       class="filter-link" onclick="popUpUploadFunction('uploadAttachments');"
                                       style="color: white">UPLOAD ATTACHMENTS</a>
                                    <!--                                    <a th:if="${permit?.sta10FilledStatus != 1 and QaSta10Entity?.closedProduction == 1 and QaSta10Entity?.closedRawMaterials == 1 and QaSta10Entity?.closedMachineryPlants == 1 and QaSta10Entity?.closedManufacturingProcesses == 1 }"  th:href="@{/api/qa/new-sta10-submit(permitID=${permit?.id})}" class="filter-link" style="color: white">SUBMIT STA10</a>-->
                                </div>
                                <div sec:authorize="hasAuthority('QA_MANAGER_MODIFY') or hasAuthority('QA_HOF_MODIFY') or hasAuthority('QA_HOD_MODIFY') or hasAuthority('QA_RM_MODIFY')">
                                    <a th:if="${QaInspectionReportRecommendationEntity?.submittedInspectionReportStatus == 1 and QaInspectionReportRecommendationEntity?.supervisorFilledStatus == null}"
                                       style="color: white"
                                       onclick="popUpFunctionAddRawMaterials('addSupervisorDetails');"
                                       class="filter-link">APPROVE/REJECT</a>
                                    <!--                                    <a th:if="${permit?.sta10FilledStatus != 1 and QaSta10Entity?.closedProduction == 1 and QaSta10Entity?.closedRawMaterials == 1 and QaSta10Entity?.closedMachineryPlants == 1 and QaSta10Entity?.closedManufacturingProcesses == 1 }"  th:href="@{/api/qa/new-sta10-submit(permitID=${permit?.id})}" class="filter-link" style="color: white">SUBMIT STA10</a>-->
                                </div>

                            </div>

                        </div>

                        <div class="rawMaterialsForm" id="rawMaterialsForm">
                            <form id="rawMaterialsForm-Form" name="rawMaterialsForm-Form" method="post">
                                <div class="modal fade" id="rawMaterialsFormModal" name="rawMaterialsFormModal"
                                     role="dialog" tabindex="-1"
                                     aria-labelledby="rawMaterialsFormLable"
                                     aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 style="font-weight: bold; " class="modal-title"
                                                    id="rawMaterialsFormLable"><span id="spanValueRM">none</span></h5>
                                                <button aria-label="Close" class="close" data-dismiss="modal"
                                                        onClick="refreshPage()" type="button"><span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <div id="addOPCDetails" th:object="${QaInspectionOpcEntity}">
                                                        <!--                                                        <input type="hidden" id="idOCP" name="id" th:value="${QaInspectionOpcEntity?.id}">-->
                                                        <label for="processFlow" class="col-form-label">PROCESS
                                                            FLOW</label>
                                                        <textarea required="required" name="processFlow"
                                                                  id="processFlow" class="input-field w-input" cols="10"
                                                                  rows="5" th:field="*{processFlow}"></textarea>
                                                        <label for="operations"
                                                               class="col-form-label">OPERATIONS</label>
                                                        <textarea required="required" name="operations" id="operations"
                                                                  class="input-field w-input" rows="5"
                                                                  th:field="*{operations}"></textarea>
                                                        <label for="qualityChecks" class="col-form-label">QUALITY
                                                            CHECKS</label>
                                                        <textarea required="required" name="qualityChecks"
                                                                  id="qualityChecks" class="input-field w-input"
                                                                  rows="5"
                                                                  th:field="*{qualityChecks}"></textarea>
                                                        <label for="frequency" class="col-form-label">FREQUENCY</label>
                                                        <textarea required="required" name="frequency" id="frequency"
                                                                  class="input-field w-input" rows="5"
                                                                  th:field="*{frequency}"></textarea>
                                                        <label for="records" class="col-form-label">RECORDS</label>
                                                        <textarea required="required" name="records" id="records"
                                                                  class="input-field w-input" rows="5"
                                                                  th:field="*{records}"></textarea>
                                                        <label for="findings" class="col-form-label">FINDINGS</label>
                                                        <textarea required="required" name="findings" id="findings"
                                                                  class="input-field w-input" rows="5"
                                                                  th:field="*{findings}"></textarea>
                                                    </div>


                                                    <div id="addRecommendationDetails"
                                                         th:object="${QaInspectionReportRecommendationEntity}">
                                                        <input type="hidden" id="idRecommendation" name="id"
                                                               th:value="${QaInspectionReportRecommendationEntity?.id}">
                                                        <input type="hidden" id="submittedInspectionReportStatus"
                                                               name="submittedInspectionReportStatus"
                                                               th:value="${activeStatus}">
                                                        <input type="hidden" id="description2" name="description"
                                                               th:value="'Recommendation was added successfull and was send'">
                                                        <label for="followPreviousRecommendationsNonConformities" class="col-form-label">FOLLOW UP ON PREVIOUS RECOMMENDATIONS/NONCONFORMITIES</label>
                                                        <textarea name="followPreviousRecommendationsNonConformities"
                                                                  id="followPreviousRecommendationsNonConformities" class="input-field w-input"
                                                                  cols="65" rows="5"
                                                                  th:field="*{followPreviousRecommendationsNonConformities}"></textarea>
                                                        <label for="recommendations" class="col-form-label">RECOMMENDATIONS</label>
                                                        <textarea required="required" name="recommendations"
                                                                  id="recommendations" class="input-field w-input"
                                                                  cols="65" rows="5"
                                                                  th:field="*{recommendations}"></textarea>
                                                        <label for="inspectorComments" class="col-form-label">INSPECTOR
                                                            COMMENTS</label>
                                                        <textarea required="required" name="inspectorComments"
                                                                  id="inspectorComments" class="input-field w-input"
                                                                  cols="65" rows="5"
                                                                  th:field="*{inspectorComments}"></textarea>
                                                        <label for="inspectorName" class="col-form-label">INSPECTOR
                                                            NAME</label>
                                                        <input type="hidden" id="inspectorName2" name="inspectorName"
                                                               th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                                        <input class="input-field w-input" max="20" id="inspectorName"
                                                               name="inspectorName"
                                                               th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}"
                                                               disabled>
                                                        <label for="inspectorName" class="col-form-label">DATE</label>
                                                        <input type="hidden" id="inspectorDate2" name="inspectorDate"
                                                               th:value="${currentDate}">
                                                        <input class="input-field w-input" max="20" id="inspectorDate"
                                                               name="inspectorDate" th:value="${currentDate}" disabled>
                                                    </div>

                                                    <div id="addSupervisorDetails"
                                                         th:object="${QaInspectionReportRecommendationEntity}">
                                                        <input type="hidden" id="idRecommendation2" name="id"
                                                               th:value="${QaInspectionReportRecommendationEntity?.id}">
                                                        <input type="hidden" id="supervisorFilledStatus"
                                                               name="supervisorFilledStatus" th:value="${activeStatus}">
                                                        <input type="hidden" id="description" name="description"
                                                               th:value="'Comments added succesful'">
                                                        <label for="approvedRejectedStatus" class="col-form-label">APPROVE/REJECT</label>
                                                        <select id="approvedRejectedStatus" required
                                                                name="approvedRejectedStatus"
                                                                class="select-field w-select"
                                                                th:field="*{approvedRejectedStatus}">
                                                            <option th:text="'Select one.....'"
                                                                    th:value="null"></option>
                                                            <option th:text="'Approve'" th:value="1"></option>
                                                            <option th:text="'Reject'" th:value="0"></option>
                                                        </select>
                                                        <label for="supervisorComments" class="col-form-label">SUPERVISOR
                                                            COMMENTS</label>
                                                        <textarea required="required" name="supervisorComments"
                                                                  id="supervisorComments" class="input-field w-input"
                                                                  cols="65" rows="5"
                                                                  th:field="*{supervisorComments}"></textarea>
                                                        <label for="supervisorName" class="col-form-label">SUPERVISOR
                                                            NAME</label>
                                                        <input type="hidden" id="supervisorName2" name="supervisorName"
                                                               th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                                        <input class="input-field w-input" max="20" id="supervisorName"
                                                               name="supervisorName"
                                                               th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}"
                                                               disabled>
                                                        <label for="supervisorDate" class="col-form-label">DATE</label>
                                                        <input type="hidden" id="supervisorDate2" name="supervisorDate"
                                                               th:value="${currentDate}">
                                                        <input class="input-field w-input" max="20" id="supervisorDate"
                                                               name="supervisorDate" th:value="${currentDate}" disabled>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-secondary" data-dismiss="modal"
                                                        onClick="refreshPage()"
                                                        type="button">Close
                                                </button>
                                                <input type="submit" id="saveValueRM" class="btn btn-primary"
                                                       value="Save"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>


                        <div class="rawMaterialsFormb" id="rawMaterialsFormb">

                            <div class="modal fade" id="rawMaterialsFormModalb" name="rawMaterialsFormModal"
                                 role="dialog" tabindex="-1"
                                 aria-labelledby="rawMaterialsFormLable"
                                 aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 style="font-weight: bold; " class="modal-title"
                                                id="rawMaterialsFormLableb"><span id="spanValueRMb">
                                                    Edit the duly filled Annexes here below as signed with the firm. Include the findings during inspection (See Annex I& II as appropriate):</span>
                                            </h5>
                                            <button aria-label="Close" class="close" data-dismiss="modal"
                                                    onClick="refreshPage()" type="button"><span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="form-group">
                                                <form id="rawMaterialsForm-Formb" name="rawMaterialsForm-Form"
                                                      method="post" action="#"

                                                >
<!--                                                    th:action="@{/api/qa/kebs/add/new-opc-details/update(permitID = ${permit?.id},inspectionReportID = ${QaInspectionReportRecommendationEntity?.id})}"-->

                                                    <div id="editOPCDetails" th:object="${QaInspectionOpcEntity}">
                                                        <!--                                                        <input type="hidden" id="idOCP" name="id" th:value="${QaInspectionOpcEntity?.id}">-->
                                                        <label class="col-form-label" for="processFlow">PROCESS
                                                            FLOW</label>
                                                        <textarea class="input-field w-input" cols="10"
                                                                  id="processFlowEdit" name="processFlow"
                                                                  required="required"
                                                                  rows="5" th:field="*{processFlow}"
                                                                  data-value="processFlowEdit"
                                                        ></textarea>
                                                        <label class="col-form-label"
                                                               for="operations">OPERATIONS</label>
                                                        <textarea class="input-field w-input" id="operationsEdit"
                                                                  name="operations"
                                                                  required="required" rows="5"
                                                                  th:field="*{operations}"
                                                                  data-th-value="operations"
                                                                  data-value="operationsEdit"

                                                        ></textarea>
                                                        <label class="col-form-label" for="qualityChecks">QUALITY
                                                            CHECKS</label>
                                                        <textarea class="input-field w-input" id="qualityChecksEdit"
                                                                  name="qualityChecks" required="required"
                                                                  rows="5"
                                                                  th:field="*{qualityChecks}"
                                                                  data-value="qualityChecksEdit"
                                                        ></textarea>
                                                        <label class="col-form-label" for="frequency">FREQUENCY</label>
                                                        <textarea class="input-field w-input" id="frequencyEdit"
                                                                  name="frequency"
                                                                  required="required" rows="5"
                                                                  data-th-value="frequency"
                                                                  data-value="frequencyEdit"

                                                                  th:field="*{frequency}"></textarea>
                                                        <label class="col-form-label" for="records">RECORDS</label>
                                                        <textarea class="input-field w-input" id="recordsEdit"
                                                                  name="records"
                                                                  required="required" rows="5"
                                                                  data-th-value="records"
                                                                  data-value="recordsEdit"

                                                                  th:field="*{records}"></textarea>
                                                        <label class="col-form-label" for="findings">FINDINGS</label>
                                                        <textarea class="input-field w-input" id="findingsEdit"
                                                                  name="findings"
                                                                  required="required" rows="5"
                                                                  data-th-value="findings"
                                                                  data-value="findingsEdit"

                                                                  th:field="*{findings}"></textarea>
                                                        <input id="rowIdEdit"
                                                               th:field="*{id}"
                                                               name="id" data-value="rowIdEdit"
                                                               type="hidden" value="">
                                                    </div>
                                                    <br>
                                                    <input type="submit" id="saveValueRMb" class="btn btn-primary"
                                                           value="EDIT"/>
                                                </form>

                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button class="btn btn-secondary" data-dismiss="modal"
                                                    type="button">Close
                                            </button>


                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>


                        <div class="uploadForm">
                            <form id="upload-form" enctype="multipart/form-data" name="upload-form"
                                  th:action="@{/api/qa/kebs/add/new-upload(permitID = ${permit?.id},inspectionReportID = ${QaInspectionReportRecommendationEntity?.id})}"
                                  method="post">
                                <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog"
                                     aria-labelledby="uploadModalLabel" aria-hidden="true">
                                    <div class="modal-dialog" role="document">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 style="font-weight: bold; " class="modal-title"
                                                    id="uploadModalLabel"><span id="spanValueUpload">none</span></h5>
                                                <button type="button" class="close" data-dismiss="modal"
                                                        aria-label="Close"><span aria-hidden="true">&times;</span>
                                                </button>
                                            </div>
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <div id="uploadAttachments">
                                                        <input type="hidden" id="manufactureNonStatus"
                                                               name="manufactureNonStatus" th:value="${inActiveStatus}">
                                                        <input type="hidden" id="ordinaryStatus1" name="ordinaryStatus"
                                                               th:value="${inActiveStatus}">
                                                        <input type="hidden" id="inspectionReportStatus1"
                                                               name="inspectionReportStatus" th:value="${activeStatus}">
                                                        <label for="docFileName" class="col-form-label">Description Of
                                                            Attachment(s):</label>
                                                        <input class="input-field w-input" max="20" id="docFileName"
                                                               name="docFileName" th:required="required">
                                                        <label for="doc_file">Upload your Attachments</label>
                                                        <input type="file" class="form-control" multiple name="doc_file"
                                                               data-name="doc_file" id="doc_file" required="required">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="modal-footer">
                                                <button class="btn btn-secondary" data-dismiss="modal"
                                                        onClick="refreshPage()" type="button">Close
                                                </button>
                                                <input type="submit" id="upload-1" class="btn btn-primary"
                                                       value="Save"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </section>
    </div>
</div>
<div th:replace="fragments/general-form.html :: scripts"></div>
<script>
    document.onreadystatechange = function () {
        showSpinnerOnLoad(document)
    }

    function loadSpinner() {
        showSpinner(document)
    }
</script>
<script>
    var acc = document.getElementsByClassName("accordion");
    // var btn = document.getElementsByClassName("button w-button eBtn");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function () {
            this.classList.toggle("active");
            this.style.border = "none";
            // this.style.position = "sticky"
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                // panel.style.position = "-webkit-sticky"
                // panel.style.position = "sticky"
            }
        });
    }


</script>
<script>
    $(document).ready(function () {
        var table = $('#example').DataTable({
            lengthChange: false,
            buttons: ['copy', 'excel', 'pdf', 'colvis']
        });

        table.buttons().container()
            .appendTo('#example_wrapper .col-sm-6:eq(0)');
    });
</script>
<script>

    //edit data
    $('document').ready(function () {
        $(document).on('click', '.btn-delete', function () {
            //clone dialog and remove ids to ensure uniqueness
            let $modal = $('.rawMaterialsFormb #rawMaterialsFormModalb').clone();
            //apply custom values where needed
            let $btn = $(this);
            let rowId = $btn.attr('data-id');
            let processFlow = $btn.attr('data-processFlow');
            let operations = $btn.attr('data-operations');
            let qualityChecks = $btn.attr('data-qualityChecks');
            let frequency = $btn.attr('data-frequency');
            let records = $btn.attr('data-records');
            let findings = $btn.attr('data-findings');
            let permitID = $("#permitIDValue").val();
            let inspectionReportID = $("#inspectionReportIDValue").val();

            $modal.find('[data-value="rowIdEdit"]').text(rowId);
            $modal.find('[data-value="processFlowEdit"]').text(processFlow);
            $modal.find('[data-value="operationsEdit"]').text(operations);
            $modal.find('[data-value="qualityChecksEdit"]').text(qualityChecks);
            $modal.find('[data-value="frequencyEdit"]').text(frequency);
            $modal.find('[data-value="recordsEdit"]').text(records);
            $modal.find('[data-value="findingsEdit"]').text(findings);
            $modal.find('form').attr('action', `/api/qa/kebs/add/new-opc-details/update?permitID=${permitID}&inspectionReportID=${inspectionReportID}&ID=${rowId}`);
            // //show dialog
            // let permitID = $("#permitIDValue").val();
            // let inspectionReportID = $("#inspectionReportIDValue").val();
            //
            //
            // $('#rawMaterialsForm-Formb').attr('action', `/api/qa/kebs/add/new-opc-details/update?permitID=${permitID}&inspectionReportID=${inspectionReportID}&ID=${rowId}`);
            // document.getElementById('spanValueRMb').innerHTML =
            //     "Edit the duly filled Annexes here below as signed with the firm. Include the findings during inspection (See Annex I& II as appropriate):"
            // ;
            // document.getElementById("saveValueRMb").value = 'Edit';

            // $('.rawMaterialsForm #rawMaterialsFormModal').modal({backdrop: 'static', keyboard: false});
            $modal.modal();
        })
    })
</script>
<script>

    $("#mySubmit").click(function () {
        let allAreFilled = true;
        document.getElementById("myForm").querySelectorAll("[required]").forEach(function (i) {
            if (!allAreFilled) return;
            let inputID = `#${i.id}`
            if (!i.value) {
                $(inputID).addClass('error');
                allAreFilled = false;
            }
            if (i.value) {
                $(inputID).removeClass('error');
            }
            if (i.type === "radio") {
                let radioValueCheck = false;
                document.getElementById("myForm").querySelectorAll(`[name=${i.name}]`).forEach(function (r) {
                    if (r.checked) radioValueCheck = true;
                })
                allAreFilled = radioValueCheck;
            }

        })

        if ($('#sectionId').val() == -1) {
            $('#sectionId').addClass('error');
            allAreFilled = false;
            return false;
        } else {
            $('#sectionId').removeClass('error');
            return true;
        }

        if ($('#permitForeignStatus').val() == -1) {
            $('#permitForeignStatus').addClass('error');
            allAreFilled = false;
            return false;
        } else {
            $('#permitForeignStatus').removeClass('error');
            return true;
        }

        if (!allAreFilled) {
            // alert('Fill all the fields');
        } else {
            return true;
        }
    });

    function validationFunction(eventAction) {

        let arrHead = ['validateQPAMSDetails', 'validateISPTESTINGDetails', 'validateSMSDetails', 'validateHACCPDetails'];
        let arrHeadValues = [
            {
                "myFormValue": "myForm",
                "check": "#check",
                "mySubmitValue": "#mySubmit",
            },
            {
                "myFormValue": "myForm1",
                "check": "#check1",
                "mySubmitValue": "#mySubmit1",
            },
            {
                "myFormValue": "myForm2",
                "check": "#check2",
                "mySubmitValue": "#mySubmit2",
            },
            {
                "myFormValue": "myForm3",
                "check": "#check3",
                "mySubmitValue": "#mySubmit3",
            },

        ]

        for (let h = 0; h < arrHead.length; h++) {
            if (eventAction === arrHead[h]) {
                let allAreFilled = true;
                document.getElementById(arrHeadValues[h].myFormValue).querySelectorAll("[required]").forEach(function (i) {
                    console.log(arrHeadValues[h].myFormValue)
                    if (!allAreFilled) return;
                    let inputID = `#${i.id}`
                    if (!i.value) {
                        $(inputID).addClass('error');
                        allAreFilled = false;
                    }
                    if (i.value) {
                        $(inputID).removeClass('error');
                    }
                    if (i.type === "radio") {
                        let radioValueCheck = false;
                        document.getElementById(arrHeadValues[h].myFormValue).querySelectorAll(`[name=${i.name}]`).forEach(function (r) {
                            if (r.checked) radioValueCheck = true;
                        })
                        allAreFilled = radioValueCheck;
                    }
                })
                if (!allAreFilled) {
                    // alert('Fill all the fields');
                } else {
                    return true;
                    // $(arrHeadValues[h].check).attr("disabled", "disabled");
                    // $(arrHeadValues[h].mySubmitValue).removeAttr("disabled");
                }
            }
        }
    }


    function popUpFunctionAddRawMaterials(eventAction) {

        let permitID = $("#permitIDValue").val();
        let inspectionReportID = $("#inspectionReportIDValue").val();
        let arrHead = ['addOPCDetails', 'addRecommendationDetails', 'addSupervisorDetails'];
        let arrHeadAndAction = [
            {
                "head": "Attach duly filled Annexes here below as signed with the firm. Include the findings during inspection (See Annex I& II as appropriate):",
                "action": `/api/qa/kebs/add/new-opc-details/save?permitID=${permitID}&inspectionReportID=${inspectionReportID}`,
            },
            {
                "head": "Please fill the details below",
                "action": `/api/qa/kebs/add/new-recommendation-details/save?permitID=${permitID}&inspectionReportID=${inspectionReportID}`,
            },
            {
                "head": "Please fill the details below",
                "action": `/api/qa/kebs/add/new-recommendation-details/save?permitID=${permitID}&inspectionReportID=${inspectionReportID}`,
            }]


        for (let h = 0; h < arrHead.length; h++) {
            if (eventAction !== arrHead[h]) {
                document.getElementById(arrHead[h]).remove();
            } else {
                if (eventAction === arrHead[h]) {
                    $('#rawMaterialsForm-Form').attr('action', arrHeadAndAction[h].action);
                    document.getElementById('spanValueRM').innerHTML = arrHeadAndAction[h].head;
                    document.getElementById("saveValueRM").value = 'submit';
                }
            }
        }

        $('.rawMaterialsForm #rawMaterialsFormModal').modal({backdrop: 'static', keyboard: false});
    }


    function popUpUploadFunction(eventAction) {
        let arrHead = ['uploadAttachments'];
        let arrHeadSave = ['Upload document And Give The Name'];

        for (let h = 0; h < arrHead.length; h++) {
            if (eventAction !== arrHead[h]) {
                document.getElementById(arrHead[h]).remove();
            } else {
                if (eventAction === arrHead[h]) {
                    document.getElementById('spanValueUpload').innerHTML = arrHeadSave[h];
                    document.getElementById("upload-1").value = 'Save';
                }
            }
        }

        $('.uploadForm #uploadModal').modal();
    }

    function refreshPage() {
        window.location.reload();
    }

    function valueCheck() {
        let checkStatus = $("#messageValue").val();
        console.log(checkStatus)
        if (checkStatus === 'VIEW_PAGE') {
            $("#myForm :input").prop("readonly", true);
            $("#myForm1 :input").prop("readonly", true);
            $("#myForm2 :input").prop("readonly", true);
            $("#myForm3 :input").prop("readonly", true);
            $("#qpsmsBtn").remove()
            $("#qpsmsBtn1").remove()
            $("#qpsmsBtn2").remove()
            $("#qpsmsBtn3").remove()
            $("#qpsmsBtn4").remove()
        }else if(checkStatus === 'CLONE_PAGE'){

        }

    }

    window.onload = function () {
        setTimeout(function () {
            valueCheck();
        }, 1000);
    }

</script>

<!--Autosaving for inspection report-->

<script>
    const textareas = document.querySelectorAll("textarea");

    textareas.forEach(textarea => {
        textarea.addEventListener("input", function() {
            localStorage.setItem(this.id, this.value);
        });

        const storedValue = localStorage.getItem(textarea.id);
        if (storedValue) {
            textarea.value = storedValue;
        }
    });
</script>

</body>
</html>


