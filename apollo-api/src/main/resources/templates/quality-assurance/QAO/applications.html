<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e7130c996c4ca37928b351f" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html :: headerfiles"/>
    <link rel="stylesheet" th:href="@{/css/extra.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/pageLoad.css}" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.22/css/dataTables.bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.6.4/css/buttons.bootstrap.min.css"/>

    <!-- Font Awesome -->
    <link href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" rel="stylesheet"/>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/2.2.1/mdb.min.css" rel="stylesheet"/>
</head>
<body>
<div id ="spinnerContainer">
    <div class="spinner"></div>
</div>
<div class="top-bar" th:replace="fragments/general-form.html :: top-bar">

</div>
<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d"
             th:replace="fragments/general-form.html :: side-navigation-bar"></div>
        <div id="w-node-27962c2db181-c676b3e3" class="main-content-div">
            <!--                        <div class="content-nav" th:replace="fragments/general-form.html :: content-navigation-bar"></div>-->
            <div class="content-nav">
                <div th:if="${permitApplications}" class="dropdown">
                    <div onclick="myFunction()" class="dropbtn"><i class="fa fa-bell" aria-hidden="true"></i> <span
                            th:text="${#lists.size(tasks)}"></span></div>
                    <div id="myDropdown" class="dropdown-content">
                        <input type="text" placeholder="Search.." id="myInput" onkeyup="filterFunction()">
                        <small th:each="task: ${tasks}">
                            <a th:href="@{/api/qao/application/details/{id}(id=${task.permitId})}"
                               th:text="${task.permitId}"><i class="fa fa-bell special-block" aria-hidden="true"></i><i
                                    class="fa fa-window-close special-block" aria-hidden="true"></i></a>
                        </small>

                    </div>
                </div>
                <a class="back-button w-button" onclick="goBack()" href="#">go back</a>
            </div>

            <div class="content-wrap">
                <div class="content-container">
                    <div th:replace="fragments/general-form.html :: alerts-bar"></div>
                    <h1 th:if="${permitApplications}">Permit Applications</h1>
                    <h1 th:if="${workplans}">My Workplans</h1>
                    <div class="content-block">
                        <div class="content-block-parent">

                            <div th:if="${permitApplications}" class="row-table ">
                                <table id="example" class="table table-striped table-bordered" style="width:100%">
                                    <thead>
                                    <tr>
                                        <th>REF No.</th>
                                        <th>Products</th>
                                        <th>Application date</th>
                                        <th>Manufacturer name</th>
                                        <th>View</th>
                                        <!--                                        <th>View</th>-->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!--                <a th:each="coc, iStat: ${cocs}" th:href="@{/api/inspection/supervisor/coc-details/{id}(id=${coc.id})}" class="table-row w-inline-block">-->
                                    <tr class="list" th:each="app, iStat: ${permitApplications}"
                                        style="cursor: pointer">
                                        <td th:text="${app?.id}"></td>
                                        <td th:text="${app?.tradeMark}"></td>
                                        <td th:text="${#dates.format(app?.dateCreated, 'dd/MM/yyyy')}"></td>
                                        <td th:text="${app?.manufacturerEntity?.name}"></td>
                                        <td><a class="btn btn-info"
                                               th:href="@{/api/qao/application/details/{id}(id = ${app.id})}" th:onclick="'loadSpinner();'">view</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div th:if="${workplans}" class="row-table ">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th>REF No.</th>
                                        <th>Date Created</th>
                                        <th>Permits</th>
                                        <th>View</th>
                                        <!--                                        <th>View</th>-->
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!--                <a th:each="coc, iStat: ${cocs}" th:href="@{/api/inspection/supervisor/coc-details/{id}(id=${coc.id})}" class="table-row w-inline-block">-->
                                    <tr class="list" th:each="workplan, iStat: ${workplans}" style="cursor: pointer">
                                        <td th:text="${workplan?.id}"></td>
                                        <td th:text="${#dates.format(workplan?.createdOn, 'dd/MM/yyyy')}"></td>
                                        <td th:text="${workplan?.permits}"></td>
                                        <td><a class="btn btn-info" target="_blank" th:href="@{/api/qao/workplan(whereTo='single_workplan', workplanId=${workplan.id})}">view</a>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div th:if="${permitApplications} and ${totalPages > 0}" class=class="pagenation-block"
                                 th:each="pageNumber : ${pageNumbers}">
                                <a class="button w-button"
                                   th:href="@{/api/qao/applications(page=1,records=10,appId=199)}"
                                   th:text="${pageNumber}">Next</a>
                            </div>

                            <div th:if="${workplans} and ${totalPages > 0}" class=class="pagenation-block"
                                 th:each="pageNumber : ${pageNumbers}">
                                <a class="button w-button"
                                   th:href="@{/api/qao/applications(page=1,records=10,appId=199)}"
                                   th:text="${pageNumber}">Next</a>
                            </div>

                            <!--                            <div>-->
                            <!--                                <div class="exemption-application-list customer">-->
                            <!--&lt;!&ndash;                                    <h4>REF No.</h4>&ndash;&gt;-->
                            <!--                                    <h4>Permit Id</h4>-->
                            <!--                                    <h4>Owner</h4>-->
                            <!--                                    <h4>Assignee</h4>-->
                            <!--                                    <h4>Action</h4>-->
                            <!--                                </div>-->
                            <!--                                <a th:each="my_task, iStat: ${tasks}" th:href="@{#}">-->
                            <!--                                    <div class="exemption-application-list customer">-->
                            <!--&lt;!&ndash;                                        <div style="color: black">1</div>&ndash;&gt;-->
                            <!--                                        <td style="color: black" th:text="${my_task.permitId}"></td>-->
                            <!--                                        <td style="color: black" th:text="${my_task.task.owner}"></td>-->
                            <!--                                        <td style="color: black" th:text="${my_task.task.assignee}"></td>-->
                            <!--                                    </div>-->
                            <!--                                </a>-->

                            <!--                            </div>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/assets/js/webflow.js}" type="text/javascript"></script>
<script th:src="@{/js/extra.js}" type="javascript"></script>
<script th:src="@{/js/spinner.js}" type="text/javascript"></script>

<script src="https://code.jquery.com/jquery-3.5.1.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap.min.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.4/js/dataTables.buttons.min.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.bootstrap.min.js" ></script>
<!-- MDB -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/2.2.1/mdb.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" type="text/javascript" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js" type="text/javascript" ></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.html5.min.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.print.min.js" type="text/javascript" ></script>
<script src="https://cdn.datatables.net/buttons/1.6.4/js/buttons.colVis.min.js" type="text/javascript" ></script>
<script src="../assets/js/webflow.js" type="text/javascript"></script>

<script>
    $(document).ready(function() {
        var table = $('#example').DataTable( {
            lengthChange: false,
            buttons: [ 'copy', 'excel', 'pdf', 'colvis' ]
        } );

        table.buttons().container()
            .appendTo( '#example_wrapper .col-sm-6:eq(0)' );
    } );

    function myFunction() {
        document.getElementById("myDropdown").classList.toggle("show");
    }

    function filterFunction() {
        var input, filter, ul, li, a, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        div = document.getElementById("myDropdown");
        a = div.getElementsByTagName("a");
        for (i = 0; i < a.length; i++) {
            txtValue = a[i].textContent || a[i].innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                a[i].style.display = "";
            } else {
                a[i].style.display = "none";
            }
        }
    }

    document.onreadystatechange = function(){
        showSpinnerOnLoad(document)
    }

    function loadSpinner(){
        showSpinner(document)
    }

</script>
</body>
</html>

