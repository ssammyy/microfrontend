<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html:: headerfiles"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/accordion.css}"/>
    <link rel="stylesheet" th:href="@{/css/progressBar.css}"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
</head>
<body>
<div class="top-bar" th:replace="fragments/general-form.html :: top-bar"></div>
<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d" th:replace="fragments/general-form.html :: side-navigation-bar"></div>
        <div id="w-node-27962c2db181-c676b3e3" class="main-content-div">
            <div class="content-nav" th:replace="fragments/general-form.html :: content-navigation-bar"></div>
            <div class="content-wrap" sec:authorize="isAuthenticated()">
                <div class="content-container">
                    <div class="content-block">
                        <div class="content-block-parent" style="flex: 0 75%" >
                            <input id="progressValue" name="progressValue" th:value="${complaintEntity?.progressValue}" type="hidden">
                            <input id="progressStep" name="progressStep" th:value="${complaintEntity?.progressStep}" type="hidden">
<!--                            <div class="sticky" style="margin-bottom: 20px">-->
<!--                                <button class="accordion" style="flex: 0 50%">Progress Details</button>-->
<!--                                <div class="panel">-->
<!--&lt;!&ndash;                                    <h6 class="h3-blue" style="font-weight: bold; font-size: 16px">Progress Details</h6>&ndash;&gt;-->
<!--                                    <div class="container" style="margin-top: 20px; margin-bottom: 20px; width:100%; text-align: center">-->
<!--                                        <div class="row mx-auto" style="width: 90%;  margin-left: 30px">-->
<!--                                            <div class="progress" id="progress1">-->
<!--                                                <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">-->
<!--                                                </div>-->
<!--                                                <span class="progress-type">Overall Progress</span>-->
<!--                                                <span class="progress-completed" >20%</span>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="row mx-auto" style="width: 90%; margin-left: 30px">-->
<!--                                            <div class="row step mx-auto">-->
<!--                                                <div id="div1" class="col-md-2 iconStep" onclick="javascript: myFunction(event, 6, 'step-1');">-->
<!--                                                    <span class="fa fa-pencil"></span>-->
<!--                                                    <p id="step-1p">Fill out</p>-->
<!--                                                </div>-->
<!--&lt;!&ndash;                                                <div class="col-md-2 activestep iconStep" onclick="javascript: resetActive(event, 20, 'step-2');">&ndash;&gt;-->
<!--                                                <div th:if="${complaintEntity?.rejected == 1}" class="col-md-2 iconStep" onclick="javascript: myFunction(event, 5, 'step-2');">-->
<!--                                                    <span class="fa fa-times"></span>-->
<!--                                                    <p id="step-2p">Rejected</p>-->
<!--                                                </div>-->
<!--                                                <div th:if="${complaintEntity?.approved == 1}" class="col-md-2 iconStep" onclick="javascript: myFunction(event, 5, 'step-2');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-2p">Approval</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="javascript: myFunction(event, 4, 'step-3');">-->
<!--                                                    <span class="fa fa-user-plus"></span>-->
<!--                                                    <p id="step-3p">Assign IO</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="javascript: myFunction(event, 3, 'step-4');">-->
<!--                                                    <span class="fa fa-cogs"></span>-->
<!--                                                    <p id="step-4p">MS Process</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="javascript: myFunction(event, 2, 'step-5');">-->
<!--                                                    <span class="fa fa-stop-circle"></span>-->
<!--                                                    <p id="step-5p">Ended</p>-->
<!--                                                </div>-->
<!--                                                <div id="last" class="col-md-2 iconStep" onclick="javascript: myFunction(event, 1, 'step-6');">-->
<!--                                                    <span class="fa fa-star"></span>-->
<!--                                                    <p id="step-6p" >Feedback</p>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
                            <h5 class="h4-blue" style="color: #0082f3; font-weight: bold; font-size: 17px; ">Compliant Details: <span style="color: black" th:text="${complaintEntity?.referenceNumber}">No REF CREATED</span></h5>

                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Bio Information</u></h5>
                                    </div>
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Compliant Name</div>
                                            <div class="list-text-accordion" style="width: 650px" th:text="${complaintCustomersEntity?.firstName}  + ' ' + ${complaintCustomersEntity?.lastName}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Telephone Number</div>
                                            <div class="list-text-accordion" th:text="${complaintCustomersEntity?.mobilePhoneNumber}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Email Address</div>
                                            <div class="list-text-accordion" th:text="${complaintCustomersEntity?.emailAddress}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Postal Address</div>
                                            <div class="list-text-accordion" th:text="${complaintCustomersEntity?.postalAddress}"></div>
                                        </li>
                                    </ul>
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Complaint Details</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Complaint Title</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.complaintTitle}"></div>
                                        </li>
                                        <br>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Described Complaint Details</div>
                                            <div class="list-text-accordion"  th:text="${complaintEntity?.complaintDetails}"></div>
                                        </li>
                                    </ul>
                            <div>
                                <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Product Targeted</u></h5>
                            </div>
                            <ul  class="w-list-unstyled" >
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">Product Category</div>
                                    <div class="list-text-accordion" th:text="${standardCategory?.standardCategory}"></div>
                                </li>
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">Broad Product Category</div>
                                    <div class="list-text-accordion" th:text="${broadProductCategory?.category}"></div>
                                </li>
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">Product Category</div>
                                    <div class="list-text-accordion" th:text="${productCategory?.name}"></div>
                                </li>
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">Product</div>
                                    <div class="list-text-accordion" th:text="${product?.name}"></div>
                                </li>
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">Product Sub-Category</div>
                                    <div class="list-text-accordion" th:text="${productSubCategory?.name}"></div>
                                </li>
                                <li class="list-item-accordion">
                                    <div class="list-title-accordion">KS Number</div>
                                    <div class="list-text-accordion" th:text="${ksApplicable?.standardNumber}"></div>
                                </li>
                            </ul>
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>LOCATION & DETAILS OF COMPLAINT SUBJECT</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Region</div>-->
<!--                                            <div class="list-text-accordion" th:text="${complaintLocationEntity?.region?.region}"></div>-->
<!--                                        </li>-->
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">County</div>
                                            <div class="list-text-accordion" th:text="${countyName?.county}"></div>
                                        </li>
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Sub-County</div>-->
<!--                                            <div class="list-text-accordion" th:text="${complaintLocationEntity?.subcounty}"></div>-->
<!--                                        </li>-->
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Town</div>
                                            <div class="list-text-accordion" th:text="${townDetails?.town}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Market Center</div>
                                            <div class="list-text-accordion" th:text="${complaintLocationEntity?.marketCenter}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Name of Building</div>
                                            <div class="list-text-accordion" th:text="${complaintLocationEntity?.building}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Product Brand</div>
                                            <div class="list-text-accordion" th:text="${complaintLocationEntity?.productBrand}"></div>
                                        </li>
                                    </ul>
                                </div>
<!--                            </div>-->

<!--                        </div>-->

                        <div  class="filter-block">
                            <div class="filter-block-title">
                                <div class="filter-title">Attached Document:</div>
                            </div>
                            <div>
                                <a th:href="@{/api/ms/load/attachment(compliantId = ${complaintEntity?.id} )}" target='_blank' class="filter-link cocBtn">ATTACHMENTS</a>
                                <!--                                <a th:href="@{/api/di/remarks-view/{certBack}(certBack = 'cocItemDetailsSupervisor')}" class="filter-link cocBtn">Remarks View</a>-->
                            </div>
                            <div class="filter-block-title">
                                <div class="filter-title">Actions:</div>
                            </div>
<!--                            <div  th:if="${ViewType == 'myTasks'}" >-->
                                <a th:if="${complaintEntity?.approved == 1 and complaintEntity?.assignedIo == null}" sec:authorize="hasAuthority('MS_HOF_MODIFY')" class="filter-link"  onclick="popUpFunction('assignOfficer');" style="color: white">Assign IO</a>
                                <a th:if="${complaintEntity?.approved == null and complaintEntity?.rejected == null and complaintEntity?.mandateForOga == null}" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"  style="color: white"  class="filter-link" onclick="popUpFunction('approveComplaint');">Related To KEBS Products</a>
<!--                                <a th:if="${complaintEntity?.approved == null and complaintEntity?.rejected == null and complaintEntity?.mandateForOga == null}" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"  style="color: white" class="filter-link approvalOgaBtn" >Related To OGA</a>-->
                                <a th:if="${complaintEntity?.approved == null and complaintEntity?.rejected == null and complaintEntity?.mandateForOga == null}" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"   class="filter-link"  onclick="popUpFunction('rejectComplaint');" style="color: white">Reject</a>
                                <a th:if="${complaintEntity?.msProcessStatus == 0}" sec:authorize="hasAuthority('MS_IO_MODIFY')"  class="filter-link" onclick="popUpFunctionWorkPlan('startMsProcess');" style="color: white">START MS PROCESS</a>
<!--                            </div>-->
                        </div>

                    </div>
                </div>
            </div>

            <div class="progressForm" >
                <!-- Modal -->
                <div class="modal fade" id="progressModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 style="font-weight: bold;" class="modal-title" id="progressModalLabel"><span id="progressSpan" >none</span> Details</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <div id="step-1">
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Compliant Name :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.createdBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Date Reported :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.createdOn, 'dd/MM/yyyy')}"></div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="step-2">
                                    <ul class="w-list-unstyled" th:if="${complaintEntity?.approved == 1}"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Approved By :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.approvedBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Approval Date  :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.approvedDate, 'dd/MM/yyyy')}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Approval Remarks  :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.approvedRemarks}"></div>
                                        </li>
                                    </ul>
                                    <ul class="w-list-unstyled" th:if="${complaintEntity?.rejected == 1}" >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">REJECTED By :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.rejectedBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">REJECTED Date  :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.rejectedDate, 'dd/MM/yyyy')}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">REJECTED Remarks  :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.rejectedRemarks}"></div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="step-3">
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Assigned By :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.assignedBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Assigned Date :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.assignedDate, 'dd/MM/yyyy')}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Remarks :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.assignedRemarks}"></div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="step-4">
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Started By :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.msProcessStartedBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Started On :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.msProcessStartedOn, 'dd/MM/yyyy')}"></div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="step-5">
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Ended By :</div>
                                            <div class="list-text-accordion" th:text="${complaintEntity?.msProcessEndedBy}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Ended On :</div>
                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.msProcessEndedOn, 'dd/MM/yyyy')}"></div>
                                        </li>
                                    </ul>
                                </div>
                                <div id="step-6">
                                    <ul class="w-list-unstyled"  >
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Compliant Name</div>-->
<!--                                            <div class="list-text-accordion" th:text="${complaintEntity?.createdBy}"></div>-->
<!--                                        </li>-->
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Date Reported</div>-->
<!--                                            <div class="list-text-accordion"  th:text="${#dates.format(complaintEntity?.createdOn, 'dd/MM/yyyy')}"></div>-->
<!--                                        </li>-->
                                    </ul>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-secondary" data-dismiss="modal"  type="button">Close</button>
<!--                                <input type="submit" id="saveValue-1" class="btn btn-primary" value="Save"/>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="remarksForm">
                <form id="remarksForm" name="remarksForm" th:action="@{/api/ms/complaints/add-remarks(complaintUuid=${complaintEntity.uuid})}" method="post" th:object="${complaintEntity}">
                    <div class="modal fade" id="remarksModal" tabindex="-1" role="dialog"
                         aria-labelledby="remarksModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 style="font-weight: bold;" class="modal-title" id="remarksModalLabel"><span id="spanValue" >none</span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div id="rejectComplaint">
                                            <label class="field-label" for="processValue">Select Reject/OGA</label>
                                            <select id="processValue" class="input-field w-input" th:field="*{processValue}">
                                                <option value="0">Select one...</option>
                                                <option th:value="'REJECT'" th:text="'REJECT'"></option>
                                                <option th:value="'APPROVEMANDATEOGA'" th:text="'MANDATE FOR OGA'"></option>
                                            </select>

                                            <div id="NOTOGA">
                                                <input type="hidden" id="rejectedDate" name="rejectedDate"  th:value="${currentDate}">
                                                <input type="hidden" id="rejectedBy" name="rejectedBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                                <label for="rejectedRemarks" class="col-form-label">Please write in detail your feedback for Rejecting this application:</label>
                                                <textarea required="required" name="name" id="rejectedRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{rejectedRemarks}"></textarea>
                                            </div>
                                            <div id="OGA">
                                                <input type="hidden" id="progressStep" name="progressStep"  th:value="'REJECTED'">
                                                <input type="hidden" id="advisedWheretoOn" name="advisedWheretoOn"  th:value="${currentDate}">
                                                <input type="hidden" id="advisedWheretoBy" name="advisedWheretoBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                                <input type="hidden" id="mandateForOga" name="mandateForOga"  th:value="${activeStatus}">
                                                <label for="advisedWhereto" class="col-form-label">Please advised on where to direct the complaint:</label>
                                                <textarea required="required" name="name" id="advisedWhereto" class="input-field w-input" cols="65" rows="5" th:field="*{advisedWhereto}"></textarea>
                                            </div>
<!--                                            <input type="hidden" id="processValue1" name="processValue"  th:value="'REJECTAPPROVEMANDATEOGA'">-->
                                            <input type="hidden" id="rejected" name="rejected"  th:value="${activeStatus}">
                                            <input type="hidden" id="approved" name="approved"  th:value="${inActiveStatus}">



<!--                                            <div id="rejectFields">-->
<!--                                                <input type="hidden" id="rejectedBy" name="rejectedBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">-->
<!--                                            </div>-->
                                        </div>
                                        <div id="approveComplaint">
<!--                                            <input type="hidden" id="processValue" name="processValue"  th:value="'APPROVE'">-->
                                            <input type="hidden" id="progressStep" name="progressStep"  th:value="'APPROVED'">
                                            <input type="hidden" id="approvedDate" name="approvedDate"  th:value="${currentDate}">
                                            <input type="hidden" id="mandateForOga" name="mandateForOga"  th:value="${inActiveStatus}">
                                            <input type="hidden" id="rejected" name="rejected"  th:value="${inActiveStatus}">
                                            <input type="hidden" id="approved" name="approved"  th:value="${activeStatus}">
<!--                                        <div th:object="${complaintEntity}">-->
                                            <input type="hidden" id="approvedBy" name="approvedBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                            <label class="field-label" for="division">Division</label>
                                            <select id="division" name="division" class="select-field w-select" th:field="*{division}">
                                                <option value="">Select One...</option>
                                                <option th:each="division : ${divisions}" th:text="${division.division}" th:value="${division.id}"></option>
                                            </select>
<!--                                            <label for="targetedProducts1" class="col-form-label">Targeted products</label>-->
<!--                                            <input class="input-field w-input" id="targetedProducts1" placeholder="Targeted products" th:field="*{targetedProducts}" th:required="required">-->
                                            <label for="approvedRemarks" class="col-form-label">Please write in detail your feedback for this application:</label>
                                            <textarea required="required" name="name" id="approvedRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{approvedRemarks}"></textarea>
<!--                                        </div>-->
                                        </div>
                                        <div id="assignOfficer">
                                            <input type="hidden" id="assignedDate" name="assignedDate"  th:value="${currentDate}">
                                            <input type="hidden" id="assignedIoStatus" name="assignedIoStatus"  th:value="${activeStatus}">
                                            <input type="hidden" id="progressStep" name="progressStep"  th:value="'ASSIGNED IO'">
                                            <input type="hidden" id="assignedBy" name="assignedBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                            <label for="officer" class="col-form-label">Select Officer:</label>
                                            <select id="officer"  class="select-field w-select" th:field="*{assignedIo}">
                                                <option value="0">Select one...</option>
                                                <option  th:each="officer : ${officers}" th:text="${officer?.userId?.firstName} + ' ' + ${officer?.userId?.lastName}" th:name="assignedIo" th:value="${officer?.userId?.id}"></option>
                                            </select>
                                            <label for="assignedRemarks" class="col-form-label">Please write in detail your feedback for this application:</label>
                                            <textarea required name="name" id="assignedRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{assignedRemarks}"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" onClick="window.location.reload()" type="button">Close</button>
                                    <input type="submit" id="saveValue" class="btn btn-primary" value="Submit"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="workPlanForm" sec:authorize="hasAuthority('MS_IO_MODIFY')">
                <form id="workPlan-form"   name="workPlan-form" th:action="@{/api/ms/complaint/create/workPlan(complaintUuid=${complaintEntity.uuid})}" method="post" >
                    <div class="modal fade" id="workPlanModal" tabindex="-1" role="dialog" aria-labelledby="workPlanModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 style="font-weight: bold; " class="modal-title" id="workPlanModalLabel"><span id="workPlan-1" >WorkPlan</span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div id="startMsProcess">
                                            <div th:object="${msWorkPlanGeneratedEntity}">
                                                <input type="hidden" id="complaintId" name="complaintId" th:value="${complaintEntity?.id}">
<!--                                                <input type="hidden" id="subcounty" name="subcounty" th:value="${complaintLocationEntity?.subcounty}">-->
                                                <input type="hidden" id="region" name="region" th:value="${complaintLocationEntity?.region}">
                                                <input type="hidden" id="townMarketCenter" name="townMarketCenter" th:value="${complaintLocationEntity?.town}">
                                                <input type="hidden" id="county" name="county" th:value="${complaintLocationEntity?.county}">
                                                <input type="hidden" id="complaintDepartment" name="complaintDepartment" th:value="${complaintEntity?.complaintDepartment}">
                                                <input type="hidden" id="progressStep" name="progressStep" th:value="'WorkPlan Generated'">
                                                <input type="hidden" id="divisionId" name="divisionId" th:value="${complaintEntity?.division}">
                                                <!--                                        <input type="hidden" id="targetedProducts" name="targetedProducts" th:value="${complaintEntity?.targetedProducts}">-->
                                                <input type="hidden" id="standardCategory" name="standardCategory" th:value="${complaintEntity?.standardCategory}">
                                                <input type="hidden" id="productSubCategory" name="productSubCategory" th:value="${complaintEntity?.productSubCategory}">
                                                <input type="hidden" id="product" name="product" th:value="${complaintEntity?.product}">
                                                <input type="hidden" id="productCategory" name="productCategory" th:value="${complaintEntity?.productCategory}">
                                                <input type="hidden" id="broadProductCategory" name="broadProductCategory" th:value="${complaintEntity?.broadProductCategory}">
                                                <label for="nameActivity" class="col-form-label">Name of Activity:</label>
                                                <select id="nameActivity" required="required" class="input-field w-input" th:field="*{nameActivity}">
                                                    <option value="0">Select one...</option>
                                                    <option th:value="'Complaint'" th:text="Complaint"></option>
                                                    <option th:value="'Survillance'" th:text="Survillance"></option>
                                                </select>
                                                <label class="field-label" for="timeActivityDate">Date of activity </label>
                                                <input class="input-field w-input"  required="required" id="timeActivityDate" th:field="*{timeActivityDate}" type="date">
                                                <label class="field-label" for="todolist">Resources required</label>
                                                <input onfocus="this.value=''"  id="entryText" />
                                                <button id="btn_add" style="background: #47cf73">add</button>
                                                <textarea id="todolist" class="input-field w-input" name="todolist" rows="10" placeholder="maintain resources required tasks" th:field="*{resourcesRequired}"></textarea>
                                                <label for="budget" class="col-form-label">Budget</label>
                                                <input class="input-field w-input"  type="number" id="budget" placeholder="Budget" th:field="*{budget}" th:required="required">

                                            </div>
                                            <div th:object="${complaintEntity}">
                                                <input type="hidden" id="msProcessStatus" name="msProcessStatus" th:value="${activeStatus}">
                                                <input type="hidden" id="msProcessStartedBy" name="msProcessStartedBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
<!--                                                <input type="hidden" id="progressStep" name="progressStep" th:value="'WorkPlan Generated'">-->

                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" onClick="refreshPage()"
                                            type="button">Close
                                    </button>
                                    <input type="submit" id="workPlan-submit-1" class="btn btn-primary" value="Save"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>


        </div>
    </div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="../assets/js/webflow.js" type="text/javascript"></script>
<script th:src="@{/assets/bootstrap3/js/bootstrap.js}" type="text/javascript"></script>
<!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
<script>
    var remarkType = '';
    var myConstants = null;

    // let arrHead = [ 'reject', 'approve'];
    // let arrHeadSave = [ 'Not Within KEBS Mandate','KEBS Mandate'];

    $(document).ready(function() {

        $("#btn_add").click(function(){
            document.getElementById('todolist').value +='● ' + $("#entryText").val()+"\n";
        });

        $("#processValue").click(function () {
            let processStatus = $("#processValue").val()

            if (processStatus==='REJECT'){
                document.getElementById('OGA').remove();
            }else if (processStatus==='APPROVEMANDATEOGA'){
                document.getElementById('NOTOGA').remove();
            }
        });

        // /***************************************************************************************************
        //  * Thymeleaf Complaint Remarks Buttons
        //  ***************************************************************************************************/
        // $('.filter-block .pressedBtn').on('click', function (eventAction) {
        //
        //     for (let h = 0; h < arrHead.length; h++) {
        //         if(eventAction !== arrHead[h]){
        //             document.getElementById(arrHead[h]).remove();
        //         }else {
        //             if (eventAction === arrHead[h]) {
        //                 document.getElementById('spanValue').innerHTML = arrHeadSave[h];
        //                 document.getElementById("saveValue").value = 'Submit';
        //             }
        //         }
        //     }
        //
        //     $('.remarksForm #remarksModal').modal();
        // });
        //
        // $('.filter-block .approvalOgaBtn').on('click', function (event) {
        //     document.getElementById('mySpan').innerHTML = 'Approve OGA'
        //     document.getElementById("saveValue").value = "submit";
        //     document.getElementById('approve').remove();
        //     document.getElementById('reject').remove();
        //     $('.remarksForm #remarksModal').modal();
        // });
        //
        // $('.filter-block .rejectBtn').on('click', function (event) {
        //     document.getElementById('mySpan').innerHTML = 'Not within KEBS mandate'
        //     document.getElementById("saveValue").value = "submit";
        //     document.getElementById('approve').remove();
        //     // document.getElementById('approveOtherMandate').remove();
        //     $('.remarksForm #remarksModal').modal();
        // });
        //
        // $('.filter-block .assignBtn').on('click', function (event) {
        //     document.getElementById('mySpan-1').innerHTML = 'Assign'
        //     document.getElementById("saveValue-1").value = "submit";
        //     $('.assignForm #assignModal').modal();
        // });
        //
        // $('.filter-block .workPlanBtn').on('click', function (event) {
        //     document.getElementById('workPlan-1').innerHTML = 'Create WorkPlan'
        //     document.getElementById("workPlan-submit-1").value = "submit";
        //     $('.workPlanForm #workPlanModal').modal();
        // });


        $('#remarksModal').on('hidden.bs.modal', function () {
            location.reload();
        })

        $('#workPlanModal').on('hidden.bs.modal', function () {
            location.reload();
        })
        $('#assignModal').on('hidden.bs.modal', function () {
            location.reload();
        })

    });
</script>
<script>

    // <button id="btn">Click me!</button>
    //
    // const btn = document.getElementById("btn");
    // btn.addEventListener("click", function() {
    //
    //     //Do something here
    // }, false);

    function popUpFunction(eventAction) {
        let arrHead = [ 'rejectComplaint', 'approveComplaint', 'assignOfficer'];
        let arrHeadSave = [ 'Not Within KEBS Mandate','KEBS Mandate', 'Assign Officer'];

        for (let h = 0; h < arrHead.length; h++) {
            if(eventAction !== arrHead[h]){
                document.getElementById(arrHead[h]).remove();
            }else {
                if (eventAction === arrHead[h]) {
                    document.getElementById('spanValue').innerHTML = arrHeadSave[h];
                    document.getElementById("saveValue").value = 'Submit';
                }
            }
        }

        $('.remarksForm #remarksModal').modal();
    }

    function popUpFunctionWorkPlan(eventAction) {
        let arrHead = [ 'startMsProcess'];
        let arrHeadSave = [ 'Create Fill in Details For Work Plan'];

        for (let h = 0; h < arrHead.length; h++) {
            if(eventAction !== arrHead[h]){
                document.getElementById(arrHead[h]).remove();
            }else {
                if (eventAction === arrHead[h]) {
                    document.getElementById('spanValue').innerHTML = arrHeadSave[h];
                    document.getElementById("saveValue").value = 'Submit';
                }
            }
        }

        $('.workPlanForm #workPlanModal').modal();
    }

    function refreshPage() {
        window.location.reload();
    }
</script>
<script>
    var acc = document.getElementsByClassName("accordion");
    // var btn = document.getElementsByClassName("button w-button eBtn");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            this.style.border = "none";

            const percentValue = document.getElementById("progressValue").value;
            const stepValue = document.getElementById("progressStep").value;
            // console.log(stepValue)
            resetActive(event,percentValue, stepValue)
            // showCurrentStepInfo(stepValue)
            // console.log(percentValue)
            // this.style.position = "sticky"
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                // panel.style.position = "-webkit-sticky"
                // panel.style.position = "sticky"
            }
        });
    }



</script>
<script type="text/javascript">
    function myFunction(event, progress, step) {
        const dividend = 100;
        const divisor = progress;
        const quotient = dividend / divisor;

        resetActive(event, quotient, step);
        showCurrentStepInfo(step);

    }

    function resetActive(event, percent, step) {


        $(".progress-bar").css("width", percent + "%").attr("aria-valuenow", percent);
        $(".progress-completed").text(percent + "%");

        $("div").each(function () {
            if ($(this).hasClass("activestep")) {
                $(this).removeClass("activestep");
            }
        });

        if (event.target.className == "col-md-2") {
            $(event.target).addClass("activestep");
        }
        else {
            $(event.target.parentNode).addClass("activestep");
        }

        // hideSteps();
        // showCurrentStepInfo(step);
    }

    function showCurrentStepInfo(step) {
        let arrHead = [ 'step-1', 'step-2', 'step-3', 'step-4', 'step-5', 'step-6'];

        for (let h = 0; h < arrHead.length; h++) {
            if(step !== arrHead[h]){
                document.getElementById(arrHead[h]).style.display = "none";
            }else {
                if (step === arrHead[h]) {
                    document.getElementById(arrHead[h]).style.display = "block";
                    document.getElementById('progressSpan').innerHTML = document.getElementById(arrHead[h] + "p").textContent
                }
            }
        }
        $('.progressForm #progressModal').modal();
    }

</script>
</body>
</html>


