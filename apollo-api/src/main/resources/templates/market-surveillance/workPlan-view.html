<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html:: headerfiles"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/accordion.css}"/>
    <link rel="stylesheet" th:href="@{/css/progressBar.css}"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
</head>
<body>
<div class="top-bar" th:replace="fragments/general-form.html :: top-bar"></div>
<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d" th:replace="fragments/general-form.html :: side-navigation-bar"></div>
        <div id="w-node-27962c2db181-c676b3e3" class="main-content-div">
            <div class="content-nav" th:replace="fragments/general-form.html :: content-navigation-bar"></div>
            <div class="content-wrap" sec:authorize="isAuthenticated()">
                <div class="content-container">
                    <h5 class="h3-blue" style="color: #0082f3; font-weight: bold; ">WorkPlan Generated Details</h5>
                    <div class="content-block">
                        <div class="content-block-parent" style="flex: 0 75%" >
                            <input id="progressValue" name="progressValue" th:value="${workPlan?.progressValue}" type="hidden">
                            <input id="progressStep" name="progressStep" th:value="${workPlan?.progressStep}" type="hidden">
<!--                            <div class="sticky" style="margin-bottom: 20px">-->
<!--                                <button class="accordion" style="flex: 0 50%">Progress Details</button>-->
<!--                                <div class="panel">-->
<!--                                    &lt;!&ndash;                                    <h6 class="h3-blue" style="font-weight: bold; font-size: 16px">Progress Details</h6>&ndash;&gt;-->
<!--                                    <div class="container" style="margin-top: 20px; margin-bottom: 20px; width:100%; text-align: center">-->
<!--                                        <div class="row mx-auto" style="width: 90%;  margin-left: 30px">-->
<!--                                            <div class="progress" id="progress1">-->
<!--                                                <div class="progress-bar" role="progressbar" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 20%;">-->
<!--                                                </div>-->
<!--                                                <span class="progress-type">Overall Progress</span>-->
<!--                                                <span class="progress-completed" >20%</span>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                        <div class="row mx-auto" style="width: 95%; margin-left: 20px">-->
<!--                                            <div class="row step mx-auto">-->
<!--                                                <div id="div1" class="col-md-2 iconStep" onclick="myFunction(event, 15, 'step-1');">-->
<!--                                                    <span class="fa fa-pencil"></span>-->
<!--                                                    <p id="step-1p">Generate workPlan</p>-->
<!--                                                </div>-->
<!--                                                <div th:if="${workPlan?.rejected == 1}" class="col-md-2 iconStep" onclick="javascript: myFunction(event, 5, 'step-2');">-->
<!--                                                    <span class="fa fa-times"></span>-->
<!--                                                    <p id="step-2p">Rejected</p>-->
<!--                                                </div>-->
<!--                                                <div th:if="${workPlan?.approved == 1}" class="col-md-2 iconStep" onclick="myFunction(event, 14, 'step-2');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-2p">Approval workPlan</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 13, 'step-3');">-->
<!--                                                    <span class="fa fa-cogs"></span>-->
<!--                                                    <p id="step-3p">Onsite Activities</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 12, 'step-4');">-->
<!--                                                    <span class="fa fa-envelope"></span>-->
<!--                                                    <p id="step-4p">Notification SSF</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 11, 'step-5');">-->
<!--                                                    <span class="fa fa-envelope"></span>-->
<!--                                                    <p id="step-5p">Notification BS Number</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 10, 'step-6');">-->
<!--                                                    <span class="fa fa-cogs"></span>-->
<!--                                                    <p id="step-6p">Process Sample</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event,9, 'step-7');">-->
<!--                                                    <span class="fa fa-envelope"></span>-->
<!--                                                    <p id="step-7p">Notification Lab Reports</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 8, 'step-8');">-->
<!--                                                    <span class="fa fa-pencil"></span>-->
<!--                                                    <p id="step-8p">Generate Preliminary</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 7, 'step-9');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-9p">Approve Preliminary</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 6, 'step-10');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-10p">Approve Preliminary</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 5, 'step-11');">-->
<!--                                                    <span class="fa fa-pencil"></span>-->
<!--                                                    <p id="step-11p">Generate Final</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 4, 'step-12');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-12p">Approve Final</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 3, 'step-13');">-->
<!--                                                    <span class="fa fa-check"></span>-->
<!--                                                    <p id="step-13p">Approve Final</p>-->
<!--                                                </div>-->
<!--                                                <div class="col-md-2 iconStep" onclick="myFunction(event, 2, 'step-14');">-->
<!--                                                    <span class="fa fa-commenting"></span>-->
<!--                                                    <p id="step-14p">Recommendation</p>-->
<!--                                                </div>-->
<!--                                                <div id="last" class="col-md-2 iconStep" onclick="myFunction(event, 1, 'step-15');">-->
<!--                                                    <span class="fa fa-star"></span>-->
<!--                                                    <p id="step-15p" >Feedback</p>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
                                <div class="applicant-details" >
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Who, what, from where</u></h5>
                                    </div>
                                    <ul class="w-list-unstyled"  >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Department</div>
                                            <div class="list-text-accordion" style="width: 650px" th:text="${departmentDetails.department}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Division</div>
                                            <div class="list-text-accordion" th:text="${divisionDetails.division}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Officer</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.officerName}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Name of Activity</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.nameActivity}"></div>
                                        </li>
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Targeted products</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.targetedProducts}"></div>-->
<!--                                        </li>-->
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Resources required</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.resourcesRequired}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Budget</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.budget}"></div>
                                        </li>
                                    </ul>
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Location of activity</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Region</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.region?.region}"></div>-->
<!--                                        </li>-->
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">County</div>
                                            <div class="list-text-accordion"  th:text="${countyName?.county}"></div>
                                        </li>
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Subcounty</div>-->
<!--                                            <div class="list-text-accordion"  th:text="${workPlan?.subcounty}"></div>-->
<!--                                        </li>-->
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Town/market center</div>
                                            <div class="list-text-accordion"  th:text="${townDetails?.town}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Other</div>
                                            <div class="list-text-accordion"  th:text="${workPlan?.locationActivityOther}"></div>
                                        </li>
                                    </ul>
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Product Targeted</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Product Category</div>
                                            <div class="list-text-accordion" th:text="${standardCategory?.standardCategory}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Broad Product Category</div>
                                            <div class="list-text-accordion" th:text="${broadProductCategory?.category}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Product Category</div>
                                            <div class="list-text-accordion" th:text="${productCategory?.name}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Product</div>
                                            <div class="list-text-accordion" th:text="${product?.name}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Product Sub-Category</div>
                                            <div class="list-text-accordion" th:text="${productSubCategory?.name}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">KS Number</div>
                                            <div class="list-text-accordion" th:text="${ksApplicable?.standardNumber}"></div>
                                        </li>
                                    </ul>
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Time for activity</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Activity Date</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.timeActivityDate}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Date report submitted</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.timeDateReportSubmitted}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Remarks</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.timeActivityRemarks}"></div>
                                        </li>
                                    </ul>
<!--                                    <div>-->
<!--                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Rescheduled activities</u></h5>-->
<!--                                    </div>-->
<!--                                    <ul  class="w-list-unstyled" >-->
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Rescheduled to date(if not visited)</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.rescheduledDateNotVisited}"></div>-->
<!--                                        </li>-->
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Date report submitted</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.rescheduledDateReportSubmitted}"></div>-->
<!--                                        </li>-->
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Remarks</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.rescheduledActivitiesRemarks}"></div>-->
<!--                                        </li>-->
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Alternative activity undertaken in that period</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.activityUndertakenPeriod}"></div>-->
<!--                                        </li>-->
<!--                                    </ul>-->
                                    <div>
                                        <h5 style="font-weight: bold; color: #0082f3; font-size: 14px"><u>Review by Supervisor (HoF)</u></h5>
                                    </div>
                                    <ul  class="w-list-unstyled" >
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Name of HoF</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.nameHof}"></div>
                                        </li>
                                        <li class="list-item-accordion">
                                            <div class="list-title-accordion">Date</div>
                                            <div class="list-text-accordion" th:text="${workPlan?.reviewSupervisorDate}"></div>
                                        </li>
<!--                                        <li class="list-item-accordion">-->
<!--                                            <div class="list-title-accordion">Remarks</div>-->
<!--                                            <div class="list-text-accordion" th:text="${workPlan?.reviewSupervisorRemarks}"></div>-->
<!--                                        </li>-->
                                    </ul>
                                </div>

                        </div>

                        <div  class="filter-block">
                            <div class="filter-block-title">
                                <div class="filter-title">Attached Document :</div>
                            </div>
                            <div >
                                <a th:href="@{/api/ms/workPlan-uploads(workPlanUuid = ${workPlan?.uuid})}" class="filter-link">All UPLOADS</a>
                                <a th:if="${workPlan?.complaintId != null}" th:href="@{/api/ms/complaint-detail(complaintUuid = ${complaintDetails?.uuid})}" class="filter-link cocBtn">COMPLAINT</a>
                                <a th:if="${workPlan?.preliminaryApprovedStatus == 1}" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Preliminary Report</a>
                                <a  th:if="${workPlan?.sampleCollectionStatus == 1 and workPlan?.scfLabparamsStatus == 1 }" style="color: white" target='_blank' class="filter-link" th:href="@{/api/ms/report(sampleCollectID = ${sampCollect?.id}, docType = 'msSampleCollection')}" >Sample Collection PDF</a>
                                <!--                                <a th:href="@{/api/di/remarks-view/{certBack}(certBack = 'cocItemDetailsSupervisor')}" class="filter-link cocBtn">Remarks View</a>-->
                            </div>
                            <div class="filter-block-title">
                                <div class="filter-title">Actions:</div>
                            </div>
                            <div>
<!--                                <a  sec:authorize="hasAuthority('MS_IO_MODIFY')"  class="filter-link uploadBtn" style="color: white">Upload Attachments</a>-->




                                <a  th:if="${workPlan?.officerId == null}" sec:authorize="hasAuthority('MS_HOF_MODIFY')" class="filter-link assignBtn" style="color: white">Assign IO</a>

                                <div th:if="${workPlan?.msPreliminaryReportStatus == 1  and workPlan?.msFinalReportStatus == 0 and workPlan?.preliminaryApprovedStatus != 1}" >
                                    <a sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_HOF_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Preliminary Report</a>
                                </div>
                                <div th:if="${workPlan?.msPreliminaryReportStatus == 1 and workPlan?.msFinalReportStatus == 0 and workPlan?.preliminaryApprovedStatus != 1}" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Preliminary Report</a>
                                </div>
                                <div th:if="${workPlan?.msFinalReportStatus == 1 and workPlan?.hodRecommendationStart != 1 and workPlan?.finalApprovedStatus != 1}" >
                                    <a sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_IO_MODIFY') or hasAuthority('MS_HOF_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">final Report</a>
                                </div>
                                <div th:if="${workPlan?.msPreliminaryReportStatus != 1 and workPlan?.msFinalReportStatus == 0 and workPlan?.bsNumberStatus == 1}" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:href="@{/api/ms/preliminary-report(workPlanID=${workPlan?.id}, ViewType ='workPlan')}" class="filter-link " style="color: white">Generate Preliminary Report</a>
                                </div>
                                <div th:if="${workPlan?.msPreliminaryReportStatus == 1 and workPlan?.msFinalReportStatus != 1 and workPlan?.onsiteEndStatus == 1}" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Generate Final Report</a>
                                </div>

                                <div th:if="${workPlan?.hodRecommendationStart == 1 and workPlan?.destractionStatus != 1 }" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY') or hasAuthority('MS_HOD_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Recommendation</a>
                                </div>

                                <div th:if="${workPlan?.destractionStatus == 1 and workPlan?.destractionDocId == null }" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY') or hasAuthority('MS_HOD_MODIFY')" th:href="@{/api/ms/preliminary(workPlanID=${workPlan?.id},currentPage=0,pageSize=10, ViewType ='workPlan')}" class="filter-link " style="color: white">Destruction</a>
                                </div>

                                <div th:if="${workPlan?.sendSffStatus == 1 and workPlan?.sampleSubmittedStatus == 1 and workPlan?.bsNumberStatus != 1}" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/sample-submit(ViewType='workPlan',workPlanID=${workPlan?.id},currentPage=0,pageSize=10)}" class="filter-link " style="color: white">Update BS Number</a>
                                </div>

                                <div th:if="${workPlan?.sendSffStatus == 1 and workPlan?.bsNumberStatus == 1}" >
                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/sample-submit(ViewType='workPlan',workPlanID=${workPlan?.id},currentPage=0,pageSize=10)}" class="filter-link " style="color: white">Lab Results</a>
                                </div>

<!--                                <div th:if="${workPlan?.sendSffStatus == 1 and workPlan?.sampleSubmittedStatus == 1 and workPlan?.bsNumberStatus != 1}" >-->
<!--                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/sample-submit(ViewType='workPlan',workPlanID=${workPlan?.id},currentPage=0,pageSize=10,ViewType ='workPlan')}" class="filter-link " style="color: white">Enforcement Agencies</a>-->
<!--                                </div>-->

                                <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.onsiteStartStatus != 1 and workPlan?.rejectedStatus !=1 and workPlan?.approvedStatus ==1}" th:href="@{/api/ms/onsite-start-end(workPlanID=${workPlan?.id}, docType='onSiteStart')}" class="filter-link " style="color: white">START ONSITE ACTIVITIES</a>

                                <div>
                                    <a  th:if="${workplan?.onsiteStartStatus == 1 and workplan?.onsiteEndStatus == 1}" sec:authorize="hasAuthority('MS_IO_MODIFY')"  class="filter-link uploadBtn" style="color: white">Upload Attachments</a>
                                </div>

                                <div sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.onsiteStartStatus == 1 and workPlan?.onsiteEndStatus == 0}">
                                    <div>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  class="filter-link uploadBtn" style="color: white">Upload Attachments</a>
                                    </div>

                                    <div  th:if="${workPlan?.chargeSheetStatus != 1}">
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:href="@{/api/ms/charge-sheet(workPlanID=${workPlan?.id}, ViewType ='workPlan')}" class="filter-link " style="color: white">Charge Sheet</a>
                                    </div>

                                    <div  >
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.dataReportStatus != 1}" th:href="@{/api/ms/data-report(workPlanID=${workPlan?.id}, ViewType ='workPlan')}" class="filter-link " style="color: white">Data Report</a>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.dataReportStatus == 1 and workPlan?.dataReportGoodsStatus != 1}" th:href="@{/api/ms/data-report-seized-goods(workPlanID=${workPlan?.id},currentPage=0,pageSize=10,ViewType ='workPlan')}" class="filter-link " style="color: white">Data Report Seized Goods</a>
                                    </div>

                                    <div>
<!--                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/notes-taking(workPlanID=${workPlan?.id},ViewType ='workPlan')}" class="filter-link " style="color: white">Note Taking</a>-->
                                    </div>
                                    <div>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.seizureDeclarationStatus != 1}" th:href="@{/api/ms/seizure-declaration(workPlanID=${workPlan?.id},ViewType ='workPlan')}" class="filter-link " style="color: white">Seizure And Declaration</a>
                                    </div>

                                    <div>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.sampleCollectionStatus != 1}" th:href="@{/api/ms/sample-collection(workPlanID=${workPlan?.id},ViewType='workPlan')}" class="filter-link " style="color: white">Sample collection</a>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.sampleCollectionStatus == 1 and workPlan?.scfLabparamsStatus != 1 }" th:href="@{/api/ms/sample-collect(workPlanID=${workPlan?.id},ViewType='workPlan',currentPage=0,pageSize=10)}" class="filter-link " style="color: white">Sample Collect Parameters</a>
                                    </div>

                                    <div>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.sampleSubmittedStatus != 1 and workPlan?.scfLabparamsStatus == 1 and workPlan?.sampleCollectionStatus == 1}" th:href="@{/api/ms/sample-submission(workPlanID=${workPlan?.id},ViewType='workPlan')}" class="filter-link " style="color: white">Sample Submission</a>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.sampleSubmittedStatus == 1 and workPlan?.ssfLabparamsStatus != 1}" th:href="@{/api/ms/sample-submit(workPlanID=${workPlan?.id},ViewType='workPlan',currentPage=0,pageSize=10)}" class="filter-link " style="color: white">Sample Submit Parameters</a>
                                    </div>

                                    <div>
                                        <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:if="${workPlan?.investInspectReportStatus != 1}" class="filter-link uploadInspectBtn" style="color: white">Inspection Investigation</a>
                                    </div>
                                </div>

                                <div th:if="${workPlan?.onsiteEndStatus != 1 and workPlan?.onsiteStartStatus == 1 }" >  <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/onsite-start-end(workPlanID=${workPlan?.id}, docType='onSiteEnd', ViewType ='workPlan')}" class="filter-link " style="color: white">END ONSITE ACTIVITIES</a>
                                </div>


<!--                                <div th:if="${workPlan?.onsiteEndStatus == 1 and workPlan?.onsiteStartStatus == 1 }">-->
<!--                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')"  th:href="@{/api/ms/sample-submission(workPlanID=${workPlan?.id},ViewType='workPlan')}" class="filter-link " style="color: white">Sample Submission</a>-->
<!--                                    <a sec:authorize="hasAuthority('MS_IO_MODIFY')" th:href="@{/api/ms/sample-submit(workPlanID=${workPlan?.id},ViewType='workPlan',currentPage=0,pageSize=10)}" class="filter-link " style="color: white">Sample Submit Parameters</a>-->
<!--                                </div>-->


                                <a th:if="${workPlan?.destractionStatus == 1 and workPlan?.destractionDocId != null and workPlan?.msEndProcessRemarks == null }" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"  style="color: white" class="filter-link endProcessBtn" >END MS PROCESS</a>

<!--                                <a th:if="${workPlan?.onsiteStartStatus != 1 }" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"  style="color: white" class="filter-link approvalBtn" >Approve</a>-->
<!--                                <a th:if="${workPlan?.onsiteStartStatus != 1  }" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')"  class="filter-link rejectBtn" style="color: white">Reject</a>-->
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <div class="remarksForm" sec:authorize="hasAuthority('MS_HOD_MODIFY') or hasAuthority('MS_RM_MODIFY')">
                <form id="remarksForm" name="remarksForm" th:action="@{/api/ms/workPlan/add-remarks(workPlanId = ${workPlan?.id},  docType='workPlan', ViewType ='workPlan' )}" method="post" th:object="${msWorkPlanGeneratedEntity}">
                    <div class="modal fade" id="remarksModal" tabindex="-1" role="dialog"
                         aria-labelledby="remarksModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 style="font-weight: bold;" class="modal-title" id="remarksModalLabel"><span id="mySpan" >none</span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <input type="hidden" id="createdBy" name="createdBy" th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                        <div id="reject">
<!--                                        <input type="hidden" id="process1" name="process"  th:value="'REJECT'">-->
                                        <input type="hidden" id="rejectedBy" name="rejectedBy"  th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                        <input type="hidden" id="rejected" name="rejected"  th:value="'REJECTED'">
                                        <input type="hidden" id="approvedStatus1" name="approvedStatus"  th:value="0">
                                        <input type="hidden" id="rejectedStatus" name="rejectedStatus"  th:value="1">
                                        <label for="rejectedRemarks" class="col-form-label">Please write in detail your feedback for this workPlan:</label>
                                        <textarea required name="name" id="rejectedRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{rejectedRemarks}"></textarea>
                                        </div>
                                        <div id="approve">
<!--                                        <input type="hidden" id="process" name="process"  th:value="'APPROVE'">-->
                                        <input type="hidden" id="approvedBy" name="approvedBy"  th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                        <input type="hidden" id="approved" name="approved"  th:value="'APPROVED'">
                                        <input type="hidden" id="approvedStatus" name="approvedStatus"  th:value="1">
                                        <input type="hidden" id="rejectedStatus1" name="rejectedStatus"  th:value="0">
                                        <label for="approvedRemarks" class="col-form-label">Please write in detail your feedback for this workPlan:</label>
                                        <textarea required name="name" id="approvedRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{approvedRemarks}"></textarea>
                                        </div>
                                        <div id="endProcess">
                                        <input type="hidden" id="process" name="process"  th:value="'ENDMSPROCESS'">
                                        <input type="hidden" id="modifiedBy" name="modifiedBy"  th:value="${session.currentUser.firstName}+ ' ' +${session.currentUser.lastName}">
                                        <label for="msEndProcessRemarks" class="col-form-label">Please write in detail your feedback for this workPlan:</label>
                                        <textarea required="required" name="name" id="msEndProcessRemarks" class="input-field w-input" cols="65" rows="5" th:field="*{msEndProcessRemarks}"></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" onClick="window.location.reload()" type="button">Close</button>
                                    <input type="submit" id="saveValue" class="btn btn-primary" value="Save"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="uploadForm" sec:authorize="hasAuthority('MS_IO_MODIFY')">
                <form id="upload-form" enctype="multipart/form-data"  name="upload-form" th:action="@{/api/ms/onsite/uploads(workPlanId = ${workPlan?.id}, ViewType ='workPlan')}" method="post" th:object="${onSiteUploadsEntity}">
                    <div class="modal fade" id="uploadModal" tabindex="-1" role="dialog" aria-labelledby="uploadModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 style="font-weight: bold; " class="modal-title" id="uploadModalLabel"><span id="uploadSpan-1" >none</span></h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <div id="INSPECTINVEST">
                                            <input type="hidden" id="saveType" name="saveType" th:value="'INSPECTINVEST'">
                                        </div>
                                        <label for="description" class="col-form-label">Description Of Attachment(s):</label>
                                        <input class="input-field w-input"  max="20" id="description" placeholder="Name of Activity" th:field="*{description}" th:required="required">
                                        <label for="docFile">Upload your Attachments</label>
                                        <input type="file"  multiple name="doc_file" data-name="doc_file" id="docFile" required="required" >
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" onClick="refreshPage()" type="button">Close</button>
                                    <input type="submit" id="upload-1" class="btn btn-primary" value="Save"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="../assets/js/webflow.js" type="text/javascript"></script>
<script th:src="@{/assets/bootstrap3/js/bootstrap.js}" type="text/javascript"></script>
<!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
<script>
    var remarkType = '';
    var myConstants = null;
    $(document).ready(function() {
        /***************************************************************************************************
         * Thymeleaf Complaint Remarks Buttons
         ***************************************************************************************************/
        $('.filter-block .endProcessBtn').on('click', function (event) {
            document.getElementById('mySpan').innerHTML = 'End Process'
            document.getElementById("saveValue").value = "END";
            document.getElementById('reject').remove();
            document.getElementById('approve').remove();
            $('.remarksForm #remarksModal').modal();
        });

        $('.filter-block .approvalBtn').on('click', function (event) {
            document.getElementById('mySpan').innerHTML = 'Approve'
            document.getElementById("saveValue").value = "submit";
            document.getElementById('reject').remove();
            document.getElementById('endProcess').remove();
            $('.remarksForm #remarksModal').modal();
        });

        $('.filter-block .rejectBtn').on('click', function (event) {
            document.getElementById('mySpan').innerHTML = 'Reject'
            document.getElementById("saveValue").value = "submit";
            document.getElementById('approve').remove();
            document.getElementById('endProcess').remove();
            $('.remarksForm #remarksModal').modal();
        });

        $('.filter-block .assignBtn').on('click', function (event) {
            document.getElementById('mySpan-1').innerHTML = 'Assign'
            document.getElementById("saveValue-1").value = "submit";
            $('.assignForm #assignModal').modal();
        });

        $('.filter-block .uploadInspectBtn').on('click', function (event) {
            document.getElementById('uploadSpan-1').innerHTML = 'Upload Inspection Investigation Report'
            document.getElementById("upload-1").value = "submit";
            $('.uploadForm #uploadModal').modal();
        });

        $('.filter-block .uploadBtn').on('click', function (event) {
            document.getElementById('uploadSpan-1').innerHTML = 'Upload'
            document.getElementById("upload-1").value = "submit";
            document.getElementById('INSPECTINVEST').remove();
            $('.uploadForm #uploadModal').modal();
        });

    });
</script>
<script>
    var acc = document.getElementsByClassName("accordion");
    // var btn = document.getElementsByClassName("button w-button eBtn");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            this.style.border = "none";

            const percentValue = document.getElementById("progressValue").value;
            const stepValue = document.getElementById("progressStep").value;
            // console.log(stepValue)
            resetActive(event,percentValue, stepValue)
            // showCurrentStepInfo(stepValue)
            // console.log(percentValue)
            // this.style.position = "sticky"
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                // panel.style.position = "-webkit-sticky"
                // panel.style.position = "sticky"
            }
        });
    }



</script>
<script>
    function myFunction(event, progress, step) {
        const dividend = 100;
        const divisor = progress;
        const quotient = dividend / divisor;

        resetActive(event, quotient, step);
        showCurrentStepInfo(step);

    }

    function resetActive(event, percent, step) {


        $(".progress-bar").css("width", percent + "%").attr("aria-valuenow", percent);
        $(".progress-completed").text(percent + "%");

        $("div").each(function () {
            if ($(this).hasClass("activestep")) {
                $(this).removeClass("activestep");
            }
        });

        if (event.target.className == "col-md-2") {
            $(event.target).addClass("activestep");
        }
        else {
            $(event.target.parentNode).addClass("activestep");
        }

        // hideSteps();
        // showCurrentStepInfo(step);
    }

    function showCurrentStepInfo(step) {
        let arrHead = [ 'step-1', 'step-2', 'step-3', 'step-4', 'step-5', 'step-6', 'step-7', 'step-8', 'step-9', 'step-10', 'step-11', 'step-12', 'step-13', 'step-14', 'step-15'];

        for (let h = 0; h < arrHead.length; h++) {
            if(step !== arrHead[h]){
                document.getElementById(arrHead[h]).style.display = "none";
            }else {
                if (step === arrHead[h]) {
                    document.getElementById(arrHead[h]).style.display = "block";
                    document.getElementById('progressSpan').innerHTML = document.getElementById(arrHead[h] + "p").textContent
                }
            }
        }
        $('.progressForm #progressModal').modal();
    }

</script>
</body>
</html>


