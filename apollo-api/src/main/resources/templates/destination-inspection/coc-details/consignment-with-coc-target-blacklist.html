<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:sec="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html:: headerfiles"/>
    <link rel="stylesheet" th:href="@{/assets/bootstrap3/css/bootstrap.css}"/>
    <style>
        .pagination-div {
            user-select: none;
        }

        .pagination-div span {
            border-radius: 3px;
            border: 1px solid #999;
            padding: 5px;
            margin: 10px 0px 0px 10px;
            display: inline-block
        }
        span.selected{background:#ccf;}
    </style>
</head>
<body>
<div class="top-bar" th:replace="fragments/general-form.html:: top-bar"></div>
<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d"
             th:replace="fragments/general-form.html:: side-navigation-bar"></div>
        <div class="main-content-div" id="w-node-d308c123a224-c123a20d">
            <div class="content-nav" th:replace="fragments/general-form.html:: content-navigation-bar"></div>
            <div class="content-wrap" th:with="nameBlacklistTarget=${blacklistTarget}">
                <div class="content-container">
                    <h4 class="h3-blue" style="color: #0082f3; font-weight: bold; ">Importer Blacklist</h4>
                    <div class="content-block">
                        <div class="content-block-parent" style="flex: 0 75%" th:with="nameToAdd=${actionType}">
                            <div class="row-table ">
                                <table class="table table-striped">
                                    <thead>
                                    <tr>
                                        <th>Importer Name</th>
                                        <th>Requester Name</th>
                                        <th>Requester Date</th>
                                        <th>Blacklist Status</th>
                                        <th>View Remarks</th>
                                        <th>View Details</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <!--                <a th:each="coc, iStat: ${cocs}" th:href="@{/api/inspection/supervisor/coc-details/{id}(id=${coc.id})}" class="table-row w-inline-block">-->
                                    <tr class="list" style="cursor: pointer" th:each="coc: ${session.CoCsBlacklist}">

<!--                                        <td th:text="${coc?.id}"></td>-->
<!--                                        <td th:text="${coc?.ucrNumber}"></td>-->
                                        <td th:text="${coc?.importerId?.name}"></td>
                                        <td th:text="${coc?.assignIoId?.firstName}  + ' ' + ${coc?.assignIoId?.lastName}"></td>
                                        <td th:if="${nameBlacklistTarget == 'blacklist'}" th:text="${#dates.format(coc?.blacklistRequestDate, 'dd/MM/yyyy')}"></td>
                                        <td th:if="${nameBlacklistTarget == 'target'}" th:text="${#dates.format(coc?.blacklistRequestDate, 'dd/MM/yyyy')}"></td>
                                        <td th:if="${coc?.blacklistApproved == 1}" th:text="${session?.status?.blacklistApprovedStatus}"></td>
                                        <td th:if="${coc?.blacklistApproved == 0}" th:text="${session?.status?.officerBlacklistStatus}"></td>
<!--                                        <td th:text="${coc?.approvalStatus}"></td>-->
<!--                                        <td><input type="button" name="AddRowAbove" value="AddRowAbove" onclick="viewRemarks(${coc.id},${session?.status?.blacklistProcess})"></td>-->
                                        <td><a class="btn btn-primary remarkBtn" th:href="@{/api/di/remarks-value(id=${coc.id}, remarksProcess = ${session?.status?.blacklistProcess})}">Remarks</a></td>
                                        <td><a class="btn btn-primary detailsBtn" th:href="@{/api/di/all-CoCs-user(importerId=${coc.importerId.id}, currentPage=0,pageSize=10)}">Details</a></td>

                                    </tr>

                                    </tbody>
                                </table>
                                <div class="pagination-div">
                                    <span th:if="${session.CoCsBlacklist.hasPrevious()}">
                                        <a th:href="@{/api/di/all-CoCs-target-blacklist(id=${session.currentUser.id},userRole = ${session.currentUser.userTypes.defaultRole.id},section = ${session.section.section},currentPage=${session.CoCsBlacklist.number-1},pageSize=${session.CoCsBlacklist.size})}">Previous</a>
                                    </span>
                                    <span th:if="${session.CoCsBlacklist.hasNext()}">
                                        <a th:href="@{/api/di/all-CoCs-target-blacklist(id=${session.currentUser.id},userRole = ${session.currentUser.userTypes.defaultRole.id},section = ${session.section.section},currentPage=${session.CoCsBlacklist.number+1},pageSize=${session.CoCsBlacklist.size})}">Next</a>
                                    </span>
                                </div>
                            </div>
                        </div>
<!--                        <div class="filter-block" sec:authorize="hasAuthority('CD_OFFICER_READ')">-->
<!--                            <div class="filter-block-title">-->
<!--                                <div class="filter-title">Filter By:</div>-->
<!--                            </div>-->
<!--                            <div class="w-form">-->
<!--                                <form id="email-form" name="email-form" data-name="Email Form">-->
<!--                                    <div class="form-div"><label for="name">Approval Status:</label>-->
<!--                                        <label class="w-checkbox">-->
<!--                                            <input type="checkbox" id="checkbox" name="checkbox" data-name="Checkbox"-->
<!--                                                   class="w-checkbox-input">-->
<!--                                            <span class="w-form-label">Pending Review</span>-->
<!--                                        </label>-->
<!--                                        <label class="w-checkbox">-->
<!--                                            <input type="checkbox" id="checkbox-2" name="checkbox-2" data-name="Checkbox 2" class="w-checkbox-input">-->
<!--                                            <span class="w-form-label">Approved</span>-->
<!--                                        </label>-->
<!--                                    </div>-->
<!--                                    <div>-->
<!--                                        <label for="name">Date Range</label>-->
<!--                                        <div class="date-field-div">-->
<!--                                            <div class="date-field-label">From</div>-->
<!--                                            <input type="text" class="date-field w-input" maxlength="256" name="name" data-name="Name" id="name">-->
<!--                                        </div>-->
<!--                                        <div class="date-field-div">-->
<!--                                            <div class="date-field-label">To</div>-->
<!--                                            <input type="text" class="date-field w-input" maxlength="256" name="name-2"-->
<!--                                                   data-name="Name 2" id="name-2">-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <input type="submit" value="Apply Filter" data-wait="Please wait..."-->
<!--                                           class="button w-button">-->
<!--                                </form>-->
<!--                                <div class="w-form-done">-->
<!--                                    <div>Thank you! Your submission has been received!</div>-->
<!--                                </div>-->
<!--                                <div class="w-form-fail">-->
<!--                                    <div>Oops! Something went wrong while submitting the form.</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                        <div class="filter-block" sec:authorize="hasAuthority('DI_CLUSTER_SUPERVISOR_READ')">-->
<!--                            <div class="filter-block-title">-->
<!--                                <div class="filter-title">Filter By:</div>-->
<!--                            </div>-->
<!--                            <div class="w-form">-->
<!--                                <form data-name="Email Form" id="supervisor-form" name="email-form">-->
<!--                                    <div class="form-div"><label for="name">Assignment Officer:</label>-->
<!--                                        <label class="w-checkbox">-->
<!--                                            <input class="w-checkbox-input" data-name="Checkbox"-->
<!--                                                   id="supervisor_checkbox" name="checkbox" type="checkbox">-->
<!--                                            <span class="w-form-label">Assigned</span>-->
<!--                                        </label>-->
<!--                                        <label class="w-checkbox">-->
<!--                                            <input class="w-checkbox-input" data-name="Checkbox 2"-->
<!--                                                   id="supervisor_checkbox-2" name="checkbox-2" type="checkbox">-->
<!--                                            <span class="w-form-label">Not Assigned</span>-->
<!--                                        </label>-->
<!--                                    </div>-->
<!--                                    <div>-->
<!--                                        <label for="name">Date Range</label>-->
<!--                                        <div class="date-field-div">-->
<!--                                            <div class="date-field-label">From</div>-->
<!--                                            <input class="date-field w-input" data-name="Name" id="supervisor_name"-->
<!--                                                   maxlength="256" name="name" type="text">-->
<!--                                        </div>-->
<!--                                        <div class="date-field-div">-->
<!--                                            <div class="date-field-label">To</div>-->
<!--                                            <input class="date-field w-input" data-name="Name 2" id="supervisor_name-2"-->
<!--                                                   maxlength="256" name="name-2" type="text">-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                    <input class="button w-button" data-wait="Please wait..." type="submit"-->
<!--                                           value="Apply Filter">-->
<!--                                </form>-->
<!--                                <div class="w-form-done">-->
<!--                                    <div>Thank you! Your submission has been received!</div>-->
<!--                                </div>-->
<!--                                <div class="w-form-fail">-->
<!--                                    <div>Oops! Something went wrong while submitting the form.</div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
                    </div>
                </div>
            </div>

            <div sec:authorize="hasAuthority('DI_CLUSTER_SUPERVISOR_READ')" class="myForm">
<!--                <form id="assign-form"   name="assign-form" th:action="@{/api/di/assign/officer}" method="post" th:object="${coc}">-->
                    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 style="font-weight: 600; " class="modal-title" id="exampleModalLabel">Blacklist Remarks</h5>
<!--                                    <p class="heading">Blacklist Remarks</p>-->
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true" class="white-text">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="row">
<!--                                        <div class="col-3">-->
<!--                                            <p></p>-->
<!--                                            <p class="text-center"><i class="fas fa-shopping-cart fa-4x"></i></p>-->
<!--                                        </div>-->

                                        <div class="col-9">
                                            <p id="pText" style="text-align: center">No Remarks Found</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-secondary" data-dismiss="modal" onClick="refreshPage()" type="button">Close
                                    </button>
<!--                                    <input type="submit" class="btn btn-primary" value="Save"/>-->
                                </div>
                            </div>
                        </div>
                    </div>
<!--                </form>-->
            </div>
        </div>
    </div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="../assets/js/webflow.js" type="text/javascript"></script>
<script th:src="@{/assets/bootstrap3/js/bootstrap.js}" type="text/javascript"></script>
<!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
<script>
    function viewRemarks(CocID) {
        let methodId2 = CocID;

        $.ajax({
            method: "GET",
            url: `/api/di/remarks-value(id=${methodId2})`,
            data: methodId2,
            success(response){
                console.log(response);
                var s = response;
                $("#pi").html(s);
                $('.myForm #exampleModal').modal();

            }
        })
    }
    $('.row-table .remarkBtn').on('click', function (event) {
        event.preventDefault();
        var href = $(this).attr('href');
        console.log(href);
        $.get(href,function(remarks,status){
            console.log(remarks);
            document.getElementById('pText').innerHTML = remarks.remarks;
            // $('.myForm #pi').html(remarks.remarks)
        });

        $('.myForm #exampleModal').modal();
    });

    function refreshPage() {
        window.location.reload();
    }
</script>

</body>
</html>


