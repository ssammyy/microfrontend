<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Wed Mar 18 2020 20:03:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5e70fb3a565ebdc05ddb37cf" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>KEBS</title>
    <th:block th:include="fragments/general-form.html :: headerfiles"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/accordion.css}"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <style>
        .blogShort{
            border-bottom:1px solid #ddd;
            font-size: 16px;

        }
        .btn-blog {
            color: #ffffff;
            background-color: #37d980;
            border-color: #37d980;
            border-radius:0;
            margin-bottom:10px
        }
        .btn-blog:hover,
        .btn-blog:focus,
        .btn-blog:active,
        .btn-blog.active,
        .open .dropdown-toggle.btn-blog {
            color: white;
            background-color:#34ca78;
            border-color: #34ca78;
        }
    </style>
</head>
<body>
<div class="top-bar" th:replace="fragments/general-form.html :: top-bar"></div>
</div>
<div class="section">
    <div class="w-layout-grid main-grid">
        <div class="main-grid-side-navigation" id="w-node-d308c123a20f-c123a20d"
             th:replace="fragments/general-form.html :: side-navigation-bar"></div>
        <div id="w-node-27962c2db181-c676b3e3" class="main-content-div">
            <div class="content-nav" th:replace="fragments/general-form.html :: content-navigation-bar"></div>
            <div class="content-wrap">
                <div class="content-container">
                    <h5 class="h3-blue" style="color: #0082f3; font-weight: bold; font-size: 16px; ">COC Reconciliation Details</h5>
                    <div class="content-block">
                        <div class="content-block-parent" style="flex: 0 75%" >
                            <div style="margin-bottom: 40px">
                                <h6 class="h3-blue" style="font-size: 16px;">Report Details Details</h6>
                                <div style="background: #FFFFFF" class="applicant_details_container">
                                    <div class="detail-list application_details">
                                        <ul class="w-list-unstyled">
                                            <li class="list-item-accordion" th:if="${coc.invoiced} == 1" >
                                                <div class="list-title-accordion">Invoice Status</div>
                                                <div class="list-text-accordion" th:text="${invoice.paidStatus} ? 'Paid' : 'Not Paid'"></div>
                                            </li>
                                            <li class="list-item-accordion" th:if="${coc.invoiced} == 1 and ${invoice.paidStatus} == 1">
                                                <div class="list-title-accordion" >Full Amount Paid</div>
                                                <div class="list-text-accordion" th:text="${paidAmoutnCheck} > 0 ? 'NO' : 'YES'"></div>
                                            </li>
                                            <li class="list-item-accordion" th:if="${coc.invoiced} == 1 and ${invoice.paidStatus} == 1">
                                                <div class="list-title-accordion" >Amount Paid</div>
                                                <div class="list-text-accordion" th:text="${invoice.paidStatus} ? ${invoice.totalAmount} : 'Not Paid'"></div>
                                            </li>
                                            <li class="list-item-accordion" th:if="${coc.invoiced} == 1 and ${invoice.paidStatus} == 1">
                                                <div class="list-title-accordion" >Invoice Balance</div>
                                                <div class="list-text-accordion" th:text="${paidAmoutnCheck} > 0 ? ${paidAmoutnCheck} : 'No Balance'"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Seal No</div>
                                                <div class="list-text-accordion"  th:text="${coc.sealNo}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Penalties</div>
                                                <div class="list-text-accordion"  th:text="${penalty}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion">Route Type</div>
                                                <div class="list-text-accordion" th:text="${coc.routeType}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion">Certificate No</div>
                                                <div class="list-text-accordion" th:text="${coc.certificateNo}"></div>
                                            </li>
                                            <li class="list-item-accordion">
                                                <div class="list-title-accordion" >Route</div>
                                                <div class="list-text-accordion"  th:text="${coc?.route}"></div>
                                            </li>
                                            <li class="list-item-accordion">
                                                <div class="list-title-accordion" >KEC NO</div>
                                                <div class="list-text-accordion"  th:text="${coc?.kecNo}"></div>
                                            </li>
                                            <li class="list-item-accordion">
                                                <div class="list-title-accordion" >Date Created</div>
                                                <div class="list-text-accordion"  th:text="${#dates.format(coc?.createdOn, 'dd/MM/yyyy')}"></div>
                                            </li>
<!--                                            <li class="list-item-accordion">-->
<!--                                                <div class="list-title-accordion" >Certification Fee</div>-->
<!--                                                <div class="list-text-accordion"  th:text="${coc.certificationFee}"></div>-->
<!--                                            </li>-->
                                            <li class="list-item-accordion">
                                                <div class="list-title-accordion" >IDF NO</div>
                                                <div class="list-text-accordion"  th:text="${coc.idfNo}"></div>
                                            </li>
                                            <li class="list-item-accordion">
                                                <div class="list-title-accordion" >FOB</div>
                                                <div class="list-text-accordion"  th:text="${coc.fobValue}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Charge For Verication</div>
                                                <div class="list-text-accordion"  th:text="${coc.chargeForVerication}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Importer </div>
                                                <div class="list-text-accordion"  th:text="${coc.impoterName}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Exporter Name</div>
                                                <div class="list-text-accordion"  th:text="${coc.exmpoterName}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Inspection Fee</div>
                                                <div class="list-text-accordion"  th:text="${coc.inspectionFee}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Verification Fee</div>
                                                <div class="list-text-accordion"  th:text="${coc.verificationFee}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Difference Btw (Charge for Verification - Inspection Fee)</div>
                                                <div class="list-text-accordion"  th:text="${coc.diff}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Test</div>
                                                <div class="list-text-accordion"  th:text="${coc.test}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Royalties To Kebs</div>
                                                <div class="list-text-accordion"  th:text="${coc.royaltiesToKebs}"></div>
                                            </li>

                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Country Of Supply</div>
                                                <div class="list-text-accordion"  th:text="${coc.countryOfSupply}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Insuance Date</div>
                                                <div class="list-text-accordion"  th:text="${coc.insuanceDate}"></div>
                                            </li>
                                            <li class="list-item-accordion" >
                                                <div class="list-title-accordion" >Remarks</div>
                                                <div class="list-text-accordion"  th:text="${coc.remarks}"></div>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="filter-block">
                            <div class="filter-block-title">
                                <div class="filter-title">Actions:</div>
                            </div>
                            <div>
                                <a  style="color: white" th:href="@{/api/di/pvoc/generate-penalty-invoice(id = ${coc.id})}" th:if="${coc.invoiced == 1 && coc.penaltyInvoiced ==1}" class="filter-link">View Penalty Invoice</a>
                                <a  style="color: white" th:href="@{/api/di/pvoc/reconciliation/report(id = ${coc.id})}" th:if="${coc.invoiced == 1}" class="filter-link">View Reconciliation Invoice</a>
                                <a  style="color: white"  th:if="${coc.invoiced != 1}" class="filter-link addInvoiceBtn">Generate Reconcialition Invoice</a>
                                <a  style="color: white"  class="filter-link addInvoiceBtn" th:if="${coc.invoiced} == 1 and ${invoice.paidStatus} == 1"> <span th:if="${paidAmoutnCheck} > 0" >Generate  Invoice</span></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="remarksForm">
                <form id="kebsInvoiceForm"   name="remarksForm" th:action="@{/api/di/pvoc/save-generated-reconciliation-invoice/{id}/{reason}/(id = ${coc.id}, saveReason = ${paidAmoutnCheck} ? 'supplementary' : 'invoice')}" method="post" th:object="${reconsiliationInvoice}" >
                    <div class="modal fade" id="kebsInvoiceModal" tabindex="-1" role="dialog" aria-labelledby="remarksModalLabel" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="remarksModalLabel">Reconciliation Invoice Form</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label for="soldTo" class="col-form-label">Sent To</label>
                                        <input type="text" class="form-control" name="soldTo" id="soldTo" readonly th:value="${partner.partnerAddress1}" >
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceNo" class="col-form-label">Invoice Number</label>
                                        <input type="text" class="form-control" name="invoiceNumber" readonly th:value="${invoiceNo}"  id="invoiceNo">
                                    </div>
                                    <div class="form-group">
                                        <label for="invoiceDate" class="col-form-label">Invoice Date</label>
                                        <input type="date" class="form-control" name="invoiceDate" id="invoiceDate">
                                    </div>
                                    <div class="form-group">
                                        <label for="orderDate" class="col-form-label">Order Date</label>
                                        <input type="date" class="form-control" name="orderDate" id="orderDate">
                                    </div>
                                    <div class="form-group">
                                        <label for="orderNumber" class="col-form-label">Order Number</label>
                                        <input type="text" id="orderNumber" class="form-control" name="orderNumber" readonly th:value="${orderNumber}">
                                    </div>
                                    <input type="hidden" name="partner" th:value="${partner.id}">
                                    <input type="hidden" name="reconcialitionId" th:value="${coc.id}">
                                    <div class="form-group">
                                        <label for="customerNumber" class="col-form-label">Customer Number</label>
                                        <input type="text" class="form-control" name="customerNumber" th:value="${customerNumber}"  id="customerNumber">
                                    </div>
                                    <div class="form-group">
                                        <label for="poNumber" class="col-form-label">PO Number</label>
                                        <input type="text" class="form-control" name="poNumber"  id="poNumber">
                                    </div>
                                    <div class="form-group">
                                        <label for="shipVia" class="col-form-label">Ship Via</label>
                                        <input type="text" class="form-control" id="shipVia" name="shipVia" >
                                    </div>
                                    <div class="form-group">
                                        <label for="termsCode" class="col-form-label">Terms Code</label>
                                        <input type="text" class="form-control" name="termsCode" id="termsCode">
                                    </div>
                                    <div class="form-group">
                                        <label for="description" class="col-form-label">Descrption</label>
                                        <textarea name="description" id="description" class="form-control" cols="30" rows="10"></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="amountDue" class="col-form-label">Amount</label>
                                        <input type="text" id="amountDue" class="form-control" name="amountDue" readonly th:value="${paidAmoutnCheck} ? ${paidAmoutnCheck} : ${coc.royaltiesToKebs}" >
                                    </div>
                                    <div class="form-group">
                                        <label for="dueDate" class="col-form-label">Due Date</label>
                                        <input type="date" id="dueDate" class="form-control" name="dueDate">
                                    </div>
                                    <div class="form-group">
                                        <label for="discountAmount" class="col-form-label">Discount Amount</label>
                                        <input type="text" id="discountAmount" class="form-control" name="discountAmount" readonly th:value="${discount}" >
                                    </div>
                                    <div class="form-group">
                                        <label for="totalAmount" class="col-form-label">Total Amount</label>
                                        <input type="text" id="totalAmount" class="form-control" name="totalAmount" readonly th:value="${paidAmoutnCheck} ? ${paidAmoutnCheck} : ${coc.royaltiesToKebs}"  >
                                    </div>
                                    <div class="form-group">
                                        <label for="discountDate" class="col-form-label">Discount Date</label>
                                        <input type="date" id="discountDate" class="form-control" name="discountDate">
                                    </div>
<!--                                    <input type="hidden" name="accountName" value="Kenya Burea of Standards">-->
<!--                                    <input type="hidden" name="currency" th:value="USD">-->
<!--                                    <input type="hidden" name="bankCode" th:value="12003">-->
<!--                                    <input type="hidden" name="bankName" th:value="National Bank Of Kenya">-->
<!--                                    <input type="hidden" name="kebsAccountNumber" th:value="0100-302-830-604">-->
<!--                                    <input type="hidden" name="branch" th:value="Harambee Avenue">-->
<!--                                    <input type="hidden" name="swiftCode" th:value="NBKEKENXXXX">-->
<!--                                    <input type="hidden" name="vatNumber" th:value="0130253A">-->
<!--                                    <input type="hidden" name="pinNumber" th:value="P051092837Y">-->
<!--                                    <input type="hidden" name="vatNumber" th:value="0130253A">-->
<!--                                    <input type="hidden" name="vatNumber" th:value="0130253A">-->
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                    <input type="submit" class="btn btn-primary" value="Save"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
        </div>
    </div>
</div>
</div>
<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script src="../assets/js/webflow.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<!-- [if lte IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/placeholders/3.0.2/placeholders.min.js"></script><![endif] -->
<script>
    var acc = document.getElementsByClassName("accordion");
    // var btn = document.getElementsByClassName("button w-button eBtn");
    var i;

    for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
            this.classList.toggle("active");
            this.style.border = "none";
            // this.style.position = "sticky"
            var panel = this.nextElementSibling;
            if (panel.style.maxHeight) {
                panel.style.maxHeight = null;
            } else {
                panel.style.maxHeight = panel.scrollHeight + "px";
                // panel.style.position = "-webkit-sticky"
                // panel.style.position = "sticky"
            }
        });
    }



</script>
<script>
    var remarkType = '';
    $(document).ready(function(){

        $('.filter-block .addRemarksBtn').on('click',function (event) {

            $('.remarksForm #remarksModal').modal();
        });
        $('.filter-block .hodActionBtn').on('click',function (event) {

            $('.remarksForm #actionModal').modal();
        });

        $('.filter-block .addEnquirelyBtn').on('click',function (event) {

            $('.remarksForm #kebsInquirelyModal').modal();
        });

        $('.replyPartiner').on('click',function (event) {

            $('.remarksForm #replyPartnerModal').modal();
        });

        $('.analysePartnerResponse').on('click',function (event) {
            $('.remarksForm #replyPartnerAnalysisModal').modal();
        });
        $('.addInvoiceBtn').on('click',function (event) {
            $('.remarksForm #kebsInvoiceModal').modal();
        });

        $('.filter-block .hodAssignBtn').on('click',function (event) {

            $('.remarksForm #assignMpvoFormModal').modal();
        });

    });

    function formAction() {

    }

</script>
</body>
</html>


