<!--
  ~ /*
  ~  *
  ~  *
  ~  *  *    Copyright (c) ${YEAR}.   BSK Global Technologies
  ~  *  *
  ~  *  *    Licensed under the Apache License, Version 2.0 (the "License");
  ~  *  *    you may not use this file except in compliance with the License.
  ~  *  *    You may obtain a copy of the License at
  ~  *  *
  ~  *  *       http://www.apache.org/licenses/LICENSE-2.0
  ~  *  *
  ~  *  *    Unless required by applicable law or agreed to in writing, software
  ~  *  *    distributed under the License is distributed on an "AS IS" BASIS,
  ~  *  *    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  *  *   See the License for the specific language governing permissions and
  ~  *  *   limitations under the License.
  ~  *
  ~  */
  -->

<!DOCTYPE html>
<!--  This site was created in Webflow. http://www.webflow.com  -->
<!--  Last Published: Fri Jul 17 2020 07:38:10 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="5f1144e89682d19698399ea3" data-wf-site="5e70fb3a565ebd99c1db37ce"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Login</title>
    <meta content="Login" property="og:title">
    <meta content="Login" property="twitter:title">
    <meta content="width=device-width, initial-scale=1" name="viewport">
    <meta content="Webflow" name="generator">
    <link rel="stylesheet" th:href="@{/css/pageLoad.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/normalize.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/webflow.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/css/kebs.webflow.css}" type="text/css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"/>
    <script th:src="@{/js/webfont.js}" type="text/javascript"></script>
    <script type="text/javascript">WebFont.load({google: {families: ["Open Sans:300,300italic,400,400italic,600,600italic,700,700italic,800,800italic"]}});</script>
    <!-- [if lt IE 9]>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js" type="text/javascript"></script><![endif] -->
    <script type="text/javascript">!function (o, c) {
        var n = c.documentElement, t = " w-mod-";
        n.className += t + "js", ("ontouchstart" in o || o.DocumentTouch && c instanceof DocumentTouch) && (n.className += t + "touch")
    }(window, document);</script>
    <link rel="shortcut icon" th:href="@{/images/favicon.ico}" type="image/x-icon">
    <link rel="apple-touch-icon" th:href="@{/images/webclip.png}">
</head>
<body>
<div id ="spinnerContainer"><div class="spinner"></div></div>
<div class="top-bar flex">
    <div class="div-block-8"></div>
    <div class="top-bar-grid stretch">
        <div class="div-block-3" id="w-node-197ded4bbf6f-98399ea3">
            <a class="brand w-inline-block" href="/" th:href="@{/index}">
                <img alt="" th:src="@{/images/Component-1.png}" width="145">
            </a>
        </div>
        <h1 class="white" id="w-node-437b76b02fc3-98399ea3" th:text="${session.applicationName}"></h1>
    </div>
</div>
<div class="section">
    <div class="_2colwrapper w-row">
        <div class="column w-col w-col-6">
            <div class="login-wrapper w-form">
                <h1>Log in to continue</h1>
                <form id="login-form" method="POST" name="login-form" th:action="@{/auth/login-service}">
                    <label for="username">Username</label>
                    <input class="w-input" data-name="Email" id="username" maxlength="256" name="username" required="" type="text">
                    <label for="password">Password</label>
                    <input class="w-input" data-name="Password" id="password" maxlength="256" name="password" placeholder="" required="" type="password">
                    <label for="otp">Enter OTP Code</label>
                    <div class="input-group mb-3">
                        <input class="w-input" data-name="otp" id="otp" maxlength="50" name="otp" placeholder="" required="" type="text" style="width: 250px; vertical-align: middle;">
                        <span class="input-group-btn">
<!--                            <button class="btn btn-default" type="button" id="get_otp">Get OTP</button>-->
                            <input type="button" value="Get OTP Code" class="btn btn-blue" onClick="getOTPCodeBtn(this)" id="verificationCode" style="background-color: #3898ec; color: white;">
                        </span>
                    </div>
                    <input id="login-btn" class="w-button" type="submit" value="Submit" style="display:none;">
                    <a class="link" th:href="@{/api/auth/signup/forgot-password}">Forgot Password?</a>
                    <div class="create-account">Dont have an account? <br>
                        <a th:href="@{/api/auth/signup/user}">Create Account/SignUp?</a><br>
                        <a th:href="@{/api/ms/complaints/new}">Report Complaint?</a><br>
                        <!--                        <a th:href="@{/api/auth/signup/manufacturer}">Company?</a>-->
                        <!--                        <a th:href="@{/api/auth/signup/user(messageUser='Employee')}">Employee?</a>-->
                        <!--                        <a th:href="@{/api/auth/signup/importerExporter(userId = '495')}">Importer?</a>-->
                        <!--                        <a th:href="@{/api/auth/signup/user}">SignUp?</a>-->
                        <!--                        <a th:href="@{/api/auth/signup/importerExporter(userName='EXPORTER')}">Exporter?</a>-->
                        <!--                        <a th:href="@{/}">Partner?</a>-->
                    </div>
                </form>
                <div class="w-form-done">
                    <div>Thank you! Your submission has been received!</div>
                </div>
                <div class="w-form-fail">
                    <div>Oops! Something went wrong while submitting the form.</div>
                </div>
            </div>
        </div>
        <div class="column bg-image w-col w-col-6"></div>
    </div>

</div>
<!-- Submit OTP Modal -->
<div class="modal fade" id="modal-submit-otp" tabindex="-1" role="dialog" aria-labelledby="myModalLabelSubmitOTP" aria-hidden="true">
    <form role="form" id="form-submit-otp">
        <div class="modal-dialog large-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title" id="myModalLabelSubmitOTP">
                        <i class="fa fa-edit"></i>&nbsp;&nbsp;Enter OTP Code
                    </h4>
                </div>
                <div class="modal-body" id="otp-content">
                    <input type="hidden" id="final_username" value="" />
                    <input type="hidden" id="final_password" value="" />
                    <div class="form-group row">
                        <label for="otp_code" class="col-sm-5 control-label">OTP Code:</label>
                        <div class="col-sm-7">
                            <input type="text" name="otp_code" id="otp_code" placeholder="OTP Code"
                                   class="form-control  input-sm"/>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <input class="btn btn-info waves-effect waves-light" type="submit"
                           value="Submit" id="btn-submit-otp">
                    <a href="#" class="btn btn-danger waves-effect waves-light" data-dismiss="modal">Cancel</a>
                </div>
            </div>
        </div>
    </form>
</div>

<script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.4.1.min.220afd743d.js" type="text/javascript" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<script th:src="@{/js/webfont.js}" type="text/javascript"></script>
<script th:src="@{/js/spinner.js}" type="text/javascript"></script>
<script th:src="@{/assets2/bootstrap-4.5.3-dist/js/bootstrap.js}"></script>
<script>
    document.onreadystatechange = function(){
        showSpinnerOnLoad(document)
    }

    function loadSpinner(){
        showSpinner(document)
    }
</script>
<script>
    var wait=60;
    function getOTPCodeBtn(btn) {
        if ($("#username").val()==""){
            alert("Please fill in the username first.");
            return;
        }

        if (wait == 0) {
            btn.removeAttribute("disabled");
            $(btn).val("Get OTP Code ");
            wait = 60;
        } else {
            $(btn).attr("disabled", true);
            $(btn).val(wait + " secs");
            // btn.value = "Obtain again in "+wait +" seconds";
            if (wait == 60) {
                getMobileCode();
            }
            wait--;
            setTimeout(function() {
                getOTPCodeBtn(btn);
            }, 1000)
        }
    }

    function getMobileCode(){
                var loginInfo = {
                    "username": $('#username').val(),
                    "password": $('#password').val()
                };
                var loginInfoJson = JSON.stringify(loginInfo)
        $.ajax({
            cache : true,
            type : "POST",
            url : "/api/v1/otp",
            headers: {
                'Content-Type': 'application/json'
            },
            data: loginInfoJson,
            async : false,
            dataType : 'json',
            error : function(request) {
                alert("Connection error");
            },
            success :function(json){
                console.log(json);
                $("#login-btn").show();
            }
        });
    }

</script>
</body>
</html>