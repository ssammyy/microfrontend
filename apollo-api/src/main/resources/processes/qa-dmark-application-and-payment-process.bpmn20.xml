<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:flowable="http://flowable.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath" targetNamespace="http://www.flowable.org/processdef">
  <process id="QADMApplicationAndPaymentProcess" name="QA Dmark Application And Payment Process" isExecutable="true">
    <startEvent id="startEvent1" flowable:formFieldValidation="true"></startEvent>
    <userTask id="QaDMAppSubmitApplication" name="Submit Application " flowable:formFieldValidation="true"></userTask>
    <exclusiveGateway id="exclusivegateway1"></exclusiveGateway>
    <exclusiveGateway id="exclusivegateway2"></exclusiveGateway>
    <serviceTask id="QaDMAppSendPaymentRequest" name="Send Payment Request " flowable:expression="${qualityAssuranceBpmn.sendManufacturerPaymentRequestRequest(permitId)}"></serviceTask>
    <sequenceFlow id="flow1" sourceRef="startEvent1" targetRef="QaDMAppSubmitApplication"></sequenceFlow>
    <sequenceFlow id="flow2" sourceRef="QaDMAppSubmitApplication" targetRef="exclusivegateway1"></sequenceFlow>
    <userTask id="QaDMAppPCMCheckComplete" name="PCM: Check Foreign Application Completeness" flowable:formFieldValidation="true">
      <extensionElements>
        <flowable:taskListener event="assignment" expression="${bpmnNotifications.sendEmailToCandidateGroup(candidateGroup)}"></flowable:taskListener>
      </extensionElements>
    </userTask>
    <exclusiveGateway id="sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD"></exclusiveGateway>
    <sequenceFlow id="flow7" sourceRef="QaDMAppPCMCheckComplete" targetRef="sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD"></sequenceFlow>
    <userTask id="QaDMAppManufacturerCorrection" name="Manufacturer: Perform Corrective Action" flowable:formFieldValidation="true">
      <extensionElements>
        <flowable:taskListener event="assignment" expression="${bpmnNotifications.sendEmail(task)}"></flowable:taskListener>
      </extensionElements>
    </userTask>
    <receiveTask id="QaDMAppReceivePayment" name="Receive Payment "></receiveTask>
    <serviceTask id="QaDMAppSendPaymentConfirmation" name="Send Payment Confirmation" flowable:expression="${qualityAssuranceBpmn.sendManufacturerPaymentConfirmation(permitId)}"></serviceTask>
    <sequenceFlow id="flow11" sourceRef="QaDMAppSendPaymentRequest" targetRef="QaDMAppReceivePayment"></sequenceFlow>
    <sequenceFlow id="flow12" sourceRef="QaDMAppReceivePayment" targetRef="QaDMAppSendPaymentConfirmation"></sequenceFlow>
    <sequenceFlow id="flow8" sourceRef="sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD" targetRef="QaDMAppSendPaymentRequest">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${foreignApplicationComplete==1}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow9" sourceRef="sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD" targetRef="QaDMAppManufacturerCorrection">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${foreignApplicationComplete==0}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow10" sourceRef="QaDMAppManufacturerCorrection" targetRef="QaDMAppPCMCheckComplete"></sequenceFlow>
    <sequenceFlow id="flow4" sourceRef="exclusivegateway1" targetRef="QaDMAppSendPaymentRequest">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isRenewal==1}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow5" sourceRef="exclusivegateway2" targetRef="QaDMAppSendPaymentRequest">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isDomestic==1}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow3" sourceRef="exclusivegateway1" targetRef="exclusivegateway2">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isRenewal==0}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="flow6" sourceRef="exclusivegateway2" targetRef="QaDMAppPCMCheckComplete">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${isDomestic==0}]]></conditionExpression>
    </sequenceFlow>
    <endEvent id="endevent1" name="End">
      <extensionElements>
        <flowable:executionListener event="end" expression="${qualityAssuranceBpmn.endDmApplicationProcess(permitId)}"></flowable:executionListener>
      </extensionElements>
    </endEvent>
    <sequenceFlow id="flow13" sourceRef="QaDMAppSendPaymentConfirmation" targetRef="endevent1"></sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_QADMApplicationAndPaymentProcess">
    <bpmndi:BPMNPlane bpmnElement="QADMApplicationAndPaymentProcess" id="BPMNPlane_QADMApplicationAndPaymentProcess">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="100.0" y="163.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppSubmitApplication" id="BPMNShape_QaDMAppSubmitApplication">
        <omgdc:Bounds height="80.0" width="100.0" x="218.5" y="138.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway1" id="BPMNShape_exclusivegateway1">
        <omgdc:Bounds height="40.0" width="40.0" x="375.0" y="158.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="exclusivegateway2" id="BPMNShape_exclusivegateway2">
        <omgdc:Bounds height="40.0" width="40.0" x="585.0" y="158.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppSendPaymentRequest" id="BPMNShape_QaDMAppSendPaymentRequest">
        <omgdc:Bounds height="80.0" width="100.0" x="465.0" y="285.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppPCMCheckComplete" id="BPMNShape_QaDMAppPCMCheckComplete">
        <omgdc:Bounds height="80.0" width="100.0" x="705.0" y="138.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD" id="BPMNShape_sid-A840605B-70B8-4EEA-9026-20ADF9AD67FD">
        <omgdc:Bounds height="40.0" width="40.0" x="878.5" y="158.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppManufacturerCorrection" id="BPMNShape_QaDMAppManufacturerCorrection">
        <omgdc:Bounds height="80.0" width="100.0" x="705.0" y="20.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppReceivePayment" id="BPMNShape_QaDMAppReceivePayment">
        <omgdc:Bounds height="80.0" width="100.0" x="467.5" y="412.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="QaDMAppSendPaymentConfirmation" id="BPMNShape_QaDMAppSendPaymentConfirmation">
        <omgdc:Bounds height="80.0" width="100.0" x="645.0" y="412.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="endevent1" id="BPMNShape_endevent1">
        <omgdc:Bounds height="28.0" width="28.0" x="877.5" y="437.0"></omgdc:Bounds>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
        <omgdi:waypoint x="744.9499999999957" y="451.74554707379133"></omgdi:waypoint>
        <omgdi:waypoint x="877.5001746221633" y="451.07099168023"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
        <omgdi:waypoint x="129.94999922433917" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="218.5" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow2" id="BPMNEdge_flow2">
        <omgdi:waypoint x="318.44999999992" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="375.0" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
        <omgdi:waypoint x="414.9449003067485" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="585.0" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow4" id="BPMNEdge_flow4">
        <omgdi:waypoint x="395.0" y="197.94321889870835"></omgdi:waypoint>
        <omgdi:waypoint x="395.0" y="325.0"></omgdi:waypoint>
        <omgdi:waypoint x="465.0" y="325.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow5" id="BPMNEdge_flow5">
        <omgdi:waypoint x="605.0" y="197.94321889870835"></omgdi:waypoint>
        <omgdi:waypoint x="605.0" y="325.0"></omgdi:waypoint>
        <omgdi:waypoint x="564.9499999999405" y="325.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow6" id="BPMNEdge_flow6">
        <omgdi:waypoint x="624.943354430356" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="704.9999999999363" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow7" id="BPMNEdge_flow7">
        <omgdi:waypoint x="804.9499999999629" y="178.0"></omgdi:waypoint>
        <omgdi:waypoint x="878.5" y="178.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow10" id="BPMNEdge_flow10">
        <omgdi:waypoint x="755.0" y="99.95"></omgdi:waypoint>
        <omgdi:waypoint x="755.0" y="138.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow11" id="BPMNEdge_flow11">
        <omgdi:waypoint x="515.7864173228346" y="364.95000000000005"></omgdi:waypoint>
        <omgdi:waypoint x="516.7125984251968" y="412.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow8" id="BPMNEdge_flow8">
        <omgdi:waypoint x="898.4322033898305" y="197.88237288135593"></omgdi:waypoint>
        <omgdi:waypoint x="898.0" y="325.0"></omgdi:waypoint>
        <omgdi:waypoint x="564.949999999925" y="325.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
        <omgdi:waypoint x="567.45" y="452.0"></omgdi:waypoint>
        <omgdi:waypoint x="644.9999999999151" y="452.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="flow9" id="BPMNEdge_flow9">
        <omgdi:waypoint x="898.415611814346" y="158.07601351351352"></omgdi:waypoint>
        <omgdi:waypoint x="898.0" y="60.0"></omgdi:waypoint>
        <omgdi:waypoint x="804.9499999999686" y="60.0"></omgdi:waypoint>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>