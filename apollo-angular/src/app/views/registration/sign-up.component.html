<div [ngSwitch]="step">
  <div *ngSwitchCase="0">
    <form (ngSubmit)="onClickBrsLookup()" [formGroup]="stepZeroForm" action="" enctype="multipart/form-data" class="form" method="post">
      <h2 class="welcome">
        Enter details below to validate company
      </h2>
      <div class="form-body">

      <div style="margin-top: 3%" class="form-group">
        <label class="input-placeholder"><b>Company Registration Number</b></label>
        <input [ngClass]="{ 'is-invalid': submitted && formStepZeroForm.registrationNumber.errors }"
               aria-describedby="inputGroup-sizing-sm" aria-label="Small"
               class="form-control two-column-input" formControlName="registrationNumber" id="registrationNumber" type="text"
               name="registrationNumber" placeholder="Company registration number" style="width: 60%">
        <div *ngIf="submitted && formStepZeroForm.registrationNumber.errors" class="invalid-feedback">
          <div *ngIf="formStepZeroForm.registrationNumber.errors.required">Company registration number is required</div>
        </div>
      </div>

      <div style="margin-top: 3%" class="form-group">
        <label class="input-placeholder"><b>Director's Id Number</b></label>
        <input [ngClass]="{ 'is-invalid': submitted && formStepZeroForm.directorIdNumber.errors }"
               aria-describedby="inputGroup-sizing-sm" aria-label="Small"
               class="form-control two-column-input" formControlName="directorIdNumber" id="directorIdNumber" type="text"
               name="directorIdNumber" placeholder="The id number of one director" style="width: 60%">
        <div *ngIf="submitted && formStepZeroForm.directorIdNumber.errors" class="invalid-feedback">
          <div *ngIf="formStepZeroForm.directorIdNumber.errors.required">The id number of one director is required</div>
        </div>

      </div>
      <br>
      <div>
        <button type="submit"  class="login-button">VALIDATE</button>
      </div>
      </div>

    </form>

  </div>

  <div *ngSwitchCase="1">
    <form (ngSubmit)="onClickNext(stepOneForm.valid)" [formGroup]="stepOneForm" action="" class="form" enctype="multipart/form-data" method="post">
      <div class="form-body">
        <div class="container-fluid">
        <div class="row">
          <h2 class="welcome">
            General Company Information
          </h2>
        </div>
        <div class="row input-row">

          <div class="col">

            <div class="form-group">
              <label class="input-placeholder"><b>Company Registration Number</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepOneForm.registrationNumber.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="registrationNumber" id="registrationNumber"
                     name="registrationNumber" placeholder="Company registration number" required="required">
              <div *ngIf="submitted && formStepOneForm.registrationNumber.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.registrationNumber.errors.required">The id number of one director is required</div>
              </div>

            </div>
          </div>

          <div class="col">

            <div class="form-group">
              <label class="input-placeholder"><b>Director's Id Number</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepOneForm.directorIdNumber.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="directorIdNumber" id="directorIdNumber"
                     name="directorIdNumber"
                     placeholder="The id number of one director" required="required" type="text">
              <div *ngIf="submitted && formStepOneForm.directorIdNumber.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.directorIdNumber.errors.required">The id number of one director</div>
              </div>

            </div>
          </div>

        </div>

        <div class="row input-row">

          <div class="col">
            <div class="form-group">
              <label class="input-placeholder"><b>Company Name</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepOneForm.name.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="name" id="name" name="name"
                     placeholder="The Company name" required="required" type="text">
              <div *ngIf="submitted && formStepOneForm.name.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.name.errors.required">The Company name required</div>
              </div>
            </div>
          </div>

          <div class="col">
            <div class="form-group">
              <label class="input-placeholder"><b>KRA Pin</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepOneForm.kraPin.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="kraPin" id="kraPin" name="kraPin"
                     placeholder="The kraPin" required="required" type="text">
              <div *ngIf="submitted && formStepOneForm.kraPin.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.kraPin.errors.required">The Company name required</div>
              </div>
            </div>
          </div>

        </div>

        <div class="row input-row">

          <div class="col">

            <div class="form-group">
              <label class="input-placeholder"><b>Yearly Turnover</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepOneForm.yearlyTurnover.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="yearlyTurnover" id="yearlyTurnover"
                     name="yearlyTurnover" placeholder="The yearly Turnover" required="required" type="number">
              <div *ngIf="submitted && formStepOneForm.yearlyTurnover.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.yearlyTurnover.errors.required">The yearly Turnover is required</div>
              </div>

            </div>
          </div>

          <div class="col">
            <div class="form-group">
              <label class="input-placeholder" for="businessLines">
                Line Of Business
              </label>
              <br>
              <ng-container *ngIf="businessLines$ | async as apps">
                <select [ngClass]="{ 'is-invalid': submitted && formStepOneForm.businessLines.errors }"
                        (ngModelChange)="updateSelectedBusinessLine()"
                        formControlName="businessLines" id="businessLines"
                        name="businessLines" required="required" style="width: 100%; height: 75%">
                  <option ngValue="null" selected>Please select</option>
                  <option
                    *ngFor="let app of apps| filterPipe: {status: true}"
                    [ngValue]="app.id"
                    class="dropdown-item">{{app.name}}</option>
                </select>

              </ng-container>
              <div *ngIf="submitted && formStepOneForm.businessLines.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.businessLines.errors.required">The Business Lines required</div>
              </div>
            </div>

          </div>
        </div>
        <div class="row input-row">
          <div class="col">
            <div class="form-group">
              <label class="input-placeholder" for="businessLines">
                Nature of Business
              </label>
              <br>
              <ng-container
                *ngIf="businessNatures$ | async as apps">
                <select [ngClass]="{ 'is-invalid': submitted && formStepOneForm.businessNatures.errors }"
                        (ngModelChange)="updateSelectedBusinessNatures()"
                        formControlName="businessNatures" id="businessNatures"
                        name="businessNatures" required="required" style="width: 48%; height: 100%">
                  <option ngValue="null" selected>Please select</option>
                  <option
                    *ngFor="let app of apps| filterPipe:{status: true, businessLinesId:selectedBusinessLine }"
                    [ngValue]="app.id"
                    class="dropdown-item">{{app.name}}</option>
                </select>

              </ng-container>
              <div *ngIf="submitted && formStepOneForm.businessNatures.errors" class="invalid-feedback">
                <div *ngIf="formStepOneForm.businessNatures.errors.required"> Nature of Business required</div>
              </div>
            </div>
          </div>
        </div>


        <div class="row mt-5 ml-5">
          <div class="col">
            <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
          </div>
          <div class="col">
            <button class="login-button" type="submit">NEXT</button>
          </div>


        </div>
      </div>
      </div>
    </form>


  </div>

  <div *ngSwitchCase="2">
    <form (ngSubmit)="onClickNext(stepTwoForm.valid)" [formGroup]="stepTwoForm" action="" class="form" enctype="multipart/form-data" method="post">
      <div class="form-body">
        <div class="container">
        <div class="row">
          <h2 class="welcome">Address & Contact Information</h2>
        </div>

        <div class="row input-row">

          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Postal Address</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepTwoForm.postalAddress.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="postalAddress" id="postalAddress"
                     name="postalAddress" placeholder="Company postal address" required="required" type="text">
              <div *ngIf="submitted && formStepTwoForm.postalAddress.errors" class="invalid-feedback">
                <div *ngIf="formStepTwoForm.postalAddress.errors.required">The Postal Address is required</div>
              </div>
            </div>
          </div>

          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Physical Address</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepTwoForm.physicalAddress.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="physicalAddress" id="physicalAddress"
                     name="physicalAddress" placeholder="The physical address" required="required" type="text">
              <div *ngIf="submitted && formStepTwoForm.physicalAddress.errors" class="invalid-feedback">
                <div *ngIf="formStepTwoForm.physicalAddress.errors.required">The physical address is required</div>
              </div>
            </div>
          </div>

        </div>

        <div class="row input-row">

          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Plot Number</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepTwoForm.plotNumber.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="plotNumber" id="plotNumber"
                     name="plotNumber" placeholder="The plot number" required="required" type="text">
              <div *ngIf="submitted && formStepTwoForm.plotNumber.errors" class="invalid-feedback">
                <div *ngIf="formStepTwoForm.plotNumber.errors.required">The Plot Number is required</div>
              </div>
            </div>
          </div>
          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Company Email</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepTwoForm.companyEmail.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="companyEmail" id="companyEmail"
                     name="companyEmail" placeholder="The company email address" required="required" type="text">
              <div *ngIf="submitted && formStepTwoForm.companyEmail.errors" class="invalid-feedback">
                <div *ngIf="formStepTwoForm.companyEmail.errors.required">The company email address is required</div>
              </div>
            </div>
          </div>

        </div>

        <div class="row input-row">

          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Company Phone</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepTwoForm.companyTelephone.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="companyTelephone" id="companyTelephone"
                     name="companyTelephone" placeholder="The company phone number" required="required" type="text">
              <div *ngIf="submitted && formStepTwoForm.companyTelephone.errors" class="invalid-feedback">
                <div *ngIf="formStepTwoForm.companyTelephone.errors.required">The company phone number is required</div>
              </div>
            </div>
          </div>
          <div class="col"></div>
        </div>
        <div class="row input-row">
          <div class="col">
            <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
          </div>
          <div class="col">
            <button class="login-button" type="submit">NEXT</button>
          </div>

        </div>
      </div>
      </div>


    </form>

  </div>

  <div *ngSwitchCase="3">
    <form (ngSubmit)="onClickNext(stepThreeForm.valid)" [formGroup]="stepThreeForm" action="" class="form" enctype="multipart/form-data" method="post">
      <div class="container">
        <div class="row">
          <h2 class="welcome">
            PHysical Location Information
          </h2>
        </div>
        <div class="row input-row">
          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Building Name</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepThreeForm.buildingName.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="buildingName" id="buildingName"
                     name="buildingName" placeholder="Building Name" required="required" type="text">
              <div *ngIf="submitted && formStepThreeForm.buildingName.errors" class="invalid-feedback">
                <div *ngIf="formStepThreeForm.buildingName.errors.required">The Building Name is required</div>
              </div>
            </div>
          </div>

          <div class="col">
              <label class="input-placeholder"><b>Street Name</b></label>
              <input [ngClass]="{ 'is-invalid': submitted && formStepThreeForm.streetName.errors }"
                     aria-describedby="inputGroup-sizing-sm" aria-label="Small"
                     class="form-control two-column-input" formControlName="streetName" id="streetName"
                     name="streetName" placeholder="The street name" required="required" type="text">
              <div *ngIf="submitted && formStepThreeForm.streetName.errors" class="invalid-feedback">
                <div *ngIf="formStepThreeForm.streetName.errors.required">The street name is required</div>
              </div>
          </div>

        </div>
        <div class="row input-row">
          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>Region</b></label>
            <br>
            <ng-container *ngIf="region$ | async as apps">
              <select [ngClass]="{ 'is-invalid': submitted && formStepThreeForm.region.errors }"
                (ngModelChange)="updateSelectedRegion()"
                      formControlName="region" id="region"
                      name="region" required="required" style="width: 100%; height: 90%">
                <option ngValue="null" selected>Please select</option>
                <option *ngFor="let app of apps| filterPipe: {status: true}" [ngValue]="app.id" class="dropdown-item">{{app.region}}</option>
              </select>
              <div *ngIf="submitted && formStepThreeForm.region.errors" class="invalid-feedback">
                <div *ngIf="formStepThreeForm.region.errors.required">The Region is required</div>
              </div>
            </ng-container>
          </div>
          </div>
          <div class="col">
            <div style="margin-top: 3%" class="form-group">
              <label class="input-placeholder"><b>County</b></label>
            <br>
            <ng-container *ngIf="county$ | async as apps">
              <select [ngClass]="{ 'is-invalid': submitted && formStepThreeForm.county.errors }"
                (ngModelChange)="updateSelectedCounty()"
                      formControlName="county" id="county"
                      name="county" required="required" style="width: 100%; height: 90%">
                <option ngValue="null" selected>Please select</option>
                <option
                  *ngFor="let app of apps| filterPipe: {status: true, regionId: selectedRegion}"
                  [ngValue]="app.id"
                  class="dropdown-item">{{app.county}}</option>
              </select>
              <div *ngIf="submitted && formStepThreeForm.county.errors" class="invalid-feedback">
                <div *ngIf="formStepThreeForm.county.errors.required">The County is required</div>
              </div>
            </ng-container>
            </div>
          </div>
        </div>
        <div class="row input-row">

          <div class="col">
            <label class="input-placeholder" for="town">
              Town
            </label>
            <br>
            <ng-container *ngIf="town$ | async as apps">
              <select [ngClass]="{ 'is-invalid': submitted && formStepThreeForm.town.errors }"
                (ngModelChange)="updateSelectedTown()"
                      formControlName="town" id="town"
                      name="town" required="required" style="width: 100%; height: 90%">
                <option ngValue="null" selected>Please select</option>
                <option
                  *ngFor="let app of apps| filterPipe: {status: true, countyId: selectedCounty}"
                  [ngValue]="app.id"
                  class="dropdown-item">{{app.town}}</option>
              </select>
              <div *ngIf="submitted && formStepThreeForm.town.errors" class="invalid-feedback">
                <div *ngIf="formStepThreeForm.town.errors.required">The town is required</div>
              </div>
            </ng-container>
          </div>
          <div class="col"></div>

        </div>
        <br>
        <div class="row">
          <div class="col">
            <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
          </div>
          <div class="col">
            <button class="login-button" [disabled]="!stepThreeForm.valid" type="submit">NEXT</button>
          </div>
        </div>


      </div>


    </form>

  </div>
  <div *ngSwitchCase="4">
    <form (ngSubmit)="onClickRegisterCompany(stepFourForm.valid)" [formGroup]="stepFourForm" action="" class="form"
          enctype="multipart/form-data" method="post">
      <div class="container">
        <div class="row">
          <h2 class="welcome">
            Contact Person Information
          </h2>
        </div>

        <div class="row input-row">
          <div class="col">
            <label class="input-placeholder" for="firstName">
              First Name
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.firstName.errors }"
              class="form-control two-column-input" formControlName="firstName" id="firstName"
                   name="firstName"
                   placeholder="" required="required" type="text">
            <div *ngIf="submitted && formStepFourForm.firstName.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.firstName.errors.required">The First name is required</div>
            </div>
          </div>
          <div class="col">
            <label class="input-placeholder" for="lastName">
              Last Name
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.lastName.errors }"
              class="form-control two-column-input" formControlName="lastName" id="lastName"
                   name="lastName"
                   placeholder="" required="required" type="text">
            <div *ngIf="submitted && formStepFourForm.lastName.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.lastName.errors.required">The last name is required</div>
            </div>
          </div>
        </div>

        <div class="row input-row">

          <div class="col">
            <label class="input-placeholder" for="userName">
              User Name
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.userName.errors }"
              class="form-control two-column-input" formControlName="userName" id="userName"
                   name="userName"
                   placeholder="" required="required" type="text">
            <div *ngIf="submitted && formStepFourForm.userName.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.userName.errors.required">The userName is required</div>
            </div>
          </div>
          <div class="col">
            <label class="input-placeholder" for="email">
              Email address
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.email.errors }"
                   class="form-control two-column-input" formControlName="email" id="email"
                   name="email"
                   placeholder="" required="required" type="email">
            <div *ngIf="submitted && formStepFourForm.email.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.email.errors.required">The email is required</div>
            </div>
          </div>
        </div>

        <div class="row input-row">
          <div class="col">
            <label class="input-placeholder" for="credentials">
              Password
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.credentials.errors }"
                   class="form-control two-column-input" formControlName="credentials" id="credentials"
                   name="credentials"
                   placeholder="enter password" required="required" type="password">
            <div *ngIf="submitted && formStepFourForm.credentials.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.credentials.errors.required">The credentials is required</div>
            </div>
          </div>
          <div class="col">
            <label class="input-placeholder" for="confirmCredentials">
              Confirm Password
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.confirmCredentials.errors }"
                   class="form-control two-column-input" formControlName="confirmCredentials" id="confirmCredentials"
                   name="confirmCredentials"
                   placeholder="password confirmation" required="required" type="password">
            <div *ngIf="submitted && formStepFourForm.confirmCredentials.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.confirmCredentials.errors.required">The confirm Credentials is required</div>
            </div>
          </div>
        </div>

        <div class="row input-row">

          <div class="col">
            <label class="input-placeholder" for="cellphone">
              Cellphone
            </label>
            <br>
            <input [ngClass]="{ 'is-invalid': submitted && formStepFourForm.cellphone.errors }"
                   class="form-control two-column-input" formControlName="cellphone" id="cellphone"
                   name="cellphone"
                   placeholder="e.g 254xxxxxx" required="required" type="tel">
            <div *ngIf="submitted && formStepFourForm.cellphone.errors" class="invalid-feedback">
              <div *ngIf="formStepFourForm.cellphone.errors.required">The cell phone is required</div>
            </div>
            <br>
          </div>
          <div class="col">
            <button (click)="onClickSendOtp(); clicked=true;" [disabled]="clicked"
                    [hidden]="stepFourForm.get('cellphone')?.invalid"
                    class="login-button mt-2"
                    type="button"

            >Send OTP
            </button>
          </div>
        </div>
        <div class="row input-row">

          <div class="col">
            <label class="input-placeholder" for="otp">
              OTP
            </label>
            <br>
            <input class="form-control two-column-input" formControlName="otp" id="otp"
                   name="otp"
                   placeholder="The OTP" required="required" type="text">
            <br>
          </div>
          <div class="col">
            <button (click)="onClickValidateOtp()" [hidden]="stepFourForm.get('otp')?.invalid" class="login-button mt-2"
                    type="button"
            >Validate OTP
            </button>
          </div>

        </div>

        <br>
        <div class="row">
          <div class="col">
            <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
          </div>
          <div class="col">
            <button class="login-button"  type="submit">SAVE</button>
          </div>

        </div>


      </div>
    </form>

  </div>

</div>
<br>
<span class="input-placeholder">
        Have an account? <a class="reset-credentials" href="#" routerLink="/login">Login</a>
      </span>

