<section>
  <div class="row">
    <div class="col-md-8">
      <div>
        <div (click)="goBack()" style="cursor: pointer">
          <span><fa-icon [icon]="backIcon"></fa-icon></span>
          <span style="font-size: 20px"> Go back</span>
        </div>
        <div (click)="onClickAddBranch()" style="cursor: pointer">
          <span><fa-icon [icon]="addIcon"></fa-icon></span>
          <span style="font-size: 20px"> Add Branch</span>
        </div>

        <h4 class="notifications-title mt-4">
          <span>Plants/Branches for ({{company$?.name}})</span>
        </h4>
        <table [dtOptions]="dtOptions" class="table table-striped table-bordered table-sm row-border hover" datatable>
          <thead>
          <tr>
            <th>ID#</th>
            <th>NAME</th>
            <th>STATUS</th>
            <th>VIEW</th>
            <th>USERS</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let theRecord of branches$ | async">
            <td>{{ theRecord.id }}</td>
            <td>{{ theRecord.buildingName | titlecase}}</td>
            <td>
              <div *ngIf="theRecord.status;  then true_span else false_span">
              </div>
              <ng-template #true_span><span id="true">Active</span></ng-template>
              <ng-template #false_span><span id="false">Inactive</span></ng-template>
            </td>
            <td>
              <a (click)="editRecord(theRecord)" class="details-button">EDIT BRANCH
              </a>
            </td>
            <td>
              <a (click)="onClickUsers(theRecord)" class="details-button">VIEW USERS
              </a>
            </td>

          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="col-md-4">
      <div [ngSwitch]="step">


        <div *ngSwitchCase="1">
          <form (ngSubmit)="onClickNext(stepTwoForm.valid)" [formGroup]="stepTwoForm" action="" class="form"
                enctype="multipart/form-data" method="post">
            <div class="container">
              <div class="row">
                <h2 class="welcome2">
                  Address & Contact Information
                </h2>
              </div>

              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="buildingName">
                    Building Name
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="buildingName" id="buildingName"
                         name="buildingName"
                         placeholder="Company building name" required="required" type="text">
                </div>
                <div class="col">
                  <label class="input-placeholder-required" for="physicalAddress">
                    Physical Address
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="physicalAddress" id="physicalAddress"
                         name="physicalAddress"
                         placeholder="Company physical address" required="required" type="text">
                </div>
              </div>

              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="location">
                    Location
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="location" id="location"
                         name="location"
                         placeholder="Company location" required="required" type="text">
                </div>
                <div class="col">
                  <label class="input-placeholder-required" for="postalAddress">
                    Postal Address
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="postalAddress" id="postalAddress"
                         name="postalAddress"
                         placeholder="Company postal address" required="required" type="text">
                </div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="plotNo">
                    Plot Number
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="plotNo" id="plotNo"
                         name="plotNo"
                         placeholder="Plot number" required="required" type="text">

                </div>
                <div class="col">

                  <label class="input-placeholder-required" for="street">
                    Street
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="street" id="street"
                         name="street"
                         placeholder="Street name" required="required" type="text">
                </div>

              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="nearestLandMark">
                    Nearest LandMark
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="nearestLandMark" id="nearestLandMark"
                         name="nearestLandMark"
                         placeholder="Nearest LandMark" required="required" type="text">

                </div>
                <div class="col">
                  <label class="input-placeholder-required" for="region">
                    Region
                  </label>
                  <br>
                  <ng-container *ngIf="region$ | async as apps">
                    <select (ngModelChange)="updateSelectedRegion()"
                            formControlName="region" id="region"
                            name="region" required="required" style="width: 100%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.region}}</option>
                    </select>

                  </ng-container>
                </div>

              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="county">
                    County
                  </label>
                  <br>
                  <ng-container *ngIf="county$ | async as apps">
                    <select
                      (ngModelChange)="updateSelectedCounty()"
                      formControlName="county" id="county"
                      name="county" required="required" style="width: 100%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true, regionId: selectedRegion}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.county}}</option>
                    </select>

                  </ng-container>
                </div>
                <div class="col">
                  <label class="input-placeholder-required" for="town">
                    Town
                  </label>
                  <br>
                  <ng-container *ngIf="town$ | async as apps">
                    <select (ngModelChange)="updateSelectedTown()"
                            formControlName="town" id="town"
                            name="town" required="required" style="width: 48%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true, countyId: selectedCounty}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.town}}</option>
                    </select>

                  </ng-container>
                </div>

              </div>
              <div class="row mt-5">
                <div class="col">
                  <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
                </div>
                <div class="col">
                  <button class="login-button" type="submit">NEXT</button>
                </div>

              </div>
            </div>


          </form>

        </div>

        <div *ngSwitchCase="2">
          <form (ngSubmit)="onClickSave(stepThreeForm.valid)" [formGroup]="stepThreeForm" action="" class="form"
                enctype="multipart/form-data" method="post">
            <div class="container">
              <div class="row">
                <h2 class="welcome2">
                  Contact Information
                </h2>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="filter-inputs" for="contactPerson">
                    Contact Person
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="contactPerson" id="contactPerson"
                         name="contactPerson"
                         placeholder="The contactPerson" required="required" type="text">

                </div>
                <div class="col">
                  <label class="filter-inputs" for="designation">
                    Designation
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="designation" id="designation"
                         name="designation"
                         placeholder="The designation" required="required" type="text">

                </div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="filter-inputs-not-required" for="descriptions">
                    Description
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="descriptions" id="descriptions"
                         name="descriptions"
                         placeholder="The descriptions" required="required" type="text">

                </div>
                <div class="col">
                  <label class="filter-inputs" for="status">
                    Active
                  </label>
                  <br>
                  <input formControlName="status" id="status"
                         name="status"
                         placeholder="The status" required="required" type="checkbox">

                </div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="filter-inputs" for="emailAddress">
                    Email Address
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="emailAddress" id="emailAddress"
                         name="emailAddress"
                         placeholder="The emailAddress" required="required" type="email">

                </div>
                <div class="col">
                  <label class="filter-inputs" for="telephone">
                    Telephone
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="telephone" id="telephone"
                         name="telephone"
                         placeholder="The telephone" required="required" type="text">

                </div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="filter-inputs-not-required" for="faxNo">
                    Fax No
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="faxNo" id="faxNo"
                         name="faxNo"
                         placeholder="The faxNo" type="text">

                </div>
                <div class="col">

                  <input class="form-control two-column-input" formControlName="companyProfileId" id="companyProfileId"
                         name="companyProfileId"
                         type="hidden">

                  <input class="form-control two-column-input" formControlName="id" id="id"
                         name="id"
                         type="hidden">

                </div>
              </div>

              <br>
              <div class="row">
                <div class="col">
                  <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
                </div>
                <div class="col">
                  <button class="login-button" type="submit">SAVE</button>
                </div>
              </div>


            </div>


          </form>

        </div>

      </div>
    </div>

  </div>
</section>
