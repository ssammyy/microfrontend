<section>
  <div class="row">
    <div class="col-md-8">
      <div>
        <h4 class="notifications-title">
          <span>Organizations</span>
        </h4>
        <table [dtOptions]="dtOptions" class="table table-striped table-bordered table-sm row-border hover" datatable>
          <thead>
          <tr>
            <th>ENTRY#</th>
            <th>COMPANY</th>
            <th>STATUS</th>
            <th>VIEW</th>
            <th>PLANT/BRANCH DETAILS</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let theRecord of companies$ | async">
            <td>{{ theRecord.id }}</td>
            <td>{{ theRecord.name }}</td>
            <td>
              <div *ngIf="theRecord.status;  then true_span else false_span">
              </div>
              <ng-template #true_span><span id="true">Active</span></ng-template>
              <ng-template #false_span><span id="false">Inactive</span></ng-template>
            </td>
            <td>
              <a (click)="editRecord(theRecord)" class="details-button">EDIT ORG
              </a>
            </td>
            <td>
              <a (click)="onClickPlantDetails(theRecord)" class="details-button">ADD PLANTS/BRANCHES
              </a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="col-md-4">
      <div [ngSwitch]="step">

        <div *ngSwitchCase="1">
          <form (ngSubmit)="onClickNext(stepOneForm.valid)" [formGroup]="stepOneForm" action="" class="form"
                enctype="multipart/form-data" method="post">
            <div class="container-fluid">
              <div class="row">
                <h2 class="welcome2">
                  General Company Information
                </h2>
              </div>
              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="registrationNumber">
                    Company Registration Number
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="registrationNumber"
                         id="registrationNumber"
                         name="registrationNumber"
                         placeholder="Company registration number" required="required" type="text">
                </div>

                <div class="col">
                  <label class="input-placeholder-required" for="directorIdNumber">
                    Director's Id Number
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="directorIdNumber" id="directorIdNumber"
                         name="directorIdNumber"
                         placeholder="The id number of one director" required="required" type="text">
                </div>

              </div>

              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="name">
                    Company Name
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="name" id="name" name="name"
                         placeholder="The company name" required="required" type="text">
                </div>

                <div class="col">
                  <label class="input-placeholder-required" for="kraPin">
                    KRA Pin
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="kraPin" id="kraPin" name="kraPin"
                         placeholder="Company KRA pin" required="required" type="text">
                </div>

              </div>

              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="yearlyTurnover">
                    Yearly Turnover
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="yearlyTurnover" id="yearlyTurnover"
                         name="yearlyTurnover"
                         placeholder="Company yearly turnover" required="required" type="number">
                </div>

                <div class="col">
                  <label class="input-placeholder-required" for="businessLines">
                    Line Of Business
                  </label>
                  <br>
                  <ng-container *ngIf="businessLines$ | async as apps">
                    <select (ngModelChange)="updateSelectedBusinessLine()"
                            formControlName="businessLines" id="businessLines"
                            name="businessLines" required="required" style="width: 100%; height: 75%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.name}}</option>
                    </select>

                  </ng-container>
                </div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="businessNatures">
                    Nature of Business
                  </label>
                  <br>
                  <ng-container
                    *ngIf="businessNatures$ | async as apps">
                    <select (ngModelChange)="updateSelectedBusinessNatures()"
                            formControlName="businessNatures" id="businessNatures"
                            name="businessNatures" required="required" style="width: 48%; height: 100%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe:{status: true, businessLinesId:selectedBusinessLine }"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.name}}</option>
                    </select>

                  </ng-container>

                </div>
              </div>


              <div class="row mt-5 ml-5">
                <div class="col">
                  <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
                </div>
                <div class="col">
                  <button class="login-button" type="submit">NEXT</button>
                </div>


              </div>
            </div>
          </form>
        </div>

        <div *ngSwitchCase="2">
          <form (ngSubmit)="onClickNext(stepTwoForm.valid)" [formGroup]="stepTwoForm" action="" class="form"
                enctype="multipart/form-data" method="post">
            <div class="container">
              <div class="row">
                <h2 class="welcome2">
                  Address & Contact Information
                </h2>
              </div>

              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="postalAddress">
                    Postal Address
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="postalAddress" id="postalAddress"
                         name="postalAddress"
                         placeholder="Company postal address" required="required" type="text">
                </div>

                <div class="col">
                  <label class="input-placeholder-required" for="physicalAddress">
                    Physical Address
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="physicalAddress" id="physicalAddress"
                         name="physicalAddress"
                         placeholder="Company physical address" required="required" type="text">
                </div>

              </div>

              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="plotNumber">
                    Plot Number
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="plotNumber" id="plotNumber"
                         name="plotNumber"
                         placeholder="Plot number" required="required" type="text">

                </div>
                <div class="col">

                  <label class="input-placeholder-required" for="companyEmail">
                    Company Email
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="companyEmail" id="companyEmail"
                         name="companyEmail"
                         placeholder="Company email address" required="required" type="text">
                </div>

              </div>

              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="companyTelephone">
                    Company Phone
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="companyTelephone" id="companyTelephone"
                         name="companyTelephone"
                         placeholder="Company phone number" required="required" type="text">

                </div>
                <div class="col"></div>
              </div>
              <div class="row input-row">
                <div class="col">
                  <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
                </div>
                <div class="col">
                  <button class="login-button" type="submit">NEXT</button>
                </div>

              </div>
            </div>


          </form>

        </div>

        <div *ngSwitchCase="3">
          <form (ngSubmit)="onClickSave(stepThreeForm.valid)" [formGroup]="stepThreeForm" action="" class="form"
                enctype="multipart/form-data" method="post">
            <div class="container">
              <div class="row">
                <h2 class="welcome2">
                  Physical Location Information
                </h2>
              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="postalAddress">
                    Building Name
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="buildingName" id="buildingName"
                         name="buildingName"
                         placeholder="Building Name" required="required" type="text">
                </div>

                <div class="col">
                  <label class="input-placeholder-required" for="streetName">
                    Street Name
                  </label>
                  <br>
                  <input class="form-control two-column-input" formControlName="streetName" id="streetName"
                         name="streetName"
                         placeholder="Street name" required="required" type="text">
                </div>

              </div>
              <div class="row input-row">
                <div class="col">
                  <label class="input-placeholder-required" for="region">
                    Region
                  </label>
                  <br>
                  <ng-container *ngIf="region$ | async as apps">
                    <select (ngModelChange)="updateSelectedRegion()"
                            formControlName="region" id="region"
                            name="region" required="required" style="width: 100%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.region}}</option>
                    </select>

                  </ng-container>
                </div>
                <div class="col">
                  <label class="input-placeholder-required" for="county">
                    County
                  </label>
                  <br>
                  <ng-container *ngIf="county$ | async as apps">
                    <select (ngModelChange)="updateSelectedCounty()"
                            formControlName="county" id="county"
                            name="county" required="required" style="width: 100%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true, regionId: selectedRegion}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.county}}</option>

                    </select>

                  </ng-container>
                </div>
              </div>
              <div class="row input-row">

                <div class="col">
                  <label class="input-placeholder-required" for="town">
                    Town
                  </label>
                  <br>
                  <ng-container *ngIf="town$ | async as apps">
                    <select (ngModelChange)="updateSelectedTown()"
                            formControlName="town" id="town"
                            name="town" required="required" style="width: 48%; height: 90%">
                      <option ngValue="null" selected>Please select</option>
                      <option
                        *ngFor="let app of apps| filterPipe: {status: true, countyId: selectedCounty}"
                        [ngValue]="app.id"
                        class="dropdown-item">{{app.town}}</option>
                    </select>

                  </ng-container>
                </div>

              </div>
              <br>
              <div class="row">
                <div class="col">
                  <button (click)="onClickPrevious()" class="login-button" type="button">PREV</button>
                </div>
                <div class="col">
                  <button class="login-button" type="submit">SAVE</button>
                </div>
              </div>


            </div>


          </form>

        </div>

      </div>
    </div>

  </div>
</section>
