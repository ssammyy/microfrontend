<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:flowable="http://flowable.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.flowable.org/processdef">
    <process id="requestModule" name="Request Module" isExecutable="true">
        <startEvent id="startEvent" flowable:formFieldValidation="true"></startEvent>
        <exclusiveGateway id="decideOfTC"></exclusiveGateway>
        <userTask id="prepareJustification" name="Prepare a justification" flowable:candidateGroups="TC-sec"
                  flowable:formFieldValidation="true">
            <extensionElements>
                <modeler:initiator-can-complete xmlns:modeler="http://flowable.org/modeler">
                    <![CDATA[false]]></modeler:initiator-can-complete>
            </extensionElements>
        </userTask>
        <exclusiveGateway id="decisionOfSPC"></exclusiveGateway>
        <userTask id="prepareWorkPlan" name="Prepare workplan" flowable:candidateGroups="TC-sec"
                  flowable:formFieldValidation="true">
            <extensionElements>
                <modeler:initiator-can-complete xmlns:modeler="http://flowable.org/modeler">
                    <![CDATA[false]]></modeler:initiator-can-complete>
            </extensionElements>
        </userTask>
        <endEvent id="endEvent"></endEvent>
        <serviceTask id="sendNotificationCompiledRequests" name="Send notification of the compiled request"
                      flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler" >

        </serviceTask>
        <userTask id="analyzeNotificationRequest" name="Review request" flowable:candidateGroups="HOF"
                  flowable:formFieldValidation="true"></userTask>
        <serviceTask id="reviewRequest" name="Review request"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EvaluateStandardRequest"></serviceTask>
        <sequenceFlow id="flow21" sourceRef="reviewRequest" targetRef="notificationForAdoption"></sequenceFlow>
        <sequenceFlow id="flow11" sourceRef="prepareJustification" targetRef="sendToSPCSECForAprroval"></sequenceFlow>
        <sequenceFlow id="flow18" sourceRef="prepareWorkPlan" targetRef="receiveWorkPlanNotification"></sequenceFlow>
        <sequenceFlow id="flow3" sourceRef="sendNotificationCompiledRequests"
                      targetRef="analyzeNotificationRequest"></sequenceFlow>
        <serviceTask id="notificationForAdoption" name="Send notification for adoption of the request"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <serviceTask id="approveNotification" name="Send notification of assignment"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <serviceTask id="sendToSPCSECForAprroval" name="Send notification for approval"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <serviceTask id="receiveWorkPlanNotification" name="Send notification of workplan"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <serviceTask id="negativeFeedbackRemarks" name="Send feedback with remarks"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <userTask id="approveOrDisapproveRequest" name="Adopt NWI or not" flowable:candidateGroups="TC"
                  flowable:formFieldValidation="true"></userTask>
        <userTask id="approveOrDisapproveJustification" name="Approve or disapprove justification"
                  flowable:candidateGroups="SPC-sec" flowable:formFieldValidation="true">
            <extensionElements>
                <modeler:initiator-can-complete xmlns:modeler="http://flowable.org/modeler">
                    <![CDATA[false]]></modeler:initiator-can-complete>
            </extensionElements>
        </userTask>
        <sequenceFlow id="flow8" sourceRef="approveOrDisapproveRequest" targetRef="decideOfTC"></sequenceFlow>
        <sequenceFlow id="flow31" sourceRef="sendToSPCSECForAprroval"
                      targetRef="approveOrDisapproveJustification"></sequenceFlow>
        <sequenceFlow id="flow12" sourceRef="approveOrDisapproveJustification" targetRef="decisionOfSPC"></sequenceFlow>
        <sequenceFlow id="flow9" name="No" sourceRef="decideOfTC" targetRef="negativeFeedbackRemarks">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!approved}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow10" name="Yes" sourceRef="decideOfTC" targetRef="prepareJustification">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approved}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow13" name="Yes" sourceRef="decisionOfSPC" targetRef="prepareWorkPlan">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${spc_approved}]]></conditionExpression>
        </sequenceFlow>
        <serviceTask id="sendNotiReviewNWI" name="Send notification to review NWI"
                     flowable:class="org.kebs.app.kotlin.apollo.standardsdevelopment.handlers.EmailHandler"></serviceTask>
        <userTask id="prepareNWI" name="Prepare NWI" flowable:candidateGroups="TC-sec"
                  flowable:formFieldValidation="true"></userTask>
        <sequenceFlow id="flow250" sourceRef="prepareNWI" targetRef="sendNotiReviewNWI"></sequenceFlow>
        <sequenceFlow id="flow700" sourceRef="approveNotification" targetRef="prepareNWI"></sequenceFlow>
        <sequenceFlow id="flow30" sourceRef="sendNotiReviewNWI" targetRef="approveOrDisapproveRequest"></sequenceFlow>
        <sequenceFlow id="flow6" sourceRef="notificationForAdoption" targetRef="approveNotification"></sequenceFlow>
        <sequenceFlow id="flow1" sourceRef="startEvent" targetRef="sendNotificationCompiledRequests"></sequenceFlow>
        <sequenceFlow id="flow200" sourceRef="analyzeNotificationRequest" targetRef="reviewRequest"></sequenceFlow>
        <sequenceFlow id="flow17" sourceRef="receiveWorkPlanNotification" targetRef="endEvent"></sequenceFlow>
        <sequenceFlow id="flow16" name="No" sourceRef="decisionOfSPC" targetRef="negativeFeedbackRemarks">
            <conditionExpression xsi:type="tFormalExpression"><![CDATA[${!spc_approved}]]></conditionExpression>
        </sequenceFlow>
        <sequenceFlow id="flow88" sourceRef="negativeFeedbackRemarks" targetRef="endEvent"></sequenceFlow>
    </process>
    <bpmndi:BPMNDiagram id="BPMNDiagram_requestModule">
        <bpmndi:BPMNPlane bpmnElement="requestModule" id="BPMNPlane_requestModule">
            <bpmndi:BPMNShape bpmnElement="startEvent" id="BPMNShape_startEvent">
                <omgdc:Bounds height="30.000000000000014" width="30.0" x="245.0" y="110.56949824672994"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="decideOfTC" id="BPMNShape_decideOfTC">
                <omgdc:Bounds height="40.00000000000003" width="40.0" x="840.0" y="239.99999999999997"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="prepareJustification" id="BPMNShape_prepareJustification">
                <omgdc:Bounds height="80.0" width="100.0" x="720.0" y="220.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="decisionOfSPC" id="BPMNShape_decisionOfSPC">
                <omgdc:Bounds height="40.0" width="40.0" x="360.0" y="240.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="prepareWorkPlan" id="BPMNShape_prepareWorkPlan">
                <omgdc:Bounds height="80.0" width="100.0" x="210.0" y="210.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="endEvent" id="BPMNShape_endEvent">
                <omgdc:Bounds height="28.0" width="28.0" x="60.0" y="510.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="sendNotificationCompiledRequests"
                              id="BPMNShape_sendNotificationCompiledRequests">
                <omgdc:Bounds height="80.00000000000001" width="100.0" x="405.0" y="85.56949824672994"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="analyzeNotificationRequest" id="BPMNShape_analyzeNotificationRequest">
                <omgdc:Bounds height="72.058109580798" width="88.76970210956483" x="615.0"
                              y="89.54044345633093"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="reviewRequest" id="BPMNShape_reviewRequest">
                <omgdc:Bounds height="80.00000000000001" width="100.0" x="855.0" y="85.56949824672994"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="notificationForAdoption" id="BPMNShape_notificationForAdoption">
                <omgdc:Bounds height="80.0" width="100.0" x="1185.4562061888046" y="45.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="approveNotification" id="BPMNShape_approveNotification">
                <omgdc:Bounds height="80.0" width="100.0" x="1185.4562061888046" y="197.57603436480076"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="sendToSPCSECForAprroval" id="BPMNShape_sendToSPCSECForAprroval">
                <omgdc:Bounds height="80.0" width="100.0" x="585.0" y="220.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="receiveWorkPlanNotification" id="BPMNShape_receiveWorkPlanNotification">
                <omgdc:Bounds height="80.0" width="100.0" x="210.0" y="345.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="negativeFeedbackRemarks" id="BPMNShape_negativeFeedbackRemarks">
                <omgdc:Bounds height="80.0" width="100.0" x="795.0" y="360.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="approveOrDisapproveRequest" id="BPMNShape_approveOrDisapproveRequest">
                <omgdc:Bounds height="80.0" width="100.0" x="915.0" y="210.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="approveOrDisapproveJustification"
                              id="BPMNShape_approveOrDisapproveJustification">
                <omgdc:Bounds height="80.0" width="100.0" x="450.0" y="220.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="sendNotiReviewNWI" id="BPMNShape_sendNotiReviewNWI">
                <omgdc:Bounds height="80.0" width="100.0" x="1060.2984833151181" y="210.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNShape bpmnElement="prepareNWI" id="BPMNShape_prepareNWI">
                <omgdc:Bounds height="80.0" width="100.0" x="1200.0" y="390.0"></omgdc:Bounds>
            </bpmndi:BPMNShape>
            <bpmndi:BPMNEdge bpmnElement="flow17" id="BPMNEdge_flow17">
                <omgdi:waypoint x="209.99999999994924" y="385.0"></omgdi:waypoint>
                <omgdi:waypoint x="88.87096642434801" y="385.0"></omgdi:waypoint>
                <omgdi:waypoint x="88.87096642434801" y="510.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow18" id="BPMNEdge_flow18">
                <omgdi:waypoint x="260.0" y="289.95000000000005"></omgdi:waypoint>
                <omgdi:waypoint x="260.0" y="345.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow13" id="BPMNEdge_flow13">
                <omgdi:waypoint x="362.1794871794871" y="257.8109756097561"></omgdi:waypoint>
                <omgdi:waypoint x="309.95000000000005" y="250.13951048951054"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow250" id="BPMNEdge_flow250">
                <omgdi:waypoint x="1199.999999999929" y="430.0"></omgdi:waypoint>
                <omgdi:waypoint x="1110.2984833151181" y="430.0"></omgdi:waypoint>
                <omgdi:waypoint x="1110.2984833151181" y="289.95000000000005"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow16" id="BPMNEdge_flow16">
                <omgdi:waypoint x="380.49999999999994" y="279.44321275071627"></omgdi:waypoint>
                <omgdi:waypoint x="380.5" y="400.0"></omgdi:waypoint>
                <omgdi:waypoint x="794.9999999992351" y="400.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow700" id="BPMNEdge_flow700">
                <omgdi:waypoint x="1235.4562061888046" y="277.5260343648008"></omgdi:waypoint>
                <omgdi:waypoint x="1235.4562061888046" y="333.7880171824004"></omgdi:waypoint>
                <omgdi:waypoint x="1250.0" y="333.7880171824004"></omgdi:waypoint>
                <omgdi:waypoint x="1250.0" y="390.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow1" id="BPMNEdge_flow1">
                <omgdi:waypoint x="274.94999914263036" y="125.56949824672995"></omgdi:waypoint>
                <omgdi:waypoint x="404.9999999999464" y="125.56949824672995"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow3" id="BPMNEdge_flow3">
                <omgdi:waypoint x="504.95000000000005" y="125.56949824672995"></omgdi:waypoint>
                <omgdi:waypoint x="615.0" y="125.56949824672995"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow31" id="BPMNEdge_flow31">
                <omgdi:waypoint x="585.0" y="260.0"></omgdi:waypoint>
                <omgdi:waypoint x="549.9499999999281" y="260.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow6" id="BPMNEdge_flow6">
                <omgdi:waypoint x="1235.4562061888046" y="124.95"></omgdi:waypoint>
                <omgdi:waypoint x="1235.4562061888046" y="197.57603436480076"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow21" id="BPMNEdge_flow21">
                <omgdi:waypoint x="954.9499999999999" y="125.56949824672995"></omgdi:waypoint>
                <omgdi:waypoint x="1032.5" y="125.56949824672995"></omgdi:waypoint>
                <omgdi:waypoint x="1032.5" y="85.0"></omgdi:waypoint>
                <omgdi:waypoint x="1185.4562061888046" y="85.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow10" id="BPMNEdge_flow10">
                <omgdi:waypoint x="840.3888888888889" y="260.3888888888889"></omgdi:waypoint>
                <omgdi:waypoint x="819.9499999999938" y="260.2759668508287"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow11" id="BPMNEdge_flow11">
                <omgdi:waypoint x="720.0" y="260.0"></omgdi:waypoint>
                <omgdi:waypoint x="684.9499999999999" y="260.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow8" id="BPMNEdge_flow8">
                <omgdi:waypoint x="915.0" y="250.0"></omgdi:waypoint>
                <omgdi:waypoint x="905.0" y="250.0"></omgdi:waypoint>
                <omgdi:waypoint x="905.0" y="260.5"></omgdi:waypoint>
                <omgdi:waypoint x="879.4212274774775" y="260.5"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow88" id="BPMNEdge_flow88">
                <omgdi:waypoint x="845.0" y="439.95000000000005"></omgdi:waypoint>
                <omgdi:waypoint x="845.0" y="522.0"></omgdi:waypoint>
                <omgdi:waypoint x="87.94995405436816" y="523.9636836474975"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow12" id="BPMNEdge_flow12">
                <omgdi:waypoint x="449.999999999998" y="260.0067375886525"></omgdi:waypoint>
                <omgdi:waypoint x="399.5483190271809" y="260.3642857142857"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow9" id="BPMNEdge_flow9">
                <omgdi:waypoint x="860.5" y="279.4341023489933"></omgdi:waypoint>
                <omgdi:waypoint x="860.5" y="320.0"></omgdi:waypoint>
                <omgdi:waypoint x="845.0" y="320.0"></omgdi:waypoint>
                <omgdi:waypoint x="845.0" y="360.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow200" id="BPMNEdge_flow200">
                <omgdi:waypoint x="703.7197021095648" y="125.56949824672995"></omgdi:waypoint>
                <omgdi:waypoint x="854.9999999999995" y="125.56949824672995"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
            <bpmndi:BPMNEdge bpmnElement="flow30" id="BPMNEdge_flow30">
                <omgdi:waypoint x="1060.2984833150908" y="250.0"></omgdi:waypoint>
                <omgdi:waypoint x="1014.9499999999869" y="250.0"></omgdi:waypoint>
            </bpmndi:BPMNEdge>
        </bpmndi:BPMNPlane>
    </bpmndi:BPMNDiagram>
</definitions>
