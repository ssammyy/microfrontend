<div *ngIf="userDetails" class="pb-2 mb-3 mr-2 border-bottom w-100">
  <h3>
    <fa-icon [icon]="arrowLeftIcon" routerLink="/dashboard" style="padding-right: 3px; cursor: pointer"></fa-icon>
    {{userDetails.id}}
  </h3>
</div>

<div class="row mt-4">
  <div *ngIf="userDetails" class="col-lg-9 push-sm-12">
    <div class="row">
      <div class="col-lg-12">
        <h4 class="mb-4">User Bio Details</h4>
        <table class="mb-4">
          <tbody>
          <tr>
            <td class="field-titles">Title</td>
            <td>{{userDetails.title}}</td>
          </tr>
          <tr>
            <td class="field-titles">First Name</td>
            <td>{{userDetails.firstName}}</td>
          </tr>
          <tr>
            <td class="field-titles">Last Name</td>
            <td>{{userDetails.lastName}}</td>
          </tr>
          <tr>
            <td class="field-titles">UserName</td>
            <td>{{userDetails.userName}}</td>
          </tr>
          <tr>
            <td class="field-titles">Email Address</td>
            <td>{{userDetails.email}}</td>
          </tr>
          <tr>
            <td class="field-titles">Phone Number</td>
            <td>{{userDetails.personalContactNumber}}</td>
          </tr>
          <tr>
            <td class="field-titles">ID/Passport/PIN Number</td>
            <td>{{userDetails.userPinIdNumber}}</td>
          </tr>
          <tr>
            <td class="field-titles">Registration Number</td>
            <td>{{userDetails.userRegNo}}</td>
          </tr>
          <tr>
            <td class="field-titles">Registration Date</td>
            <td>{{userDetails.registrationDate}}</td>
          </tr>
          <tr>
            <td class="field-titles">Enabled</td>
            <td>{{userDetails.enabled}}</td>
          </tr>
          <tr>
            <td class="field-titles">Account Expired</td>
            <td>{{userDetails.accountExpired}}</td>
          </tr>
          <tr>
            <td class="field-titles">Account Locked</td>
            <td>{{userDetails.accountLocked}}</td>
          </tr>
          <tr>
            <td class="field-titles">Credentials Expired</td>
            <td>{{userDetails.credentialsExpired}}</td>
          </tr>
          <tr>
            <td class="field-titles">Status</td>
            <td>{{userDetails.status}}</td>
          </tr>

          </tbody>
        </table>
      </div>
    </div>
    <div *ngIf="userDetails.employeeProfile" class="row">
      <div class="col-lg-12">
        <h4 class="mb-4">Employee Profile Details</h4>
        <table class="mb-4">
          <tbody>
          <!--          <tr>-->
          <!--            <td class="field-titles">Profile Id</td>-->
          <!--            <td>{{userDetails.employeeProfile.profileId}}</td>-->
          <!--          </tr>-->
          <tr>
            <td class="field-titles">Directorate</td>
            <td>{{userDetails.employeeProfile.directorate}}</td>
          </tr>
          <tr>
            <td class="field-titles">Designation</td>
            <td>{{userDetails.employeeProfile.designation}}</td>
          </tr>
          <tr>
            <td class="field-titles">Department</td>
            <td>{{userDetails.employeeProfile.department}}</td>
          </tr>
          <tr>
            <td class="field-titles">Division</td>
            <td>{{userDetails.employeeProfile.division}}</td>
          </tr>
          <tr>
            <td class="field-titles">Section</td>
            <td>{{userDetails.employeeProfile.section}}</td>
          </tr>
          <tr>
            <td class="field-titles">L1 Sub Section</td>
            <td>{{userDetails.employeeProfile.l1SubSubSection}}</td>
          </tr>
          <tr>
            <td class="field-titles">L2 Sub Section</td>
            <td>{{userDetails.employeeProfile.l2SubSubSection}}</td>
          </tr>
          <tr>
            <td class="field-titles">Region</td>
            <td>{{userDetails.employeeProfile.region}}</td>
          </tr>
          <tr>
            <td class="field-titles">County</td>
            <td>{{userDetails.employeeProfile.county}}</td>
          </tr>
          <tr>
            <td class="field-titles">Town</td>
            <td>{{userDetails.employeeProfile.town}}</td>
          </tr>
          <tr>
            <td class="field-titles">Status</td>
            <td>{{userDetails.employeeProfile.status}}</td>
          </tr>

          </tbody>
        </table>
      </div>
    </div>
    <div *ngIf="userDetails.companyProfile" class="row">
      <div class="col-lg-12">
        <h4 class="mb-4">Company Profile Details</h4>
        <table class="mb-4">
          <tbody>
          <!--          <tr>-->
          <!--            <td class="field-titles">Profile Id</td>-->
          <!--            <td>{{userDetails.employeeProfile.profileId}}</td>-->
          <!--          </tr>-->
          <tr>
            <td class="field-titles">Name</td>
            <td>{{userDetails.companyProfile.name}}</td>
          </tr>
          <tr>
            <td class="field-titles">Kra Pin</td>
            <td>{{userDetails.companyProfile.kraPin}}</td>
          </tr>
          <tr>
            <td class="field-titles">User Id</td>
            <td>{{userDetails.companyProfile.userId}}</td>
          </tr>
          <tr>
            <td class="field-titles">Registration Number</td>
            <td>{{userDetails.companyProfile.registrationNumber}}</td>
          </tr>
          <tr>
            <td class="field-titles">Postal Address</td>
            <td>{{userDetails.companyProfile.postalAddress}}</td>
          </tr>
          <tr>
            <td class="field-titles">Company Email</td>
            <td>{{userDetails.companyProfile.companyEmail}}</td>
          </tr>
          <tr>
            <td class="field-titles">Company Telephone</td>
            <td>{{userDetails.companyProfile.companyTelephone}}</td>
          </tr>
          <tr>
            <td class="field-titles">Yearly Turnover</td>
            <td>{{userDetails.companyProfile.yearlyTurnover}}</td>
          </tr>
          <tr>
            <td class="field-titles">Business Lines</td>
            <td>{{userDetails.companyProfile.businessLines}}</td>
          </tr>
          <tr>
            <td class="field-titles">Business Natures</td>
            <td>{{userDetails.companyProfile.businessNatures}}</td>
          </tr>
          <tr>
            <td class="field-titles">Building Name</td>
            <td>{{userDetails.companyProfile.buildingName}}</td>
          </tr>
          <tr>
            <td class="field-titles">Street Name</td>
            <td>{{userDetails.companyProfile.streetName}}</td>
          </tr>
          <tr>
            <td class="field-titles">region</td>
            <td>{{userDetails.companyProfile.region}}</td>
          </tr>
          <tr>
            <td class="field-titles">county</td>
            <td>{{userDetails.companyProfile.county}}</td>
          </tr>
          <tr>
            <td class="field-titles">Town</td>
            <td>{{userDetails.companyProfile.town}}</td>
          </tr>

          </tbody>
        </table>
      </div>
    </div>


    <!--    <div class="row">-->
    <!--      <div class="col-lg-12">-->
    <!--        <h4 class="mb-4">Location Details</h4>-->
    <!--        <table class="mb-4">-->
    <!--          <tbody>-->
    <!--          <tr>-->
    <!--            <td class="field-titles">County</td>-->
    <!--            <td>{{userDetails.county}}</td>-->
    <!--          </tr>-->
    <!--          <tr>-->
    <!--            <td class="field-titles">Town</td>-->
    <!--            <td>{{userDetails.town}}</td>-->
    <!--          </tr>-->
    <!--          <tr>-->
    <!--            <td class="field-titles">Market Center</td>-->
    <!--            <td>{{userDetails.marketCenter}}</td>-->
    <!--          </tr>-->
    <!--          <tr>-->
    <!--            <td class="field-titles">Building Name</td>-->
    <!--            <td>{{userDetails.buildingName}}</td>-->
    <!--          </tr>-->

    <!--          </tbody>-->
    <!--        </table>-->
    <!--      </div>-->
    <!--    </div>-->

  </div>

  <div class="col-lg-3 col-sm-12 pull-sm-12 mb-4">
    <div class="mb-5">
      <h3 class="mb-3">Actions</h3>
      <div *ngFor="let role of accountService.userValue.roles">
        <!--              <div *ngIf="(userDetails.rejectedStatus == null && userDetails.approvedStatus == null)">-->
        <!--        <button (click)="openModal('assignUserARole')" *ngIf="(role == 'USER_MANAGEMENT_MODIFY')"-->
        <!--                class="submit-button mb-4"-->
        <!--                data-toggle="modal" type="button">USER ASSIGN ROLE-->
        <!--        </button>-->
        <!--        &lt;!&ndash;        <button *ngIf="(role == 'MS_HOD_MODIFY')"  class="btn btn-outline-secondary action-button"  type="button" data-toggle="modal"  >REJECT</button>&ndash;&gt;-->
        <!--        <button (click)="openModal('assignUserACFS')" *ngIf="(role == 'RBAC_ASSIGN_CFS')"-->
        <!--                class="submit-button mb-4"-->
        <!--                data-toggle="modal" type="button">USER ASSIGN CFS-->
        <!--        </button>-->
        <button (click)="openModal('selectUserRequest')" *ngIf="(role == 'USER')"
                class="submit-button mb-4"
                data-toggle="modal" type="button">USER REQUEST
        </button>
        <button (click)="openModal('companyProfile')" *ngIf="(role == 'USER')"
                class="submit-button mb-4"
                data-toggle="modal" type="button">UPDATE PROFILE
        </button>

      </div>
    </div>
  </div>


</div>

<ng-template #editModal let-modal>

  <div class="modal-header">
    <h5 class="modal-title" id="modal-basic-title">{{currDivLabel}}</h5>
    <button (click)="modal.dismiss()" aria-label="Close" class="close" type="button">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <!--                <p>Are you sure this userDetails falls in the KEBS mandate ?</p>-->
    <div *ngIf="(currDiv == 'selectUserRequest')">
      <form [formGroup]="userRequestForm" class="form">
        <div class="form-body">
          <div class="form-group">

            <div>
              <!--              <input type="text"  [class.is-invalid]="formUserRequest.userId.invalid && formUserRequest.userId.touched"-->
              <!--                      class="form-control one-column-input" aria-label="Small" aria-describedby="inputGroup-sizing-sm" [value]=user.id-->
              <!--                                     formControlName="userId"-->
              <!--                                     name="userId">-->
              <label><b>Select Request</b></label>
              <select [class.is-invalid]="formUserRequest.requestId.invalid && formUserRequest.requestId.touched"
                      class="form-control mt-2" formControlName="requestId"
                      name="requestId">
                <option label="--select something --"></option>
                <option *ngFor="let userRequest of userRequestTypesEntity"
                        [value]="userRequest.id"> {{ userRequest.userRequest }} </option>
              </select>
              <label><b>Reason</b></label>
              <textarea
                [class.is-invalid]="formUserRequest.description.invalid && formUserRequest.description.touched"
                aria-describedby="inputGroup-sizing-sm" aria-label="Small" class="form-control one-column-input"
                cols="65" formControlName="description"
                name="description"
                required rows="5"></textarea>
            </div>
          </div>
        </div>


      </form>
    </div>

    <div *ngIf="(currDiv == 'assignUserACFS')">
      <form [formGroup]="assignCfsForm" class="form">
        <div class="form-body">
          <div class="form-group">
            <div>
              <label><b>Select cfs</b></label>
              <select [class.is-invalid]="formAssignCfs.cfsID.invalid && formAssignCfs.cfsID.touched"
                      class="form-control mt-2" formControlName="cfsID"
                      name="cfsID">
                <option label="--select something --"></option>
                <option *ngFor="let cfs of cfsEntity"
                        [value]="cfs.id"> {{ cfs.subSection }} </option>
              </select>

            </div>
          </div>
        </div>

      </form>
    </div>

    <div *ngIf="(currDiv == 'companyProfile')">
      <form [formGroup]="userCompanyForm" class="form">
        <div class="form-body">
          <div class="form-group">
            <div>
              <label><b>Select Profile Type</b></label>
              <select [class.is-invalid]="formUserCompany.profileType.invalid && formUserCompany.profileType.touched"
                      class="form-control mt-2" formControlName="profileType"
                      name="profileType">
                <option disabled label="--select something --"></option>
                <option *ngFor="let userRequest of userRequestTypesEntity"
                        [value]="userRequest.id"> {{ userRequest.userRequest }} </option>
              </select>
              <label><b>Name</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="name" name="name" required
                     [class.is-invalid]="formUserCompany.name.invalid && formUserCompany.name.touched">
              <label><b>Kra Pin</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="kraPin" name="kraPin" required
                     [class.is-invalid]="formUserCompany.kraPin.invalid && formUserCompany.kraPin.touched">
              <label><b>Registration Number</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="registrationNumber" name="registrationNumber" required
                     [class.is-invalid]="formUserCompany.registrationNumber.invalid && formUserCompany.registrationNumber.touched">
              <label><b>Postal Address</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="postalAddress" name="postalAddress" required
                     [class.is-invalid]="formUserCompany.postalAddress.invalid && formUserCompany.postalAddress.touched">
              <label><b>Company Email</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="companyEmail" name="companyEmail" required
                     [class.is-invalid]="formUserCompany.companyEmail.invalid && formUserCompany.companyEmail.touched">
              <label><b>Company Telephone</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="companyTelephone" name="companyTelephone" required
                     [class.is-invalid]="formUserCompany.companyTelephone.invalid && formUserCompany.companyTelephone.touched">
              <label><b>Yearly Turnover</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="yearlyTurnover" name="yearlyTurnover" required
                     [class.is-invalid]="formUserCompany.yearlyTurnover.invalid && formUserCompany.yearlyTurnover.touched">
              <label><b>Building Name</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="buildingName" name="buildingName" required
                     [class.is-invalid]="formUserCompany.buildingName.invalid && formUserCompany.buildingName.touched">
              <label><b>Street Name</b></label>
              <input type="text" class="form-control one-column-input" aria-label="Small"
                     aria-describedby="inputGroup-sizing-sm" formControlName="streetName" name="streetName" required
                     [class.is-invalid]="formUserCompany.streetName.invalid && formUserCompany.streetName.touched">


            </div>
          </div>
        </div>

      </form>
    </div>


  </div>

  <div *ngIf="userDetails" class="modal-footer">
    <button (click)="modal.dismiss()" class="btn btn-outline-secondary mr-4" data-dismiss="modal" type="button">NO
    </button>
    <button (click)="onSubmitUserRequest(userDetails?.id); modal.dismiss()"
            *ngIf="currDiv == 'selectUserRequest'"
            [disabled]="!userRequestForm.valid" class="submit-button"
            data-dismiss="modal"
            type="button">Submit Request
    </button>
    <button (click)="onSubmitUserComapany(userDetails?.id); modal.dismiss()"
            *ngIf="currDiv == 'companyProfile'"
            [disabled]="!userCompanyForm.valid" class="submit-button"
            data-dismiss="modal"
            type="button">Submit
    </button>
    <button (click)="onSubmitAssignedCFS(userDetails?.employeeProfile?.profileId); modal.dismiss()"
            *ngIf="currDiv == 'assignUserACFS'"
            [disabled]="!assignCfsForm.valid" class="submit-button"
            data-dismiss="modal"
            type="button">ASSIGN CFS
    </button>
    <!--    <button (click)="onRejectKEBSMandate(userDetails.refNumber); modal.dismiss()" *ngIf="currDiv == 'rejectuserDetails'"-->
    <!--            [disabled]="!rejectuserDetailsForm.valid" class="submit-button" data-dismiss="modal"-->
    <!--            type="button">SEND FEEDBACK-->
    <!--    </button>-->
    <!--    <button (click)="onAdviceKEBSMandate(userDetails.refNumber); modal.dismiss()"-->
    <!--            *ngIf="currDiv == 'rejectOGAuserDetails'"-->
    <!--            [disabled]="!adviceuserDetailsForm.valid" class="submit-button" data-dismiss="modal"-->
    <!--            type="button">SEND FEEDBACK-->
    <!--    </button>-->

    <!--    <button (click)="onAssignOfficer(userDetails.refNumber); modal.dismiss()" *ngIf="currDiv == 'assignOfficer'"-->
    <!--            [disabled]="!assignIOuserDetailsForm.valid" class="submit-button" data-dismiss="modal"-->
    <!--            type="button">ASSIGN-->
    <!--    </button>-->
    <!--        <button type="button" class="submit-button" (click)="onAcceptuserDetails(userDetails)">CONFIRM AND FORWARD</button>-->
  </div>

</ng-template>

<!--&lt;!&ndash; Modal &ndash;&gt;-->
<!--<div aria-hidden="true" aria-labelledby="exampleModalCenterTitle" class="modal fade" id="rejectModal"-->
<!--     role="dialog" tabindex="-1">-->
<!--  <div class="modal-dialog modal-dialog-centered" role="document">-->
<!--    <div class="modal-content">-->
<!--      <div class="modal-header">-->
<!--        <h5 class="modal-title" id="rejectModalLongTitle">Reject userDetails</h5>-->
<!--        <button aria-label="Close" class="close" data-dismiss="modal" type="button">-->
<!--          <span aria-hidden="true">&times;</span>-->
<!--        </button>-->

<!--      </div>-->
<!--      <div class="modal-body">-->
<!--        <form [formGroup]="rejectuserDetailsForm" class="form">-->
<!--          <div class="form-body">-->
<!--            <div class="form-group">-->
<!--              <label><b>CLICK The buttons below based on type of rejection</b></label>-->
<!--            </div>-->
<!--          </div>-->
<!--        </form>-->
<!--      </div>-->
<!--      <div class="modal-footer">-->
<!--        &lt;!&ndash;        <button type="button" class="btn btn-outline-secondary mr-4" data-dismiss="modal">NO</button>&ndash;&gt;-->
<!--        <button (click)="openModal('rejectOGAuserDetails')" class="submit-button" data-dismiss="modal" type="button">OGA-->
<!--          REJECTION-->
<!--        </button>-->
<!--        <button (click)="openModal('rejectuserDetails')" class="submit-button" data-dismiss="modal" type="button">REJECT-->
<!--        </button>-->
<!--      </div>-->
<!--    </div>-->
<!--  </div>-->
<!--</div>-->

