<div id="main-container">
  <div class="container" style="margin-top: 70px; margin-bottom: 80px;">
    <h2>Information Enquiries</h2>
    <br>
    <table class="table table-hover">
      <thead>
      <tr>
        <th>Information Available</th>
        <th>Status</th>
        <th>Requester Name</th>
        <th>Country</th>
        <th>Institution</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Subject</th>
        <th>Comment</th>
      </tr>
      </thead>
      <tbody class="table-striped ">

      <tr *ngFor="let notification of notifications">
        <td *ngIf="notification.name ==='New Notification'">
          <a  (click)="onOpenModal(notification,'yes2')" class="btn btn-primary tooltips" data-placement="top"  data-original-title="Yes"> Yes</a>
          &nbsp;<a  (click)="onOpenModal(notification,'no')" class="btn btn-danger tooltips" data-placement="top"  data-original-title="Yes"> No</a>
        </td>
        <td *ngIf="notification.name ==='Send Feedback Email'">
          <a  (click)="onOpenModal(notification,'SendEmail')" class="btn btn-success tooltips" data-placement="top"  data-original-title="Yes"> Send Email</a>
        </td>
        <td>{{notification.name}}</td>
        <td>{{notification.taskData.requesterName}}</td>
        <td>{{notification.taskData.requesterCountry}}</td>
        <td>{{notification.taskData.requesterInstitution}}</td>
        <td>{{notification.taskData.requesterEmail}}</td>
        <td>{{notification.taskData.requesterPhone}}</td>
        <td>{{notification.taskData.requesterSubject}}</td>
        <td>{{notification.taskData.requesterComment}}</td>
      </tr>
      </tbody>
    </table>

    <div id="yesmodals" class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Confirm that information is available </h4>
          </div>
          <div class="modal-body">
            <h5>Please confirm that you have a response to the enquiry</h5>
            <form #editForm="ngForm" >
              <input type="hidden" ngModel="{{actionRequest?.taskId}}" name="taskId" id="taskId" >
              <input type="hidden" ngModel="true" name="isAvailable"  id="isAvailable" >
              <button  class="btn btn-success btn-lg" (click)="onReSubmit(editForm.value)" data-dismiss="modal" >Yes</button>
              &nbsp;&nbsp;<button  class="btn btn-danger btn-lg" data-dismiss="modal" >No</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button"  class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Send email Modal content-->
    <div id="sendemail" class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Send Feedback E-mail</h4>
          </div>
          <div class="modal-body">
            <h4>Department Feedback</h4>
            <p>{{actionRequest?.taskData?.feedbackProvided}}</p>
            <br>
            <form #sendEmail="ngForm" >
              <input type="hidden" ngModel="{{actionRequest?.taskId}}" name="taskId" id="taskId32" >
              <input type="hidden" ngModel="34" name="nepOfficerId" id="nepOfficerId" >
              <input type="hidden" ngModel="{{actionRequest?.taskData?.requesterEmail}}" name="requesterEmail" id="requesterEmail" >
              <textarea class="form-control" ngModel="" name="feedbackSent" id="exampleFormControlTextarea1" rows="4"></textarea>
              <br>
              <button  class="btn btn-success btn-lg" (click)="sendEmailFeedback(sendEmail.value)" data-dismiss="modal" >Send E-mail</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button"  class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <!-- Send email Modal content-->
    <div id="noModal" class="modal fade" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Select a Division or Department</h4>
          </div>
          <div class="modal-body">

            <form #falseForm="ngForm" >
              <input type="hidden" ngModel="{{actionRequest?.taskId}}" name="taskId" id="taskId4" >
              <input type="hidden" ngModel="false" name="isAvailable"  id="isAvailable4" >
              <select class="form-control form-control-lg">
                <option>WTO WSS</option>
              </select>
              <br>
              <button  class="btn btn-success btn-lg" (click)="onSubmit(falseForm.value)" data-dismiss="modal" >Send to Department</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button"  class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>
